	section	.text,"ax",@progbits
	assume	adl = 1
	section	.text,"ax",@progbits
	public	_ui_to_engine_piece
_ui_to_engine_piece:
	call	__frameset0
	ld	l, (ix + 6)
	ld	e, 0
	ld	a, l
	or	a, a
	jr	z, BB0_4
	ld	a, l
	cp	a, 1
	call	pe, __setflag
	jp	m, BB0_3
	ld	e, l
	jr	BB0_4
BB0_3:
	ld	a, l
	neg
	or	a, -128
	ld	e, a
BB0_4:
	ld	a, e
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_to_ui_piece
_engine_to_ui_piece:
	call	__frameset0
	ld	e, (ix + 6)
	ld	l, 0
	ld	a, e
	and	a, 7
	ld	h, a
	neg
	ld	c, a
	ld	a, e
	cp	a, l
	call	pe, __setflag
	jp	m, BB1_2
	ld	c, h
BB1_2:
	ld	a, e
	or	a, a
	jr	z, BB1_4
	ld	l, c
BB1_4:
	ld	a, l
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_board_init
_board_init:
	call	__frameset0
	or	a, a
	sbc	hl, hl
	ld	a, (_zobrist_initialized)
	bit	0, a
	push	hl
	push	hl
	call	z, _zobrist_init
	pop	hl
	pop	hl
	ld	iy, (ix + 6)
	ld	(iy), 0
	lea	hl, iy
	inc	hl
	ld	bc, 185
	ex	de, hl
	lea	hl, iy
	ldir
	ld	de, 166
	lea	hl, iy
	add	hl, de
	ld	(hl), -1
	ld	de, 162
	lea	hl, iy
	add	hl, de
	ld	(hl), -1
	inc	de
	add	iy, de
	ld	(iy), -1
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_board_set_from_ui
_board_set_from_ui:
	ld	hl, -33
	call	__frameset
	ld	de, (ix + 6)
	ld	hl, (ix + 9)
	ld	(ix - 3), hl
	ld.sis	hl, 0
	ld	(ix - 9), hl
	push	de
	call	_board_init
	pop	hl
	ld	de, 8
	xor	a, a
	ld	hl, (ix + 6)
	ld	(ix - 6), hl
	ld	bc, 0
BB3_1:
	push	bc
	pop	hl
	or	a, a
	sbc	hl, de
	jp	z, BB3_14
	ld	(ix - 18), bc
	ld	iyl, a
	ld	bc, 0
BB3_3:
	push	bc
	pop	hl
	or	a, a
	sbc	hl, de
	jp	z, BB3_13
	ld	(ix - 15), a
	ld	a, iyl
	ld	iy, (ix - 3)
	add	iy, bc
	ld	d, (iy)
	ld	iyl, a
	ld	a, d
	or	a, a
	jp	z, BB3_12
	ld	(ix - 21), bc
	push	af
	ld	a, iyl
	ld	(ix - 12), a
	pop	af
	ld	a, d
	neg
	or	a, -128
	ld	c, a
	ld	a, d
	cp	a, 1
	call	pe, __setflag
	ld	e, d
	jp	p, BB3_7
	ld	e, c
BB3_7:
	ld	a, e
	ld	b, 7
	call	__bshru
	ld	l, a
	ld	a, e
	and	a, b
	ld	bc, 0
	ld	(ix - 24), l
	ld	c, l
	ld	(ix - 27), bc
	ld	iy, (ix - 6)
	ld	bc, (ix - 21)
	add	iy, bc
	ld	(iy), e
	ld	iyl, a
	cp	a, 6
	jr	nz, BB3_9
	ld	hl, (ix + 6)
	ld	bc, (ix - 27)
	add	hl, bc
	ld	bc, 162
	add	hl, bc
	ld	a, (ix - 12)
	ld	(hl), a
BB3_9:
	ld	l, (ix - 12)
	ld	a, l
	srl	a
	and	a, 56
	ld	e, a
	ld	a, l
	and	a, 7
	ld	h, a
	ld	a, e
	add	a, h
	ld	l, a
	xor	a, 56
	ld	h, a
	ld	a, d
	cp	a, 1
	call	pe, __setflag
	jp	p, BB3_11
	ld	l, h
BB3_11:
	ld	(ix - 30), l
	dec	iyl
	push	af
	ld	a, iyl
	ld	(ix - 33), a
	pop	af
	ld	hl, (ix + 6)
	push	hl
	pop	iy
	ld	de, (ix - 27)
	add	iy, de
	ld	de, 160
	add	iy, de
	or	a, a
	sbc	hl, hl
	push	hl
	pop	de
	ld	e, (iy)
	ld	a, (ix - 24)
	ld	b, 4
	call	__bshl
	push	hl
	pop	bc
	ld	c, a
	ld	hl, (ix + 6)
	add	hl, bc
	add	hl, de
	ld	de, 128
	add	hl, de
	ld	a, (ix - 12)
	ld	(hl), a
	inc	(iy)
	ld	iy, 0
	lea	hl, iy
	ld	l, (ix - 33)
	ld	(ix - 27), hl
	ld	c, 7
	call	__ishl
	push	hl
	pop	de
	ld	(ix - 33), de
	ld	hl, _mg_table
	add	hl, de
	ld	a, (ix - 30)
	add	a, a
	lea	bc, iy
	push	bc
	pop	de
	ld	e, a
	add	hl, de
	ld	hl, (hl)
	ld	(ix - 30), hl
	ld	a, (ix - 24)
	add	a, a
	ld	c, a
	ld	hl, (ix + 6)
	add	hl, bc
	ld	(ix - 24), hl
	ld	bc, 176
	add	hl, bc
	ld	iy, (hl)
	ld	bc, (ix - 30)
	add.sis	iy, bc
	push	de
	ld	e, iyl
	ld	d, iyh
	ld	(hl), e
	inc	hl
	ld	(hl), d
	pop	de
	ld	hl, _eg_table
	ld	bc, (ix - 33)
	add	hl, bc
	add	hl, de
	ld	de, (hl)
	ld	bc, 180
	ld	iy, (ix - 24)
	add	iy, bc
	ld	hl, (iy)
	add.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix - 27)
	ld	c, 1
	call	__ishl
	push	hl
	pop	de
	ld	hl, _phase_weight
	add	hl, de
	ld	de, (hl)
	ld	iy, (ix + 6)
	ld	bc, 184
	add	iy, bc
	ld	hl, (iy)
	add.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	push	af
	ld	a, (ix - 12)
	ld	iyl, a
	pop	af
	ld	bc, (ix - 21)
BB3_12:
	inc	bc
	inc	iyl
	ld	de, 8
	ld	a, (ix - 15)
	jp	BB3_3
BB3_13:
	ld	bc, (ix - 18)
	inc	bc
	ld	iy, (ix - 3)
	lea	iy, iy + 8
	ld	(ix - 3), iy
	ld	iy, (ix - 6)
	lea	iy, iy + 16
	ld	(ix - 6), iy
	add	a, 16
	jp	BB3_1
BB3_14:
	ld	a, (ix + 12)
	ld	iy, 0
	cp	a, 1
	jr	nz, BB3_16
	ld	a, 0
	jr	BB3_17
BB3_16:
	ld	a, 1
BB3_17:
	ld	de, 164
	ld	bc, (ix + 6)
	push	bc
	pop	hl
	add	hl, de
	ld	(hl), a
	inc	de
	push	bc
	pop	hl
	add	hl, de
	ld	a, (ix + 15)
	ld	(hl), a
	ld	de, 167
	push	bc
	pop	hl
	add	hl, de
	ld	a, (ix + 24)
	ld	(hl), a
	inc	de
	push	bc
	pop	hl
	add	hl, de
	ld	de, (ix + 27)
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	l, (ix + 18)
	ld	a, l
	cp	a, -1
	ld	de, 166
	jr	z, BB3_20
	ld	a, (ix + 21)
	cp	a, -1
	jr	z, BB3_20
	ld	a, l
	ld	b, 4
	call	__bshl
	add	a, (ix + 21)
	ld	hl, (ix + 6)
	add	hl, de
	ld	(hl), a
BB3_20:
	ld	bc, 128
	ld	e, 1
	ld	(ix - 3), iy
	ld	d, b
BB3_21:
	lea	hl, iy
	or	a, a
	sbc	hl, bc
	jp	z, BB3_29
	ld	a, iyl
	and	a, -120
	or	a, a
	jp	nz, BB3_28
	ld	(ix - 6), d
	lea	bc, iy
	ld	d, e
	ld	hl, (ix + 6)
	add	hl, bc
	ld	e, (hl)
	ld	a, e
	or	a, a
	jr	nz, BB3_25
	ld	e, d
	ld	d, (ix - 6)
	jp	BB3_28
BB3_25:
	ld	a, e
	and	a, 7
	ld	l, a
	ld	a, e
	cp	a, 0
	call	pe, __setflag
	ld	e, 6
	jp	m, BB3_27
	ld	e, 0
BB3_27:
	dec	l
	ld	a, l
	add	a, e
	lea	hl, iy
	ld	(ix - 12), hl
	ld	c, d
	call	__ishru
	ld	bc, 56
	call	__iand
	push	hl
	pop	iy
	ld	hl, (ix - 12)
	ld	bc, 7
	call	__iand
	push	hl
	pop	bc
	add	iy, bc
	lea	de, iy
	ld	(ix - 15), de
	or	a, a
	sbc	hl, hl
	ld	l, a
	ld	(ix - 18), hl
	ld	c, 8
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _zobrist_piece
	add	iy, bc
	ex	de, hl
	ld	c, 2
	call	__ishl
	push	hl
	pop	bc
	add	iy, bc
	ld	hl, (iy)
	ld	e, (iy + 3)
	ld	bc, (ix - 3)
	ld	a, (ix - 6)
	call	__lxor
	ld	(ix - 3), hl
	ld	d, e
	ld	e, 1
	ld	hl, (ix - 18)
	ld	c, 7
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _lock_piece
	add	iy, bc
	ld	hl, (ix - 15)
	ld	c, e
	call	__ishl
	push	hl
	pop	bc
	add	iy, bc
	ld	hl, (iy)
	ld	bc, (ix - 9)
	call	__sxor
	ld	iy, (ix - 12)
	ld	(ix - 9), hl
BB3_28:
	inc	iy
	ld	bc, 128
	jp	BB3_21
BB3_29:
	or	a, a
	sbc	hl, hl
	ld	l, (ix + 15)
	ld	(ix - 6), hl
	ld	c, 2
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _zobrist_castle
	add	iy, bc
	ld	hl, (iy)
	ld	e, (iy + 3)
	ld	bc, (ix - 3)
	ld	a, d
	call	__lxor
	push	hl
	pop	iy
	ld	(ix - 12), e
	ld	c, 1
	ld	hl, (ix - 6)
	call	__ishl
	push	hl
	pop	de
	ld	hl, _lock_castle
	add	hl, de
	ld	hl, (hl)
	ld	bc, (ix - 9)
	call	__sxor
	ld	c, l
	ld	b, h
	ld	hl, (ix + 6)
	ld	de, 166
	add	hl, de
	ld	a, (hl)
	cp	a, -1
	ld	(ix - 3), iy
	jr	nz, BB3_31
	push	af
	ld	a, (ix - 12)
	ld	iyl, a
	pop	af
	jp	BB3_32
BB3_31:
	and	a, 7
	ld	d, a
	ld	(ix - 6), bc
	ld	b, 2
	call	__bshl
	ld	bc, 0
	ld	c, a
	ld	(ix - 9), bc
	ld	iy, _zobrist_ep_file
	add	iy, bc
	ld	hl, (iy)
	ld	e, (iy + 3)
	ld	bc, (ix - 3)
	ld	a, (ix - 12)
	call	__lxor
	ld	(ix - 3), hl
	ld	iyl, e
	sla	d
	ld	bc, (ix - 9)
	ld	c, d
	ld	hl, _lock_ep_file
	add	hl, bc
	ld	hl, (hl)
	ld	bc, (ix - 6)
	call	__sxor
	ld	c, l
	ld	b, h
BB3_32:
	ld	a, (ix + 12)
	cp	a, 1
	ld	(ix - 6), bc
	jp	z, BB3_34
	ld	hl, (_zobrist_side)
	ld	a, (_zobrist_side+3)
	ld	e, a
	ld	bc, (ix - 3)
	ld	a, iyl
	call	__lxor
	ld	(ix - 3), hl
	ld	hl, _lock_side
	ld	hl, (hl)
	ld	bc, (ix - 6)
	call	__sxor
	ld	(ix - 6), hl
	jr	BB3_35
BB3_34:
	ld	e, iyl
BB3_35:
	ld	iy, (ix + 6)
	ld	bc, 170
	add	iy, bc
	ld	hl, (ix - 3)
	ld	(iy), hl
	lea	hl, iy + 3
	ld	(hl), e
	ld	de, 174
	ld	hl, (ix + 6)
	add	hl, de
	ld	de, (ix - 6)
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_board_startpos
_board_startpos:
	call	__frameset0
	ld	iy, (ix + 6)
	ld	de, _board_startpos.start
	ld	bc, 1
	push	bc
	or	a, a
	sbc	hl, hl
	push	hl
	dec	hl
	push	hl
	push	hl
	ld	hl, 15
	push	hl
	push	bc
	push	de
	push	iy
	call	_board_set_from_ui
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_board_make
_board_make:
	ld	hl, -89
	call	__frameset
	ld	c, (ix + 9)
	ld	b, (ix + 10)
	ld	a, (ix + 11)
	ld	(ix - 4), a
	or	a, a
	sbc	hl, hl
	push	hl
	pop	de
	ld	e, c
	ld	iy, (ix + 6)
	ld	(ix - 49), de
	add	iy, de
	ld	(ix - 55), iy
	ld	c, (iy)
	ld	iy, (ix + 6)
	ld	(ix - 13), hl
	ex	de, hl
	ld	e, b
	lea	hl, iy
	ld	(ix - 25), de
	add	hl, de
	ld	a, (hl)
	ld	(ix - 43), a
	ld	de, 164
	lea	hl, iy
	add	hl, de
	ld	(ix - 46), hl
	ld	a, (hl)
	ld	(ix - 1), a
	xor	a, 1
	ld	l, a
	ld	(ix - 58), hl
	ld	a, c
	and	a, 7
	ld	(ix - 16), a
	ld	e, (ix + 9)
	ld	a, e
	srl	a
	and	a, 56
	ld	l, a
	ld	a, e
	and	a, 7
	ld	e, a
	ld	a, l
	add	a, e
	ld	(ix - 7), a
	ld	a, b
	srl	a
	and	a, 56
	ld	l, a
	ld	(ix - 22), b
	ld	a, b
	and	a, 7
	ld	e, a
	ld	a, l
	add	a, e
	ld	(ix - 10), a
	ld	(ix - 31), c
	ld	a, c
	cp	a, d
	call	pe, __setflag
	ld	a, 6
	ld	(ix - 71), a
	ld	l, a
	jp	m, BB5_2
	ld	l, 0
BB5_2:
	ld	a, (ix - 16)
	dec	a
	ld	(ix - 28), a
	add	a, l
	ld	(ix - 19), a
	ld	a, (ix - 1)
	or	a, a
	jr	z, BB5_4
	ld	e, 0
	jr	BB5_5
BB5_4:
	ld	e, -1
BB5_5:
	ld	l, (ix - 7)
	ld	a, l
	xor	a, 56
	bit	0, e
	jr	nz, BB5_7
	ld	l, a
BB5_7:
	ld	(ix - 64), l
	ld	l, (ix - 10)
	ld	a, l
	xor	a, 56
	bit	0, e
	jr	nz, BB5_9
	ld	l, a
BB5_9:
	ld	(ix - 80), a
	ld	(ix - 52), l
	ld	hl, (ix - 13)
	ld	l, (ix - 1)
	ld	(ix - 13), hl
	ld	iy, (ix + 12)
	ld	a, (ix - 43)
	ld	(iy), a
	ld	bc, 165
	ld	de, (ix + 6)
	push	de
	pop	hl
	add	hl, bc
	ld	(ix - 37), hl
	ld	a, (hl)
	ld	(iy + 1), a
	inc	bc
	push	de
	pop	hl
	add	hl, bc
	ld	(ix - 34), hl
	ld	a, (hl)
	ld	(iy + 2), a
	inc	bc
	push	de
	pop	hl
	add	hl, bc
	ld	a, (hl)
	ld	(ix - 74), a
	ld	(iy + 3), a
	inc	bc
	ex	de, hl
	add	hl, bc
	ld	hl, (hl)
	ld	(iy + 4), l
	ld	(iy + 5), h
	ld	bc, 170
	ld	iy, (ix + 6)
	add	iy, bc
	ld	bc, (iy)
	lea	hl, iy + 3
	ld	de, (ix + 6)
	ld	a, (hl)
	ld	(ix - 67), bc
	ld	iy, (ix + 12)
	ld	(iy + 6), bc
	ld	(ix - 70), a
	ld	(iy + 9), a
	ld	bc, 174
	ex	de, hl
	add	hl, bc
	ld	(ix - 40), hl
	ld	hl, (hl)
	ld	(ix - 61), hl
	ld	(iy + 10), l
	ld	(iy + 11), h
	ld	a, (ix - 31)
	ld	(iy + 12), a
	ld	a, (ix - 4)
	ld	(iy + 13), a
	and	a, 1
	ld	c, a
	ld	a, (ix - 16)
	cp	a, 1
	ld	a, b
	jr	z, BB5_13
	bit	0, c
	ld	a, 0
	jr	nz, BB5_13
	ld	a, (ix - 74)
	cp	a, -1
	jr	z, BB5_14
	inc	a
BB5_13:
	ld	hl, (ix + 6)
	ld	bc, 167
	add	hl, bc
	ld	(hl), a
BB5_14:
	or	a, a
	sbc	hl, hl
	ld	l, (ix - 19)
	ld	(ix - 19), hl
	ld	c, 8
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _zobrist_piece
	add	iy, bc
	ld	b, 2
	ld	d, (ix - 7)
	ld	a, d
	call	__bshl
	ld	bc, 0
	ld	c, a
	add	iy, bc
	ld	hl, (iy)
	ld	e, (iy + 3)
	ld	bc, (ix - 67)
	ld	a, (ix - 70)
	call	__lxor
	ld	iy, (ix + 6)
	ld	bc, 170
	add	iy, bc
	ld	(ix - 77), hl
	ld	(iy), hl
	lea	hl, iy + 3
	ld	(ix - 74), e
	ld	(hl), e
	ld	a, 7
	ld	hl, (ix - 19)
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	ld	hl, _lock_piece
	add	hl, bc
	sla	d
	ld	iy, 0
	lea	bc, iy
	ld	c, d
	add	hl, bc
	ld	hl, (hl)
	ld	bc, (ix - 61)
	call	__sxor
	ld	c, l
	ld	b, h
	ld	hl, (ix - 40)
	ld	(ix - 70), bc
	ld	(hl), c
	inc	hl
	ld	(hl), b
	lea	hl, iy
	ld	l, (ix - 28)
	ld	(ix - 61), hl
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	ld	(ix - 67), bc
	ld	hl, _mg_table
	add	hl, bc
	ld	c, (ix - 64)
	sla	c
	lea	de, iy
	ld	e, c
	ld	(ix - 64), de
	add	hl, de
	ld	hl, (hl)
	ld	(ix - 28), hl
	ld	hl, (ix - 13)
	ld	c, 1
	call	__ishl
	push	hl
	pop	bc
	ld	iy, (ix + 6)
	add	iy, bc
	ld	(ix - 7), iy
	ld	bc, 176
	add	iy, bc
	lea	hl, iy
	ld	hl, (hl)
	ld	bc, (ix - 28)
	or	a, a
	sbc.sis	hl, bc
	ld	(ix - 28), iy
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, _eg_table
	ld	bc, (ix - 67)
	add	hl, bc
	ld	de, (ix - 64)
	add	hl, de
	ld	de, (hl)
	ld	bc, 180
	ld	iy, (ix - 7)
	add	iy, bc
	ld	hl, (iy)
	or	a, a
	sbc.sis	hl, de
	ld	(ix - 7), iy
	ld	(iy), l
	ld	(iy + 1), h
	bit	2, (ix - 4)
	jp	nz, BB5_21
	ld	l, (ix - 43)
	ld	a, l
	or	a, a
	ld	iy, (ix + 6)
	jp	z, BB5_30
	ld	a, l
	and	a, 7
	ld	e, a
	ld	a, l
	cp	a, 0
	call	pe, __setflag
	ld	l, 6
	jp	m, BB5_18
	ld	l, 0
BB5_18:
	dec	e
	ld	(ix - 64), e
	ld	a, e
	add	a, l
	ld	l, a
	ld	de, 0
	push	de
	pop	bc
	ld	de, (ix - 58)
	ld	c, e
	ld	(ix - 43), bc
	ld	a, e
	or	a, a
	ld	a, (ix - 10)
	jr	z, BB5_20
	ld	a, (ix - 80)
BB5_20:
	ld	(ix - 67), a
	ld	de, 0
	ld	e, l
	ld	(ix - 80), de
	ld	c, 8
	ex	de, hl
	call	__ishl
	push	hl
	pop	de
	ld	iy, _zobrist_piece
	add	iy, de
	ld	b, 2
	ld	a, (ix - 10)
	call	__bshl
	ld	de, 0
	ld	e, a
	add	iy, de
	ld	hl, (iy)
	ld	e, (iy + 3)
	ld	bc, (ix - 77)
	ld	a, (ix - 74)
	call	__lxor
	ld	bc, (ix + 6)
	push	bc
	pop	iy
	ld	bc, 170
	add	iy, bc
	ld	(iy), hl
	lea	hl, iy + 3
	ld	(hl), e
	ld	a, 7
	ld	hl, (ix - 80)
	ld	c, a
	call	__ishl
	push	hl
	pop	de
	ld	hl, _lock_piece
	add	hl, de
	ld	e, (ix - 10)
	sla	e
	ld	bc, 0
	ld	c, e
	add	hl, bc
	ld	hl, (hl)
	ld	bc, (ix - 70)
	call	__sxor
	ld	iy, (ix - 40)
	ld	(iy), l
	ld	(iy + 1), h
	ld	iy, 0
	lea	hl, iy
	ld	l, (ix - 64)
	ld	(ix - 70), hl
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	ld	(ix - 40), bc
	ld	hl, _mg_table
	add	hl, bc
	ld	a, (ix - 67)
	add	a, a
	lea	bc, iy
	ld	c, a
	ld	(ix - 64), bc
	add	hl, bc
	ld	hl, (hl)
	ld	(ix - 67), hl
	ld	hl, (ix - 43)
	ld	a, 1
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	ld	iy, (ix + 6)
	add	iy, bc
	ld	(ix - 43), iy
	ld	bc, 176
	add	iy, bc
	lea	hl, iy
	ld	hl, (hl)
	ld	bc, (ix - 67)
	or	a, a
	sbc.sis	hl, bc
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, _eg_table
	ld	bc, (ix - 40)
	add	hl, bc
	ld	bc, (ix - 64)
	add	hl, bc
	ld	de, (hl)
	ld	bc, 180
	ld	iy, (ix - 43)
	add	iy, bc
	ld	hl, (iy)
	or	a, a
	sbc.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix - 70)
	ld	c, a
	call	__ishl
	push	hl
	pop	de
	ld	hl, _phase_weight
	add	hl, de
	ld	de, (hl)
	ld	hl, (ix + 6)
	push	hl
	pop	iy
	ld	bc, 184
	add	iy, bc
	ld	hl, (iy)
	or	a, a
	sbc.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	l, (ix - 22)
	push	hl
	ld	hl, (ix - 58)
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_plist_remove
	ld	iy, (ix + 6)
	pop	hl
	pop	hl
	pop	hl
	jp	BB5_30
BB5_21:
	ld	a, (ix - 1)
	or	a, a
	ld	a, 16
	jr	z, BB5_23
	ld	a, -16
BB5_23:
	add	a, (ix - 22)
	ld	e, a
	or	a, a
	sbc	hl, hl
	push	hl
	pop	bc
	ld	c, e
	ld	iy, (ix + 6)
	lea	hl, iy
	ld	(ix - 43), bc
	add	hl, bc
	ld	c, (hl)
	ld	a, c
	or	a, a
	jp	z, BB5_29
	ld	a, e
	srl	a
	and	a, 56
	ld	l, a
	ld	(ix - 67), e
	ld	a, e
	and	a, 7
	ld	e, a
	ld	a, l
	add	a, e
	ld	d, a
	ld	a, c
	and	a, 7
	ld	e, a
	ld	(ix - 64), c
	ld	a, c
	cp	a, 0
	call	pe, __setflag
	ld	l, 6
	jp	m, BB5_26
	ld	l, 0
BB5_26:
	dec	e
	ld	(ix - 83), e
	ld	a, e
	add	a, l
	ld	e, a
	ld	bc, 0
	ld	hl, (ix - 58)
	ld	c, l
	ld	(ix - 80), bc
	ld	a, d
	xor	a, 56
	ld	c, a
	ld	a, l
	or	a, a
	ld	a, d
	jr	z, BB5_28
	ld	a, c
BB5_28:
	ld	(ix - 86), a
	or	a, a
	sbc	hl, hl
	ld	l, e
	ld	(ix - 89), hl
	ld	c, 8
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _zobrist_piece
	add	iy, bc
	ld	b, 2
	ld	a, d
	call	__bshl
	ld	bc, 0
	ld	c, a
	add	iy, bc
	ld	hl, (iy)
	ld	e, (iy + 3)
	ld	bc, (ix - 77)
	ld	a, (ix - 74)
	call	__lxor
	ld	bc, (ix + 6)
	push	bc
	pop	iy
	ld	bc, 170
	add	iy, bc
	ld	(iy), hl
	lea	hl, iy + 3
	ld	(hl), e
	ld	a, 7
	ld	hl, (ix - 89)
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	ld	hl, _lock_piece
	add	hl, bc
	sla	d
	ld	bc, 0
	ld	c, d
	add	hl, bc
	ld	hl, (hl)
	ld	bc, (ix - 70)
	call	__sxor
	ld	iy, (ix - 40)
	ld	(iy), l
	ld	(iy + 1), h
	ld	iy, 0
	lea	hl, iy
	ld	l, (ix - 83)
	ld	(ix - 77), hl
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	ld	(ix - 40), bc
	ld	hl, _mg_table
	add	hl, bc
	ld	a, (ix - 86)
	add	a, a
	lea	bc, iy
	ld	c, a
	ld	(ix - 70), bc
	add	hl, bc
	ld	hl, (hl)
	ld	(ix - 74), hl
	ld	hl, (ix - 80)
	ld	a, 1
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	ld	iy, (ix + 6)
	add	iy, bc
	ld	(ix - 80), iy
	ld	bc, 176
	add	iy, bc
	lea	hl, iy
	ld	hl, (hl)
	ld	bc, (ix - 74)
	or	a, a
	sbc.sis	hl, bc
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, _eg_table
	ld	bc, (ix - 40)
	add	hl, bc
	ld	bc, (ix - 70)
	add	hl, bc
	ld	de, (hl)
	ld	bc, 180
	ld	iy, (ix - 80)
	add	iy, bc
	ld	hl, (iy)
	or	a, a
	sbc.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix - 77)
	ld	c, a
	call	__ishl
	push	hl
	pop	de
	ld	hl, _phase_weight
	add	hl, de
	ld	de, (hl)
	ld	hl, (ix + 6)
	push	hl
	pop	iy
	ld	bc, 184
	add	iy, bc
	ld	hl, (iy)
	or	a, a
	sbc.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	bc, (ix + 6)
	push	bc
	pop	hl
	ld	de, (ix - 43)
	add	hl, de
	ld	(hl), 0
	ld	l, (ix - 67)
	push	hl
	ld	hl, (ix - 58)
	push	hl
	push	bc
	call	_plist_remove
	ld	iy, (ix + 6)
	pop	hl
	pop	hl
	pop	hl
	ld	c, (ix - 64)
BB5_29:
	ld	hl, (ix + 12)
	ld	(hl), c
BB5_30:
	ld	hl, (ix - 55)
	ld	(hl), 0
	lea	hl, iy
	ld	de, (ix - 25)
	add	hl, de
	ld	a, (ix - 31)
	ld	(hl), a
	ld	l, (ix - 22)
	push	hl
	ld	a, (ix + 9)
	ld	l, a
	push	hl
	ld	l, (ix - 1)
	push	hl
	push	iy
	call	_plist_move
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	c, 8
	ld	hl, (ix - 19)
	call	__ishl
	push	hl
	pop	de
	ld	iy, _zobrist_piece
	add	iy, de
	ld	b, 2
	ld	a, (ix - 10)
	call	__bshl
	or	a, a
	sbc	hl, hl
	ex	de, hl
	ld	e, a
	add	iy, de
	ld	(ix - 43), iy
	ld	bc, (iy)
	ld	iy, (ix + 6)
	ld	de, 170
	add	iy, de
	ld	(ix - 40), iy
	ld	hl, (iy)
	lea	de, iy + 3
	ld	(ix - 31), de
	ld	iy, (ix - 31)
	ld	e, (iy)
	ld	iy, (ix - 43)
	ld	a, (iy + 3)
	call	__lxor
	ld	(ix - 64), hl
	ld	iy, (ix - 40)
	ld	(iy), hl
	ld	(ix - 67), e
	ld	hl, (ix - 31)
	ld	(hl), e
	ld	a, 7
	ld	hl, (ix - 19)
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	ld	hl, _lock_piece
	add	hl, bc
	ld	c, (ix - 10)
	sla	c
	ld	de, 0
	ld	e, c
	ld	(ix - 58), de
	add	hl, de
	ld	(ix - 70), hl
	ld	bc, (hl)
	ld	iy, (ix + 6)
	ld	de, 174
	add	iy, de
	ld	hl, (iy)
	call	__sxor
	ld	(ix - 19), iy
	ld	(ix - 74), hl
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix - 61)
	ld	c, a
	call	__ishl
	push	hl
	pop	de
	ld	(ix - 55), de
	ld	hl, _mg_table
	add	hl, de
	ld	a, (ix - 52)
	add	a, a
	ld	de, 0
	ld	e, a
	add	hl, de
	ld	hl, (hl)
	ld	(ix - 52), hl
	ld	iy, (ix - 28)
	ld	hl, (iy)
	ld	(ix - 61), hl
	ld	bc, (ix - 52)
	add.sis	hl, bc
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, _eg_table
	ld	bc, (ix - 55)
	add	hl, bc
	ld	(ix - 52), de
	add	hl, de
	ld	de, (hl)
	ld	iy, (ix - 7)
	ld	bc, (iy)
	ld	l, c
	ld	h, b
	add.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	a, (ix - 4)
	bit	3, a
	jp	z, BB5_43
	and	a, 48
	cp	a, 16
	ld	(ix - 55), bc
	jr	nz, BB5_33
	ld	hl, 4
	ld	iy, 0
	jr	BB5_38
BB5_33:
	cp	a, 32
	ld	iy, 0
	jr	nz, BB5_35
	ld	hl, 3
	jr	BB5_38
BB5_35:
	cp	a, 48
	jr	nz, BB5_37
	ld	hl, 2
	jr	BB5_38
BB5_37:
	ld	hl, 5
BB5_38:
	ld	a, (ix - 1)
	or	a, a
	lea	bc, iy
	jr	z, BB5_40
	ld	bc, 128
BB5_40:
	ld	de, 255
	ld	a, l
	add	a, c
	ld	(ix - 77), a
	cp	a, d
	call	pe, __setflag
	jp	p, BB5_42
	ld	iy, 6
BB5_42:
	add	hl, de
	push	hl
	pop	bc
	ld	(ix - 80), bc
	add	iy, bc
	ld	(ix - 86), iy
	ld	iy, (ix - 43)
	ld	hl, (iy)
	ld	e, (iy + 3)
	ld	bc, (ix - 64)
	ld	a, (ix - 67)
	call	__lxor
	ld	(ix - 43), hl
	ld	d, e
	ld	hl, (ix + 6)
	push	hl
	pop	iy
	ld	bc, 170
	add	iy, bc
	ld	(ix - 83), iy
	ld	hl, (ix - 43)
	ld	(iy), hl
	lea	hl, iy + 3
	ld	(ix - 67), hl
	ld	(hl), d
	ld	hl, (ix - 70)
	ld	hl, (hl)
	ld	bc, (ix - 74)
	call	__sxor
	ld	c, l
	ld	b, h
	ld	(ix - 64), bc
	ld	hl, (ix - 19)
	ld	(hl), c
	inc	hl
	ld	(hl), b
	ld	hl, (ix - 86)
	ld	bc, 255
	call	__iand
	ld	(ix - 70), hl
	ld	c, 8
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _zobrist_piece
	add	iy, bc
	ld	b, 2
	ld	a, (ix - 10)
	call	__bshl
	ld	bc, 0
	ld	c, a
	add	iy, bc
	ld	hl, (iy)
	ld	e, (iy + 3)
	ld	bc, (ix - 43)
	ld	a, d
	call	__lxor
	ld	iy, (ix - 83)
	ld	(iy), hl
	ld	hl, (ix - 67)
	ld	(hl), e
	ld	a, 7
	ld	hl, (ix - 70)
	ld	c, a
	call	__ishl
	push	hl
	pop	de
	ld	hl, _lock_piece
	add	hl, de
	ld	de, (ix - 58)
	add	hl, de
	ld	hl, (hl)
	ld	bc, (ix - 64)
	call	__sxor
	ld	iy, (ix - 19)
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix - 80)
	ld	bc, 255
	call	__iand
	ld	(ix - 10), hl
	ld	c, a
	call	__ishl
	push	hl
	pop	de
	ld	(ix - 43), de
	ld	hl, _mg_table
	add	hl, de
	ld	de, (ix - 52)
	add	hl, de
	ld	hl, (hl)
	ld	bc, (ix - 61)
	add.sis	hl, bc
	ld	iy, (ix - 28)
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, _eg_table
	ld	bc, (ix - 43)
	add	hl, bc
	add	hl, de
	ld	hl, (hl)
	ld	de, (ix - 55)
	add.sis	hl, de
	ld	iy, (ix - 7)
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix - 10)
	ld	c, 1
	call	__ishl
	push	hl
	pop	de
	ld	hl, _phase_weight
	add	hl, de
	ld	de, (hl)
	ld	iy, (ix + 6)
	ld	bc, 184
	add	iy, bc
	ld	hl, (iy)
	add.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix + 6)
	ld	de, (ix - 25)
	add	hl, de
	ld	a, (ix - 77)
	ld	(hl), a
	ld	a, (ix - 4)
BB5_43:
	bit	1, a
	ld	d, 16
	jp	z, BB5_60
	ld	a, (ix - 1)
	or	a, a
	jr	z, BB5_46
	ld	iyl, 0
	jr	BB5_47
BB5_46:
	ld	iyl, -1
BB5_47:
	ld	bc, (ix + 6)
	ld	a, (ix + 9)
	ld	l, (ix - 22)
	cp	a, l
	sbc	a, a
	ld	l, a
	bit	0, l
	jr	nz, BB5_49
	ld	a, -1
	jr	BB5_50
BB5_49:
	ld	a, 1
BB5_50:
	ld	e, (ix + 9)
	add	a, e
	ld	(ix - 43), a
	bit	0, l
	jr	nz, BB5_52
	ld	a, -4
	jr	BB5_53
BB5_52:
	ld	a, 3
BB5_53:
	ld	l, (ix + 9)
	add	a, l
	ld	de, 0
	ld	(ix - 52), a
	ld	e, a
	push	bc
	pop	hl
	add	hl, de
	ld	(ix - 67), hl
	ld	e, (hl)
	ld	a, e
	and	a, 7
	ld	l, a
	ld	(ix - 64), e
	ld	a, e
	cp	a, d
	call	pe, __setflag
	jp	m, BB5_55
	xor	a, a
	ld	(ix - 71), a
BB5_55:
	dec	l
	ld	a, l
	add	a, (ix - 71)
	ld	iyh, a
	ld	c, (ix - 52)
	ld	a, c
	srl	a
	and	a, 56
	ld	e, a
	ld	a, c
	and	a, 7
	ld	c, a
	ld	a, e
	add	a, c
	ld	h, a
	ld	c, (ix - 43)
	ld	a, c
	srl	a
	and	a, 56
	ld	e, a
	ld	a, c
	and	a, 7
	ld	c, a
	ld	a, e
	add	a, c
	ld	c, a
	ld	a, h
	xor	a, 56
	ld	b, iyl
	bit	0, b
	ex	de, hl
	ld	iyl, d
	ex	de, hl
	jr	nz, BB5_57
	ld	h, a
BB5_57:
	ld	(ix - 71), h
	ld	de, 0
	ld	e, (ix - 43)
	ld	(ix - 70), de
	ld	a, c
	xor	a, 56
	bit	0, b
	ld	(ix - 55), c
	jr	nz, BB5_59
	ld	c, a
BB5_59:
	ld	(ix - 74), c
	or	a, a
	sbc	hl, hl
	ex	de, hl
	ld	e, iyh
	ex	de, hl
	ld	(ix - 77), hl
	ld	c, 8
	call	__ishl
	push	hl
	pop	de
	ld	hl, _zobrist_piece
	add	hl, de
	ld	(ix - 83), hl
	ld	b, 2
	ld	a, iyl
	ld	(ix - 80), a
	call	__bshl
	ld	de, 0
	ld	e, a
	ld	(ix - 10), de
	add	hl, de
	ld	(ix - 86), hl
	ld	bc, (hl)
	ld	iy, (ix + 6)
	ld	de, 170
	add	iy, de
	ld	(ix - 58), iy
	ld	hl, (iy)
	lea	de, iy + 3
	ld	(ix - 61), de
	push	de
	pop	iy
	ld	e, (iy)
	ld	iy, (ix - 86)
	ld	a, (iy + 3)
	call	__lxor
	push	hl
	pop	bc
	ld	(ix - 86), bc
	ld	d, e
	ld	hl, (ix - 58)
	ld	(hl), bc
	ld	hl, (ix - 61)
	ld	(hl), d
	ld	b, 2
	ld	a, (ix - 55)
	call	__bshl
	ld	bc, (ix - 10)
	ld	c, a
	ld	(ix - 10), bc
	ld	iy, (ix - 83)
	add	iy, bc
	ld	hl, (iy)
	ld	e, (iy + 3)
	ld	bc, (ix - 86)
	ld	a, d
	call	__lxor
	ld	iy, (ix - 58)
	ld	(iy), hl
	ld	hl, (ix - 61)
	ld	(hl), e
	ld	c, 7
	ld	hl, (ix - 77)
	call	__ishl
	push	hl
	pop	de
	ld	iy, _lock_piece
	add	iy, de
	ld	a, (ix - 80)
	add	a, a
	ld	de, (ix - 10)
	ld	e, a
	ld	(ix - 10), de
	lea	hl, iy
	add	hl, de
	ld	bc, (hl)
	ld	hl, (ix + 6)
	ld	de, 174
	add	hl, de
	ld	(ix - 58), hl
	ld	de, (hl)
	ld	l, e
	ld	h, d
	call	__sxor
	ld	c, l
	ld	b, h
	ld	hl, (ix - 58)
	ld	(hl), c
	inc	hl
	ld	(hl), b
	ld	a, (ix - 55)
	add	a, a
	ld	de, (ix - 10)
	ld	e, a
	add	iy, de
	ld	hl, (iy)
	call	__sxor
	ld	iy, (ix - 58)
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, _mg_table+384
	ld	a, (ix - 71)
	add	a, a
	push	de
	pop	bc
	ld	c, a
	add	hl, bc
	ld	de, (hl)
	ld	hl, (ix - 28)
	ld	hl, (hl)
	or	a, a
	sbc.sis	hl, de
	ld	(ix - 10), hl
	ld	hl, _eg_table+384
	add	hl, bc
	ld	de, (hl)
	ld	hl, (ix - 7)
	ld	hl, (hl)
	or	a, a
	sbc.sis	hl, de
	ld	a, (ix - 74)
	add	a, a
	ld	c, a
	ld	iy, _mg_table+384
	add	iy, bc
	ld	de, (iy)
	ld	iy, (ix - 10)
	add.sis	iy, de
	ld	e, iyl
	ld	d, iyh
	ld	iy, (ix - 28)
	ld	(iy), e
	ld	(iy + 1), d
	ld	iy, _eg_table+384
	add	iy, bc
	ld	de, (iy)
	add.sis	hl, de
	ld	iy, (ix - 7)
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix - 67)
	ld	(hl), 0
	ld	bc, (ix + 6)
	push	bc
	pop	hl
	ld	de, (ix - 70)
	add	hl, de
	ld	a, (ix - 64)
	ld	(hl), a
	ld	l, (ix - 43)
	push	hl
	ld	l, (ix - 52)
	push	hl
	ld	l, (ix - 1)
	push	hl
	push	bc
	call	_plist_move
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	d, 16
BB5_60:
	ld	iy, _castling_mask
	ld	a, (ix - 16)
	cp	a, 6
	jr	nz, BB5_62
	ld	de, 162
	ld	hl, (ix + 6)
	ld	bc, (ix - 13)
	add	hl, bc
	add	hl, de
	ld	d, 16
	ld	a, (ix - 22)
	ld	(hl), a
BB5_62:
	ld	hl, (ix - 37)
	ld	e, (hl)
	lea	hl, iy
	ld	bc, (ix - 49)
	add	hl, bc
	ld	a, (hl)
	and	a, e
	ld	bc, (ix - 25)
	add	iy, bc
	and	a, (iy)
	ld	c, a
	ld	hl, (ix - 37)
	ld	(hl), c
	ld	a, e
	cp	a, c
	jp	z, BB5_64
	or	a, a
	sbc	hl, hl
	ld	(ix - 16), c
	ld	l, e
	ld	(ix - 13), hl
	ld	c, 2
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _zobrist_castle
	add	iy, bc
	ld	(ix - 22), iy
	ld	bc, (iy)
	ld	iy, (ix + 6)
	ld	de, 170
	add	iy, de
	ld	(ix - 7), iy
	ld	hl, (iy)
	lea	de, iy + 3
	ld	(ix - 10), de
	push	de
	pop	iy
	ld	e, (iy)
	ld	iy, (ix - 22)
	ld	a, (iy + 3)
	call	__lxor
	push	hl
	pop	bc
	ld	(ix - 22), bc
	ld	a, e
	ld	hl, (ix - 7)
	ld	(hl), bc
	ld	hl, (ix - 10)
	ld	(hl), a
	or	a, a
	sbc	hl, hl
	ld	l, (ix - 16)
	ld	(ix - 16), hl
	ld	c, 2
	call	__ishl
	push	hl
	pop	de
	ld	iy, _zobrist_castle
	add	iy, de
	ld	hl, (iy)
	ld	e, (iy + 3)
	ld	bc, (ix - 22)
	call	__lxor
	ld	iy, (ix - 7)
	ld	(iy), hl
	ld	hl, (ix - 10)
	ld	(hl), e
	ld	a, 1
	ld	hl, (ix - 13)
	ld	c, a
	call	__ishl
	push	hl
	pop	de
	ld	hl, _lock_castle
	add	hl, de
	ld	bc, (hl)
	ld	iy, (ix + 6)
	ld	de, 174
	add	iy, de
	ld	hl, (iy)
	call	__sxor
	ld	e, l
	ld	d, h
	ld	(iy), e
	ld	(iy + 1), d
	ld	hl, (ix - 16)
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	ld	hl, _lock_castle
	add	hl, bc
	ld	hl, (hl)
	ld	c, e
	ld	b, d
	ld	d, 16
	call	__sxor
	ld	(iy), l
	ld	(iy + 1), h
BB5_64:
	ld	a, (ix - 1)
	or	a, a
	ld	a, -16
	ld	c, -1
	jr	z, BB5_66
	ld	a, d
BB5_66:
	ld	hl, (ix - 34)
	ld	l, (hl)
	ld	e, (ix + 9)
	add	a, e
	bit	6, (ix - 4)
	ld	iy, (ix + 6)
	lea	de, iy
	jr	z, BB5_68
	ld	c, a
BB5_68:
	ld	iy, (ix - 34)
	ld	(iy), c
	ld	a, l
	cp	a, -1
	jp	z, BB5_70
	ld	a, l
	and	a, 7
	ld	(ix - 10), a
	ld	b, 2
	call	__bshl
	or	a, a
	sbc	hl, hl
	ld	(ix - 7), c
	push	hl
	pop	bc
	ld	c, a
	ld	hl, _zobrist_ep_file
	add	hl, bc
	ld	(ix - 13), hl
	ld	bc, (hl)
	ld	iy, (ix + 6)
	ld	de, 170
	add	iy, de
	ld	(ix - 16), iy
	ld	hl, (iy)
	lea	de, iy + 3
	ld	(ix - 4), de
	ld	iy, (ix - 4)
	ld	e, (iy)
	ld	iy, (ix - 13)
	ld	a, (iy + 3)
	call	__lxor
	ld	iy, (ix - 16)
	ld	(iy), hl
	ld	hl, (ix - 4)
	ld	(hl), e
	ld	a, (ix - 10)
	add	a, a
	ld	bc, 0
	ld	c, a
	ld	hl, _lock_ep_file
	add	hl, bc
	ld	bc, (hl)
	ld	iy, (ix + 6)
	ld	de, 174
	add	iy, de
	ld	hl, (iy)
	call	__sxor
	ld	c, (ix - 7)
	ld	(iy), l
	ld	(iy + 1), h
	ld	iy, (ix + 6)
	lea	de, iy
BB5_70:
	ld	a, c
	cp	a, -1
	jr	nz, BB5_72
	ld	hl, (ix - 40)
	ld	bc, (hl)
	ld	hl, (ix - 31)
	ld	a, (hl)
	ld	(ix - 4), a
	push	de
	pop	hl
	push	de
	pop	iy
	ld	de, 174
	add	hl, de
	ld	hl, (hl)
	jp	BB5_73
BB5_72:
	ld	a, c
	and	a, 7
	ld	(ix - 13), a
	ld	b, 2
	call	__bshl
	or	a, a
	sbc	hl, hl
	push	hl
	pop	bc
	ld	c, a
	ld	(ix - 7), bc
	ld	hl, _zobrist_ep_file
	add	hl, bc
	ld	(ix - 4), hl
	ld	bc, (hl)
	ld	iy, (ix + 6)
	ld	de, 170
	add	iy, de
	ld	hl, (iy)
	lea	iy, iy + 3
	ld	e, (iy)
	ld	iy, (ix - 4)
	ld	a, (iy + 3)
	ld	iy, (ix + 6)
	call	__lxor
	ld	(ix - 10), hl
	ld	(ix - 4), e
	ld	a, (ix - 13)
	add	a, a
	ld	bc, (ix - 7)
	ld	c, a
	ld	hl, _lock_ep_file
	add	hl, bc
	ld	bc, (hl)
	lea	hl, iy
	ld	de, 174
	add	hl, de
	ld	hl, (hl)
	call	__sxor
	ld	bc, (ix - 10)
BB5_73:
	ld	(ix - 7), hl
	ld	hl, (ix - 46)
	ld	a, (hl)
	xor	a, 1
	ld	(hl), a
	ld	hl, (_zobrist_side)
	ld	a, (_zobrist_side+3)
	ld	e, a
	ld	a, (ix - 4)
	call	__lxor
	ld	bc, 170
	add	iy, bc
	ld	(iy), hl
	lea	hl, iy + 3
	ld	(hl), e
	ld	hl, _lock_side
	ld	hl, (hl)
	ld	bc, (ix - 7)
	call	__sxor
	ld	iy, (ix - 19)
	ld	(iy), l
	ld	(iy + 1), h
	ld	a, (ix - 1)
	cp	a, 1
	jr	nz, BB5_75
	ld	de, 168
	ld	hl, (ix + 6)
	push	hl
	pop	iy
	add	iy, de
	ld	hl, (iy)
	inc.sis	hl
	ld	(iy), l
	ld	(iy + 1), h
BB5_75:
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_plist_remove
_plist_remove:
	ld	hl, -13
	call	__frameset
	ld	hl, (ix + 6)
	ld	a, (ix + 12)
	ld	de, 0
	ld	e, (ix + 9)
	ld	bc, 160
	add	hl, de
	add	hl, bc
	ld	(ix - 9), hl
	ld	l, (hl)
	ld	iy, 0
	ld	(ix - 10), l
	ex	de, hl
	ld	iyl, e
	ex	de, hl
	ld	c, 4
	ld	(ix - 6), de
	ex	de, hl
	call	__ishl
	push	hl
	pop	bc
	ld	hl, (ix + 6)
	add	hl, bc
	ld	de, 128
	add	hl, de
BB6_1:
	ld	(ix - 3), hl
	lea	hl, iy
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jr	z, BB6_4
	ld	bc, (ix - 3)
	push	bc
	pop	hl
	inc	hl
	dec	iy
	ld	(ix - 13), iy
	ld	e, a
	push	bc
	pop	iy
	ld	a, (iy)
	ld	iy, (ix - 13)
	cp	a, e
	ld	a, e
	jr	nz, BB6_1
	ld	a, (ix - 10)
	dec	a
	ld	hl, (ix - 9)
	ld	(hl), a
	ld	de, 0
	ld	e, a
	ld	c, 4
	ld	hl, (ix - 6)
	call	__ishl
	push	hl
	pop	bc
	ld	hl, (ix + 6)
	add	hl, bc
	add	hl, de
	ld	de, 128
	add	hl, de
	ld	a, (hl)
	ld	hl, (ix - 3)
	ld	(hl), a
BB6_4:
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_plist_move
_plist_move:
	call	__frameset0
	ld	iy, (ix + 6)
	ld	bc, 0
	ld	c, (ix + 9)
	ld	de, 160
	lea	hl, iy
	add	hl, bc
	add	hl, de
	ld	de, 0
	ld	e, (hl)
	ld	a, 4
	push	bc
	pop	hl
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	add	iy, bc
	ld	bc, 128
	add	iy, bc
BB7_1:
	push	de
	pop	hl
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jr	z, BB7_4
	lea	hl, iy
	inc	iy
	dec	de
	push	hl
	pop	bc
	ld	a, (hl)
	ld	l, (ix + 12)
	cp	a, l
	jr	nz, BB7_1
	ld	a, (ix + 15)
	push	bc
	pop	hl
	ld	(hl), a
BB7_4:
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_board_unmake
_board_unmake:
	ld	hl, -52
	call	__frameset
	ld	hl, (ix + 6)
	ld	iy, (ix + 12)
	ld	d, (ix + 10)
	ld	a, (iy + 13)
	ld	(ix - 10), a
	ld	e, (iy + 12)
	ld	bc, 164
	add	hl, bc
	ld	c, d
	ld	a, (hl)
	ld	(ix - 38), a
	xor	a, 1
	ld	d, a
	ld	(hl), d
	ld	(ix - 7), e
	ld	a, e
	and	a, 7
	ld	(ix - 19), a
	dec	a
	ld	(ix - 28), a
	ld	e, (ix + 9)
	ld	a, e
	srl	a
	and	a, 56
	ld	l, a
	ld	a, e
	and	a, 7
	ld	e, a
	ld	a, l
	add	a, e
	ld	b, a
	ld	a, c
	srl	a
	and	a, 56
	ld	l, a
	ld	a, c
	and	a, 7
	ld	e, a
	ld	a, l
	add	a, e
	ld	h, a
	ld	(ix - 3), d
	ld	a, d
	or	a, a
	jr	z, BB8_2
	ld	l, 0
	jr	BB8_3
BB8_2:
	ld	l, -1
BB8_3:
	ld	a, b
	xor	a, 56
	bit	0, l
	ld	iy, 0
	jr	nz, BB8_5
	ld	b, a
BB8_5:
	ld	(ix - 22), b
	ld	a, h
	xor	a, 56
	bit	0, l
	ld	(ix - 39), h
	ld	b, h
	jr	nz, BB8_7
	ld	b, a
BB8_7:
	ld	(ix - 40), a
	ld	de, _mg_table
	lea	hl, iy
	ld	a, (ix + 9)
	ld	l, a
	ld	(ix - 25), hl
	lea	hl, iy
	ld	l, c
	ld	(ix - 16), hl
	lea	hl, iy
	ld	l, (ix - 3)
	ld	(ix - 13), hl
	ld	a, (ix - 10)
	bit	3, a
	ld	(ix - 4), c
	jr	nz, BB8_9
	push	de
	pop	iy
	ld	de, 0
	push	de
	pop	hl
	ld	l, (ix - 28)
	ld	c, 7
	ld	(ix - 28), hl
	call	__ishl
	ld	a, b
	push	hl
	pop	bc
	add	iy, bc
	add	a, a
	ld	e, a
	add	iy, de
	ld	hl, (iy)
	ld	(ix - 31), hl
	ld	hl, _eg_table
	add	hl, bc
	add	hl, de
	ld	hl, (hl)
	ld	(ix - 34), hl
	ld	a, (ix - 7)
	ld	iy, (ix + 6)
	jp	BB8_17
BB8_9:
	and	a, 48
	cp	a, 16
	jr	nz, BB8_11
	ld	hl, 3
	jr	BB8_16
BB8_11:
	cp	a, 32
	jr	nz, BB8_13
	ld	hl, 2
	jr	BB8_16
BB8_13:
	cp	a, 48
	jr	nz, BB8_15
	ld	hl, 1
	jr	BB8_16
BB8_15:
	ld	hl, 4
BB8_16:
	ld	a, 7
	ld	(ix - 43), hl
	ld	c, a
	call	__ishl
	push	hl
	pop	de
	ld	(ix - 31), de
	ld	hl, _mg_table
	add	hl, de
	ld	c, 1
	sla	b
	lea	de, iy
	ld	e, b
	ld	(ix - 34), de
	add	hl, de
	ld	hl, (hl)
	ld	(ix - 49), hl
	ld	hl, (ix - 13)
	call	__ishl
	push	hl
	pop	bc
	ld	iy, (ix + 6)
	add	iy, bc
	ld	(ix - 37), iy
	lea	de, iy
	ld	hl, 176
	push	hl
	pop	bc
	ex	de, hl
	add	hl, bc
	ld	(ix - 46), hl
	ld	hl, (hl)
	ld	de, (ix - 49)
	or	a, a
	sbc.sis	hl, de
	ld	(ix - 52), hl
	ld	hl, _eg_table
	ld	de, (ix - 31)
	add	hl, de
	ld	de, (ix - 34)
	add	hl, de
	ld	iy, (hl)
	ld	hl, (ix - 37)
	ld	bc, 180
	add	hl, bc
	ld	(ix - 37), hl
	ld	hl, (hl)
	lea	bc, iy
	or	a, a
	sbc.sis	hl, bc
	ld	(ix - 49), hl
	or	a, a
	sbc	hl, hl
	ld	l, (ix - 28)
	ld	(ix - 28), hl
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	ld	hl, _mg_table
	add	hl, bc
	add	hl, de
	ld	de, (hl)
	ld	(ix - 31), de
	ld	iy, (ix - 52)
	add.sis	iy, de
	ld	hl, (ix - 46)
	push	de
	ld	e, iyl
	ld	d, iyh
	ld	(hl), e
	inc	hl
	ld	(hl), d
	pop	de
	ld	hl, _eg_table
	add	hl, bc
	ld	de, (ix - 34)
	add	hl, de
	ld	de, (hl)
	ld	(ix - 34), de
	ld	iy, (ix - 49)
	add.sis	iy, de
	ld	hl, (ix - 37)
	push	de
	ld	e, iyl
	ld	d, iyh
	ld	(hl), e
	inc	hl
	ld	(hl), d
	pop	de
	ld	hl, (ix - 43)
	ld	c, 1
	call	__ishl
	push	hl
	pop	de
	ld	hl, _phase_weight
	add	hl, de
	ld	de, (hl)
	ld	iy, (ix + 6)
	ld	bc, 184
	add	iy, bc
	ld	hl, (iy)
	or	a, a
	sbc.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	iy, (ix + 6)
	lea	hl, iy
	ld	de, (ix - 16)
	add	hl, de
	ld	a, (ix - 7)
	ld	(hl), a
BB8_17:
	ld	c, 1
	ld	hl, (ix - 13)
	call	__ishl
	push	hl
	pop	de
	add	iy, de
	lea	hl, iy
	ld	de, 176
	add	hl, de
	ld	(ix - 7), hl
	ld	hl, (ix - 7)
	ld	hl, (hl)
	ld	de, (ix - 31)
	or	a, a
	sbc.sis	hl, de
	ld	(ix - 31), hl
	ld	de, 180
	add	iy, de
	ld	hl, (iy)
	ld	de, (ix - 34)
	or	a, a
	sbc.sis	hl, de
	ld	(ix - 34), hl
	ld	c, 7
	ld	hl, (ix - 28)
	call	__ishl
	push	hl
	pop	de
	ld	(ix - 28), de
	ld	hl, _mg_table
	add	hl, de
	ld	e, (ix - 22)
	sla	e
	ld	bc, 0
	ld	c, e
	add	hl, bc
	ld	de, (hl)
	ld	hl, (ix - 31)
	add.sis	hl, de
	ld	e, l
	ld	d, h
	ld	hl, (ix - 7)
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	hl, _eg_table
	ld	de, (ix - 28)
	add	hl, de
	add	hl, bc
	ld	de, (hl)
	ld	hl, (ix - 34)
	add.sis	hl, de
	ld	(ix - 22), iy
	ld	(iy), l
	ld	(iy + 1), h
	ld	bc, (ix + 6)
	push	bc
	pop	hl
	ld	de, (ix - 25)
	add	hl, de
	ld	(hl), a
	push	bc
	pop	hl
	ld	de, (ix - 16)
	add	hl, de
	ld	(hl), 0
	ld	a, (ix + 9)
	ld	l, a
	push	hl
	ld	l, (ix - 4)
	push	hl
	ld	l, (ix - 3)
	push	hl
	push	bc
	call	_plist_move
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix - 19)
	cp	a, 6
	jr	nz, BB8_19
	ld	de, 162
	ld	hl, (ix + 6)
	ld	bc, (ix - 13)
	add	hl, bc
	add	hl, de
	ld	a, (ix + 9)
	ld	(hl), a
BB8_19:
	ld	a, (ix - 10)
	bit	1, a
	jp	z, BB8_34
	ld	a, (ix - 3)
	or	a, a
	ld	l, (ix - 4)
	jr	z, BB8_22
	ld	b, 0
	jr	BB8_23
BB8_22:
	ld	b, -1
BB8_23:
	ld	a, (ix + 9)
	cp	a, l
	sbc	a, a
	ld	l, a
	bit	0, l
	jr	nz, BB8_25
	ld	a, -1
	jr	BB8_26
BB8_25:
	ld	a, 1
BB8_26:
	ld	e, (ix + 9)
	add	a, e
	ld	iyl, a
	bit	0, l
	jr	nz, BB8_28
	ld	a, -4
	jr	BB8_29
BB8_28:
	ld	a, 3
BB8_29:
	ld	l, (ix + 9)
	add	a, l
	ld	c, a
	srl	a
	and	a, 56
	ld	l, a
	ld	(ix - 13), c
	ld	a, c
	and	a, 7
	ld	h, a
	ld	a, l
	add	a, h
	ld	e, a
	ld	a, iyl
	srl	a
	and	a, 56
	ld	l, a
	ld	a, iyl
	and	a, 7
	ld	h, a
	ld	a, l
	add	a, h
	ld	l, a
	ld	a, e
	xor	a, 56
	ld	h, b
	bit	0, h
	jr	nz, BB8_31
	ld	e, a
BB8_31:
	ld	(ix - 28), e
	ld	bc, 0
	push	bc
	pop	de
	ld	e, (ix - 13)
	ld	(ix - 25), de
	push	af
	ld	a, iyl
	ld	(ix - 19), a
	pop	af
	ld	c, iyl
	ld	(ix - 31), bc
	ld	a, l
	xor	a, 56
	bit	0, h
	jr	nz, BB8_33
	ld	l, a
BB8_33:
	ld	iy, _mg_table+384
	sla	l
	ld	bc, 0
	ld	c, l
	lea	hl, iy
	add	hl, bc
	ld	de, (hl)
	ld	hl, (ix - 7)
	ld	hl, (hl)
	or	a, a
	sbc.sis	hl, de
	ld	(ix - 34), hl
	ld	hl, _eg_table+384
	add	hl, bc
	ld	bc, (hl)
	ld	hl, (ix - 22)
	ld	hl, (hl)
	or	a, a
	sbc.sis	hl, bc
	ld	a, (ix - 28)
	add	a, a
	ld	bc, 0
	ld	c, a
	add	iy, bc
	ld	de, (iy)
	ld	iy, (ix - 34)
	add.sis	iy, de
	ld	e, iyl
	ld	d, iyh
	ld	iy, (ix - 7)
	ld	(iy), e
	ld	(iy + 1), d
	ld	iy, _eg_table+384
	add	iy, bc
	ld	de, (iy)
	add.sis	hl, de
	ld	iy, (ix - 22)
	ld	(iy), l
	ld	(iy + 1), h
	ld	de, (ix + 6)
	push	de
	pop	iy
	ld	bc, (ix - 31)
	add	iy, bc
	ld	a, (iy)
	push	de
	pop	hl
	ld	bc, (ix - 25)
	add	hl, bc
	ld	(hl), a
	ld	(iy), 0
	ld	l, (ix - 13)
	push	hl
	ld	l, (ix - 19)
	push	hl
	ld	l, (ix - 3)
	push	hl
	push	de
	call	_plist_move
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix - 10)
BB8_34:
	bit	2, a
	ld	l, (ix - 4)
	jp	nz, BB8_39
	ld	hl, (ix + 12)
	ld	l, (hl)
	ld	a, l
	or	a, a
	ld	de, (ix + 6)
	jp	z, BB8_49
	ld	(ix - 3), l
	ld	a, l
	and	a, 7
	dec	a
	ld	(ix - 10), a
	ld	bc, 0
	push	bc
	pop	iy
	ld	a, (ix - 38)
	ld	iyl, a
	or	a, a
	ld	a, (ix - 39)
	jr	z, BB8_38
	ld	a, (ix - 40)
BB8_38:
	or	a, a
	sbc	hl, hl
	ld	l, (ix - 10)
	ld	(ix - 10), hl
	ld	c, 7
	call	__ishl
	push	hl
	pop	bc
	ld	(ix - 13), bc
	ld	hl, _mg_table
	add	hl, bc
	add	a, a
	ld	bc, 0
	ld	c, a
	ld	(ix - 19), bc
	add	hl, bc
	ld	hl, (hl)
	ld	(ix - 22), hl
	lea	hl, iy
	ld	(ix - 7), hl
	ld	a, 1
	ld	c, a
	call	__ishl
	push	hl
	pop	bc
	ex	de, hl
	add	hl, bc
	ld	(ix - 25), hl
	ld	de, 176
	add	hl, de
	ld	iy, (hl)
	ld	de, (ix - 22)
	add.sis	iy, de
	push	de
	ld	e, iyl
	ld	d, iyh
	ld	(hl), e
	inc	hl
	ld	(hl), d
	pop	de
	ld	hl, _eg_table
	ld	de, (ix - 13)
	add	hl, de
	ld	de, (ix - 19)
	add	hl, de
	ld	de, (hl)
	ld	bc, 180
	ld	iy, (ix - 25)
	add	iy, bc
	ld	hl, (iy)
	add.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix - 10)
	ld	c, a
	call	__ishl
	push	hl
	pop	de
	ld	hl, _phase_weight
	add	hl, de
	ld	de, (hl)
	ld	iy, (ix + 6)
	ld	bc, 184
	add	iy, bc
	ld	hl, (iy)
	add.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix + 6)
	ld	de, (ix - 16)
	add	hl, de
	ld	a, (ix - 3)
	ld	(hl), a
	ld	hl, (ix - 7)
	ld	(ix - 3), hl
	ld	a, (ix - 4)
	jp	BB8_48
BB8_39:
	ld	a, (ix - 3)
	or	a, a
	ld	iy, (ix + 6)
	jr	z, BB8_41
	ld	a, -16
	jr	BB8_42
BB8_41:
	ld	a, 16
BB8_42:
	add	a, l
	ld	c, a
	ld	hl, (ix + 12)
	ld	b, (hl)
	ld	a, b
	or	a, a
	jr	nz, BB8_44
	or	a, a
	sbc	hl, hl
	ld	l, (ix - 38)
	ld	(ix - 3), hl
	jp	BB8_47
BB8_44:
	ld	(ix - 10), b
	ld	a, b
	and	a, 7
	ld	iyl, a
	dec	iyl
	ld	a, c
	srl	a
	and	a, 56
	ld	e, a
	ld	(ix - 4), c
	ld	a, c
	and	a, 7
	ld	c, a
	ld	a, e
	add	a, c
	ld	l, a
	ld	de, 0
	ld	h, (ix - 38)
	ld	e, h
	ld	(ix - 3), de
	xor	a, 56
	ld	c, a
	ld	a, h
	or	a, a
	jr	z, BB8_46
	ld	l, c
BB8_46:
	ld	de, 0
	ld	a, l
	push	de
	pop	hl
	ex	de, hl
	ld	e, iyl
	ex	de, hl
	ld	(ix - 13), hl
	ld	c, 7
	call	__ishl
	ld	(ix - 7), hl
	ld	hl, _mg_table
	ld	bc, (ix - 7)
	add	hl, bc
	ld	c, 1
	add	a, a
	ld	e, a
	ld	(ix - 16), de
	add	hl, de
	ld	de, (hl)
	ld	hl, (ix - 3)
	ld	a, c
	call	__ishl
	push	hl
	pop	bc
	ld	hl, (ix + 6)
	add	hl, bc
	ld	(ix - 19), hl
	ld	bc, 176
	add	hl, bc
	ld	iy, (hl)
	add.sis	iy, de
	push	de
	ld	e, iyl
	ld	d, iyh
	ld	(hl), e
	inc	hl
	ld	(hl), d
	pop	de
	ld	hl, _eg_table
	ld	bc, (ix - 7)
	add	hl, bc
	ld	de, (ix - 16)
	add	hl, de
	ld	de, (hl)
	ld	bc, 180
	ld	iy, (ix - 19)
	add	iy, bc
	ld	hl, (iy)
	add.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix - 13)
	ld	c, a
	call	__ishl
	push	hl
	pop	de
	ld	hl, _phase_weight
	add	hl, de
	ld	de, (hl)
	ld	iy, (ix + 6)
	ld	bc, 184
	add	iy, bc
	ld	hl, (iy)
	add.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	iy, (ix + 6)
	ld	c, (ix - 4)
	ld	b, (ix - 10)
BB8_47:
	or	a, a
	sbc	hl, hl
	ex	de, hl
	ld	e, c
	lea	hl, iy
	add	hl, de
	ld	(hl), b
	ld	a, c
BB8_48:
	ld	de, 160
	ld	iy, (ix + 6)
	ld	bc, (ix - 3)
	add	iy, bc
	add	iy, de
	ld	de, 0
	ld	e, (iy)
	push	bc
	pop	hl
	ld	c, 4
	call	__ishl
	push	hl
	pop	bc
	ld	hl, (ix + 6)
	add	hl, bc
	add	hl, de
	ld	de, 128
	add	hl, de
	ld	(hl), a
	inc	(iy)
	ld	de, (ix + 6)
BB8_49:
	ld	hl, (ix + 12)
	push	hl
	pop	iy
	ld	a, (iy + 1)
	ld	bc, 165
	push	de
	pop	hl
	add	hl, bc
	ld	(hl), a
	ld	a, (iy + 2)
	inc	bc
	push	de
	pop	hl
	add	hl, bc
	ld	(hl), a
	ld	a, (iy + 3)
	inc	bc
	push	de
	pop	hl
	add	hl, bc
	ld	(hl), a
	ld	hl, (iy + 4)
	ld	(ix - 3), hl
	push	de
	pop	hl
	inc	bc
	add	hl, bc
	ld	bc, (ix - 3)
	ld	(hl), c
	inc	hl
	ld	(hl), b
	ld	hl, (iy + 6)
	ld	a, (iy + 9)
	push	de
	pop	bc
	push	bc
	pop	iy
	ld	de, 170
	add	iy, de
	ld	(iy), hl
	lea	hl, iy + 3
	ld	(hl), a
	ld	iy, (ix + 12)
	ld	iy, (iy + 10)
	ld	de, 174
	push	bc
	pop	hl
	add	hl, de
	push	de
	ld	e, iyl
	ld	d, iyh
	ld	(hl), e
	inc	hl
	ld	(hl), d
	pop	de
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_init
_engine_init:
	call	__frameset0
	ld	iy, (ix + 6)
	lea	hl, iy
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jr	nz, BB9_2
	ld	hl, 0
	ld	(_engine_hooks), hl
	jr	BB9_3
BB9_2:
	ld	hl, _engine_hooks
	ld	a, (iy)
	ld	(hl), a
	ld	a, (iy + 1)
	ld	(_engine_hooks+1), a
	ld	a, (iy + 2)
	ld	(_engine_hooks+2), a
BB9_3:
	call	_search_init
	ld	hl, _engine_board
	ld	(ix + 6), hl
	pop	ix
	jp	_board_init
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_new_game
_engine_new_game:
	call	_search_init
	ld	hl, _engine_board
	push	hl
	call	_board_startpos
	pop	hl
	ld	hl, (_engine_board+170)
	ld	a, (_engine_board+173)
	ld	e, a
	push	de
	push	hl
	call	_search_history_push
	pop	hl
	pop	hl
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_set_position
_engine_set_position:
	call	__frameset0
	ld	iy, (ix + 6)
	ld	a, (iy + 64)
	ld	e, (iy + 65)
	ld	c, (iy + 66)
	ld	d, (iy + 67)
	ld	b, (iy + 68)
	ld	hl, (iy + 69)
	push	hl
	ld	l, b
	push	hl
	ld	l, d
	push	hl
	ld	l, c
	push	hl
	ld	l, e
	push	hl
	ld	l, a
	push	hl
	push	iy
	ld	hl, _engine_board
	push	hl
	call	_board_set_from_ui
	ld	hl, 24
	add	hl, sp
	ld	sp, hl
	ld.sis	hl, 0
	ld	e, l
	ld	d, h
	ld	hl, _pos_history_count
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	hl, _pos_history_irreversible
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	hl, (_engine_board+170)
	ld	a, (_engine_board+173)
	ld	e, a
	push	de
	push	hl
	call	_search_history_push
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_get_position
_engine_get_position:
	ld	hl, -9
	call	__frameset
	ld	iy, (ix + 6)
	ld	hl, _engine_board
	ld	(ix - 3), hl
	ld	de, 0
	ld	bc, 8
	ld	(ix - 6), iy
BB12_1:
	push	de
	pop	hl
	or	a, a
	sbc	hl, bc
	jr	z, BB12_10
	ld	(ix - 9), de
	ld	bc, 0
BB12_3:
	push	bc
	pop	hl
	ld	de, 8
	or	a, a
	sbc	hl, de
	jr	z, BB12_9
	ld	iy, (ix - 3)
	add	iy, bc
	ld	l, (iy)
	ld	a, l
	and	a, 7
	ld	h, a
	neg
	ld	iyl, a
	ld	a, l
	cp	a, 0
	call	pe, __setflag
	jp	m, BB12_6
	ex	de, hl
	ld	iyl, d
	ex	de, hl
BB12_6:
	ld	a, l
	or	a, a
	ld	a, 0
	jr	z, BB12_8
	ld	a, iyl
BB12_8:
	ld	iy, (ix - 6)
	add	iy, bc
	ld	(iy), a
	inc	bc
	jr	BB12_3
BB12_9:
	ld	de, (ix - 9)
	inc	de
	ld	iy, (ix - 3)
	lea	iy, iy + 16
	ld	(ix - 3), iy
	ld	iy, (ix - 6)
	lea	iy, iy + 8
	ld	(ix - 6), iy
	ld	bc, 8
	jr	BB12_1
BB12_10:
	ld	a, (_engine_board+164)
	or	a, a
	ld	h, -1
	ld	a, 1
	jr	z, BB12_12
	ld	a, h
BB12_12:
	ld	iy, (ix + 6)
	ld	(iy + 64), a
	ld	a, (_engine_board+165)
	ld	(iy + 65), a
	ld	a, (_engine_board+166)
	ld	l, a
	cp	a, -1
	jr	z, BB12_14
	ld	c, 0
	jr	BB12_15
BB12_14:
	ld	c, -1
BB12_15:
	ld	a, l
	ld	b, 4
	call	__bshru
	ld	e, a
	ld	a, l
	and	a, 7
	bit	0, c
	ld	l, h
	jr	nz, BB12_17
	ld	l, e
BB12_17:
	bit	0, c
	jr	nz, BB12_19
	ld	h, a
BB12_19:
	ld	iy, (ix + 6)
	ld	(iy + 66), l
	ld	(iy + 67), h
	ld	a, (_engine_board+167)
	ld	(iy + 68), a
	ld	hl, _engine_board+168
	ld	hl, (hl)
	ld	(iy + 69), l
	ld	(iy + 70), h
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_get_moves_from
_engine_get_moves_from:
	ld	hl, -805
	call	__frameset
	ld	de, -788
	lea	iy, ix
	add	iy, de
	ld	c, (ix + 9)
	ld	b, 4
	xor	a, a
	dec	de
	lea	hl, ix
	add	hl, de
	ld	(hl), a
	lea	hl, iy + 14
	lea	de, iy
	ld	(ix - 3), bc
	ld	bc, -792
	lea	iy, ix
	add	iy, bc
	ld	(iy), de
	ld	a, (ix + 6)
	ld	bc, (ix - 3)
	call	__bshl
	add	a, c
	ld	c, a
	push	ix
	ld	de, -795
	add	ix, de
	ld	(ix), hl
	pop	ix
	push	hl
	push	bc
	ld	hl, _engine_board
	push	hl
	call	_generate_moves_from
	ld	iy, 0
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	sbc	hl, hl
	ld	l, a
	ld	bc, 3
	call	__imulu
	push	hl
	pop	bc
BB13_1:
	push	bc
	pop	hl
	lea	de, iy
	or	a, a
	sbc	hl, de
	jp	z, BB13_6
	ld	de, -789
	lea	hl, ix
	add	hl, de
	ld	a, (hl)
	ld	l, (ix + 15)
	cp	a, l
	jp	nc, BB13_6
	ld	de, -801
	lea	hl, ix
	add	hl, de
	ld	(hl), bc
	lea	de, iy
	lea	bc, iy
	ld	(ix - 3), bc
	ld	bc, -795
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	add	iy, de
	push	hl
	push	hl
	ld	bc, (ix - 3)
	push	ix
	ld	de, -798
	add	ix, de
	ld	(ix), bc
	pop	ix
	ex	de, hl
	ld	hl, 0
	add	hl, sp
	ex	de, hl
	ld	a, (iy)
	push	de
	pop	hl
	ld	(hl), a
	ld	a, (iy + 1)
	lea	hl, iy
	push	de
	pop	iy
	ld	(iy + 1), a
	push	hl
	pop	iy
	ld	bc, -804
	lea	hl, ix
	add	hl, bc
	ld	(hl), iy
	ld	a, (iy + 2)
	push	de
	pop	iy
	ld	(iy + 2), a
	push	ix
	ld	bc, -792
	add	ix, bc
	ld	hl, (ix)
	pop	ix
	ld	(iy + 3), hl
	ld	hl, _engine_board
	push	hl
	call	_board_make
	pop	hl
	pop	hl
	pop	hl
	call	_board_is_legal
	or	a, a
	jp	z, BB13_5
	or	a, a
	sbc	hl, hl
	ld	de, -789
	lea	iy, ix
	add	iy, de
	ld	a, (iy)
	ld	l, a
	inc	a
	push	ix
	add	ix, de
	ld	(ix), a
	pop	ix
	ld	bc, 5
	call	__imulu
	push	hl
	pop	de
	ld	hl, (ix + 12)
	add	hl, de
	ld	(ix - 3), bc
	push	ix
	ld	bc, -798
	add	ix, bc
	ld	de, (ix)
	pop	ix
	push	ix
	ld	bc, -795
	add	ix, bc
	ld	iy, (ix)
	pop	ix
	add	iy, de
	ld	e, (iy)
	ld	bc, (ix - 3)
	ld	c, (iy + 1)
	ld	a, (iy + 2)
	ld	(ix - 3), bc
	ld	bc, -805
	lea	iy, ix
	add	iy, bc
	ld	(iy), a
	ld	a, e
	ld	bc, (ix - 3)
	ld	b, 4
	call	__bshru
	ld	d, a
	ld	a, e
	and	a, 7
	ld	e, a
	ld	a, c
	call	__bshru
	ld	b, a
	ld	a, c
	and	a, 7
	push	hl
	pop	iy
	ld	(iy), d
	ld	(iy + 1), e
	ld	(iy + 2), b
	ld	(iy + 3), a
	ld	bc, -805
	lea	hl, ix
	add	hl, bc
	ld	a, (hl)
	ld	(iy + 4), a
BB13_5:
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	bc, -804
	lea	hl, ix
	add	hl, bc
	ld	de, (hl)
	push	de
	pop	hl
	ld	a, (hl)
	ld	(iy), a
	lea	hl, iy
	push	de
	pop	iy
	ld	a, (iy + 1)
	push	hl
	pop	iy
	ld	(iy + 1), a
	push	de
	pop	iy
	ld	a, (iy + 2)
	push	hl
	pop	iy
	ld	(iy + 2), a
	ld	bc, -792
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	ld	(iy + 3), hl
	ld	hl, _engine_board
	push	hl
	call	_board_unmake
	pop	hl
	pop	hl
	pop	hl
	ld	de, 3
	ld	bc, -798
	lea	hl, ix
	add	hl, bc
	ld	iy, (hl)
	add	iy, de
	push	ix
	ld	de, -801
	add	ix, de
	ld	bc, (ix)
	pop	ix
	jp	BB13_1
BB13_6:
	ld	bc, -789
	lea	hl, ix
	add	hl, bc
	ld	a, (hl)
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_board_is_legal
_board_is_legal:
	ld	iy, _engine_board
	ld	a, (_engine_board+164)
	ld	e, a
	xor	a, 1
	ld	bc, 0
	ld	c, a
	ld	hl, _engine_board+162
	add	hl, bc
	ld	a, (hl)
	push	de
	ld	l, a
	push	hl
	push	iy
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jr	z, BB14_2
	ld	a, 0
	ret
BB14_2:
	ld	a, 1
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_get_all_moves
_engine_get_all_moves:
	ld	hl, -805
	call	__frameset
	ld	bc, -788
	lea	iy, ix
	add	iy, bc
	ld	hl, _engine_board
	xor	a, a
	push	ix
	dec	bc
	add	ix, bc
	ld	(ix), a
	pop	ix
	lea	de, iy + 14
	lea	bc, iy
	ld	(ix - 3), de
	ld	de, -792
	lea	iy, ix
	add	iy, de
	ld	(iy), bc
	ld	bc, 0
	push	bc
	ld	de, (ix - 3)
	push	ix
	ld	bc, -795
	add	ix, bc
	ld	(ix), de
	pop	ix
	push	de
	push	hl
	call	_generate_moves
	ld	iy, 0
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	sbc	hl, hl
	ld	l, a
	ld	bc, 3
	call	__imulu
	push	hl
	pop	bc
BB15_1:
	push	bc
	pop	hl
	lea	de, iy
	or	a, a
	sbc	hl, de
	jp	z, BB15_6
	ld	de, -789
	lea	hl, ix
	add	hl, de
	ld	a, (hl)
	ld	l, (ix + 9)
	cp	a, l
	jp	nc, BB15_6
	ld	de, -801
	lea	hl, ix
	add	hl, de
	ld	(hl), bc
	lea	de, iy
	lea	bc, iy
	ld	(ix - 3), bc
	ld	bc, -795
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	add	iy, de
	push	hl
	push	hl
	ld	bc, (ix - 3)
	push	ix
	ld	de, -798
	add	ix, de
	ld	(ix), bc
	pop	ix
	ex	de, hl
	ld	hl, 0
	add	hl, sp
	ex	de, hl
	ld	a, (iy)
	push	de
	pop	hl
	ld	(hl), a
	ld	a, (iy + 1)
	lea	hl, iy
	push	de
	pop	iy
	ld	(iy + 1), a
	push	hl
	pop	iy
	ld	bc, -804
	lea	hl, ix
	add	hl, bc
	ld	(hl), iy
	ld	a, (iy + 2)
	push	de
	pop	iy
	ld	(iy + 2), a
	push	ix
	ld	bc, -792
	add	ix, bc
	ld	hl, (ix)
	pop	ix
	ld	(iy + 3), hl
	ld	hl, _engine_board
	push	hl
	call	_board_make
	pop	hl
	pop	hl
	pop	hl
	call	_board_is_legal
	or	a, a
	jp	z, BB15_5
	or	a, a
	sbc	hl, hl
	ld	de, -789
	lea	iy, ix
	add	iy, de
	ld	a, (iy)
	ld	l, a
	inc	a
	push	ix
	add	ix, de
	ld	(ix), a
	pop	ix
	ld	bc, 5
	call	__imulu
	push	hl
	pop	de
	ld	hl, (ix + 6)
	add	hl, de
	ld	(ix - 3), bc
	push	ix
	ld	bc, -798
	add	ix, bc
	ld	de, (ix)
	pop	ix
	push	ix
	ld	bc, -795
	add	ix, bc
	ld	iy, (ix)
	pop	ix
	add	iy, de
	ld	e, (iy)
	ld	bc, (ix - 3)
	ld	c, (iy + 1)
	ld	a, (iy + 2)
	ld	(ix - 3), bc
	ld	bc, -805
	lea	iy, ix
	add	iy, bc
	ld	(iy), a
	ld	a, e
	ld	bc, (ix - 3)
	ld	b, 4
	call	__bshru
	ld	d, a
	ld	a, e
	and	a, 7
	ld	e, a
	ld	a, c
	call	__bshru
	ld	b, a
	ld	a, c
	and	a, 7
	push	hl
	pop	iy
	ld	(iy), d
	ld	(iy + 1), e
	ld	(iy + 2), b
	ld	(iy + 3), a
	ld	bc, -805
	lea	hl, ix
	add	hl, bc
	ld	a, (hl)
	ld	(iy + 4), a
BB15_5:
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	bc, -804
	lea	hl, ix
	add	hl, bc
	ld	de, (hl)
	push	de
	pop	hl
	ld	a, (hl)
	ld	(iy), a
	lea	hl, iy
	push	de
	pop	iy
	ld	a, (iy + 1)
	push	hl
	pop	iy
	ld	(iy + 1), a
	push	de
	pop	iy
	ld	a, (iy + 2)
	push	hl
	pop	iy
	ld	(iy + 2), a
	ld	bc, -792
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	ld	(iy + 3), hl
	ld	hl, _engine_board
	push	hl
	call	_board_unmake
	pop	hl
	pop	hl
	pop	hl
	ld	de, 3
	ld	bc, -798
	lea	hl, ix
	add	hl, bc
	ld	iy, (hl)
	add	iy, de
	push	ix
	ld	de, -801
	add	ix, de
	ld	bc, (ix)
	pop	ix
	jp	BB15_1
BB15_6:
	ld	bc, -789
	lea	hl, ix
	add	hl, bc
	ld	a, (hl)
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_is_legal_move
_engine_is_legal_move:
	ld	hl, -797
	call	__frameset
	ld	b, 4
	xor	a, a
	ld	de, -792
	lea	hl, ix
	add	hl, de
	ld	(hl), a
	lea	hl, ix - 20
	ld	de, -796
	lea	iy, ix
	add	iy, de
	ld	(iy), hl
	ld	de, -788
	lea	hl, ix
	add	hl, de
	ld	a, (ix + 6)
	ld	e, (ix + 7)
	ld	c, (ix + 8)
	ld	d, (ix + 9)
	ld	iyl, d
	ld	d, (ix + 10)
	ld	(ix - 3), bc
	push	ix
	ld	bc, -797
	add	ix, bc
	ld	(ix), d
	pop	ix
	ld	bc, (ix - 3)
	call	__bshl
	add	a, e
	ld	e, a
	ld	a, c
	call	__bshl
	add	a, iyl
	ld	(ix - 3), bc
	push	ix
	ld	bc, -793
	add	ix, bc
	ld	(ix), a
	pop	ix
	push	ix
	ld	bc, -791
	add	ix, bc
	ld	(ix), hl
	pop	ix
	push	hl
	push	de
	ld	hl, _engine_board
	push	hl
	ld	bc, (ix - 3)
	call	_generate_moves_from
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	sbc	hl, hl
	ld	l, a
	ld	bc, 3
	call	__imulu
	ld	bc, 0
	push	hl
	pop	de
BB16_1:
	push	de
	pop	hl
	or	a, a
	sbc	hl, bc
	jp	z, BB16_6
	ld	(ix - 3), de
	ld	de, -791
	lea	hl, ix
	add	hl, de
	ld	iy, (hl)
	add	iy, bc
	ld	a, (iy + 1)
	push	ix
	ld	de, -793
	add	ix, de
	ld	l, (ix)
	pop	ix
	cp	a, l
	ld	de, (ix - 3)
	jr	nz, BB16_4
	ld	a, (iy + 2)
	ld	(ix - 3), bc
	ld	bc, -797
	lea	hl, ix
	add	hl, bc
	xor	a, (hl)
	and	a, 56
	or	a, a
	ld	bc, (ix - 3)
	jr	z, BB16_5
BB16_4:
	push	bc
	pop	hl
	ld	bc, 3
	add	hl, bc
	push	hl
	pop	bc
	jr	BB16_1
BB16_5:
	ld	de, -791
	lea	hl, ix
	add	hl, de
	ld	hl, (hl)
	add	hl, bc
	ld	bc, -791
	lea	iy, ix
	add	iy, bc
	ld	(iy), hl
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	ld	a, (hl)
	ld	(iy), a
	lea	hl, iy
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	ld	a, (iy + 1)
	push	hl
	pop	iy
	ld	(iy + 1), a
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	ld	a, (iy + 2)
	push	hl
	pop	iy
	ld	(iy + 2), a
	ld	bc, -796
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	ld	(iy + 3), hl
	ld	hl, _engine_board
	push	hl
	call	_board_make
	pop	hl
	pop	hl
	pop	hl
	call	_board_is_legal
	ld	bc, -792
	lea	hl, ix
	add	hl, bc
	ld	(hl), a
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	push	ix
	inc	bc
	add	ix, bc
	ld	hl, (ix)
	pop	ix
	ld	a, (hl)
	ld	(iy), a
	lea	hl, iy
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	ld	a, (iy + 1)
	push	hl
	pop	iy
	ld	(iy + 1), a
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	ld	a, (iy + 2)
	push	hl
	pop	iy
	ld	(iy + 2), a
	ld	bc, -796
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	ld	(iy + 3), hl
	ld	hl, _engine_board
	push	hl
	call	_board_unmake
	pop	hl
	pop	hl
	pop	hl
BB16_6:
	ld	bc, -792
	lea	hl, ix
	add	hl, bc
	ld	a, (hl)
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_get_move_effects
_engine_get_move_effects:
	call	__frameset0
	ld	iy, (ix + 12)
	ld	e, 0
	ld	(iy), e
	ld	(iy + 5), e
	ld	l, (ix + 10)
	bit	1, l
	jp	z, BB17_7
	ld	(iy), 1
	ld	a, (ix + 6)
	ld	(iy + 1), a
	ld	(iy + 3), a
	ld	c, (ix + 9)
	ld	a, (ix + 7)
	cp	a, c
	sbc	a, a
	bit	0, a
	jr	z, BB17_3
	ld	e, 7
BB17_3:
	bit	0, a
	jr	nz, BB17_5
	ld	a, 3
	jr	BB17_6
BB17_5:
	ld	a, 5
BB17_6:
	ld	(iy + 2), e
	ld	(iy + 4), a
BB17_7:
	bit	2, l
	jr	z, BB17_9
	ld	(iy + 5), 1
	ld	a, (ix + 6)
	ld	(iy + 6), a
	ld	a, (ix + 9)
	ld	(iy + 7), a
BB17_9:
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_make_move
_engine_make_move:
	ld	hl, -808
	call	__frameset
	ld	de, -788
	lea	iy, ix
	add	iy, de
	ld	b, 4
	lea	hl, iy + 14
	push	ix
	ld	de, -802
	add	ix, de
	ld	(ix), iy
	pop	ix
	lea	de, iy
	ld	(ix - 3), bc
	ld	bc, -798
	lea	iy, ix
	add	iy, bc
	ld	(iy), de
	ld	a, (ix + 6)
	ld	e, (ix + 7)
	ld	bc, (ix - 3)
	ld	c, (ix + 8)
	ld	d, (ix + 9)
	ld	iyl, d
	ld	d, (ix + 10)
	ld	(ix - 3), bc
	push	ix
	ld	bc, -794
	add	ix, bc
	ld	(ix), d
	pop	ix
	ld	bc, (ix - 3)
	call	__bshl
	add	a, e
	ld	e, a
	ld	a, c
	call	__bshl
	add	a, iyl
	ld	(ix - 3), bc
	push	ix
	ld	bc, -795
	add	ix, bc
	ld	(ix), a
	pop	ix
	push	ix
	ld	bc, -791
	add	ix, bc
	ld	(ix), hl
	pop	ix
	push	hl
	push	de
	ld	hl, _engine_board
	push	hl
	ld	bc, (ix - 3)
	call	_generate_moves_from
	ld	iy, 0
	ld	e, a
	pop	hl
	pop	hl
	pop	hl
	ld	bc, -794
	lea	hl, ix
	add	hl, bc
	ld	a, (hl)
	and	a, 48
	push	ix
	ld	bc, -799
	add	ix, bc
	ld	(ix), a
	pop	ix
	or	a, a
	sbc	hl, hl
	ld	l, e
	ld	bc, 3
	call	__imulu
	push	hl
	pop	bc
BB18_1:
	push	bc
	pop	hl
	lea	de, iy
	or	a, a
	sbc	hl, de
	jp	z, BB18_8
	lea	de, iy
	lea	hl, iy
	ld	(ix - 3), bc
	ld	bc, -791
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	add	iy, de
	push	ix
	ld	de, -794
	add	ix, de
	ld	(ix), iy
	pop	ix
	ld	a, (iy + 1)
	push	hl
	pop	iy
	dec	de
	lea	hl, ix
	add	hl, de
	ld	l, (hl)
	cp	a, l
	ld	bc, (ix - 3)
	jp	nz, BB18_7
	lea	de, iy
	ld	(ix - 3), bc
	ld	bc, -805
	lea	hl, ix
	add	hl, bc
	ld	(hl), iy
	ld	bc, -791
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	add	iy, de
	ld	l, (iy + 2)
	ld	de, -805
	lea	iy, ix
	add	iy, de
	ld	iy, (iy)
	ld	a, l
	and	a, 48
	bit	3, l
	ld	bc, (ix - 3)
	jr	z, BB18_5
	ld	de, -799
	lea	hl, ix
	add	hl, de
	ld	l, (hl)
	cp	a, l
	jp	nz, BB18_7
BB18_5:
	ld	de, -808
	lea	hl, ix
	add	hl, de
	ld	(hl), bc
	push	hl
	push	hl
	ex	de, hl
	ld	hl, 0
	add	hl, sp
	ex	de, hl
	ld	bc, -794
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	ld	a, (iy)
	push	de
	pop	hl
	ld	(hl), a
	ld	a, (iy + 1)
	lea	hl, iy
	push	de
	pop	iy
	ld	(iy + 1), a
	push	hl
	pop	iy
	ld	a, (iy + 2)
	push	de
	pop	iy
	ld	(iy + 2), a
	ld	bc, -798
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	ld	(iy + 3), hl
	ld	hl, _engine_board
	push	hl
	call	_board_make
	pop	hl
	pop	hl
	pop	hl
	call	_board_is_legal
	or	a, a
	jr	nz, BB18_10
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	bc, -794
	lea	hl, ix
	add	hl, bc
	ld	de, (hl)
	push	de
	pop	hl
	ld	a, (hl)
	ld	(iy), a
	lea	hl, iy
	push	de
	pop	iy
	ld	a, (iy + 1)
	push	hl
	pop	iy
	ld	(iy + 1), a
	push	de
	pop	iy
	ld	a, (iy + 2)
	push	hl
	pop	iy
	ld	(iy + 2), a
	ld	bc, -798
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	ld	(iy + 3), hl
	ld	hl, _engine_board
	push	hl
	call	_board_unmake
	pop	hl
	pop	hl
	pop	hl
	ld	de, -805
	lea	hl, ix
	add	hl, de
	ld	iy, (hl)
	push	ix
	ld	de, -808
	add	ix, de
	ld	bc, (ix)
	pop	ix
BB18_7:
	ld	de, 3
	add	iy, de
	jp	BB18_1
BB18_8:
	xor	a, a
BB18_9:
	ld	sp, ix
	pop	ix
	ret
BB18_10:
	ld	bc, -802
	lea	hl, ix
	add	hl, bc
	ld	iy, (hl)
	ld	a, (iy + 12)
	and	a, 7
	cp	a, 1
	jr	z, BB18_12
	ld	a, (iy + 13)
	and	a, 1
	bit	0, a
	jr	z, BB18_13
BB18_12:
	ld	hl, _pos_history_count
	ld	hl, (hl)
	ld	iy, _pos_history_irreversible
	ld	(iy), l
	ld	(iy + 1), h
BB18_13:
	ld	hl, (_engine_board+170)
	ld	a, (_engine_board+173)
	ld	e, a
	push	de
	push	hl
	call	_search_history_push
	pop	hl
	pop	hl
	call	_compute_status
	jr	BB18_9
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_compute_status
_compute_status:
	ld	hl, -804
	call	__frameset
	ld	iy, 0
	ld	a, (_engine_board+167)
	cp	a, 100
	jr	c, BB19_2
	ld	b, 4
	jp	BB19_22
BB19_2:
	ld	de, -794
	lea	hl, ix
	add	hl, de
	ld	(hl), iy
	ld	b, 6
	ld	a, (_engine_board+160)
	ld	c, a
	ld	a, (_engine_board+161)
	ld	de, -791
	lea	iy, ix
	add	iy, de
	ld	(iy), a
	ld	a, c
	cp	a, 1
	jr	nz, BB19_4
	ld	de, -791
	lea	hl, ix
	add	hl, de
	ld	a, (hl)
	cp	a, 1
	jp	z, BB19_22
BB19_4:
	ld	a, c
	cp	a, 1
	jp	nz, BB19_9
	ld	de, -791
	lea	hl, ix
	add	hl, de
	ld	a, (hl)
	cp	a, 2
	jp	nz, BB19_9
	or	a, a
	sbc	hl, hl
	ex	de, hl
BB19_7:
	ld	(ix - 3), bc
	ld	bc, -800
	lea	hl, ix
	add	hl, bc
	ld	(hl), de
	ex	de, hl
	ld	de, 2
	or	a, a
	sbc	hl, de
	ld	bc, (ix - 3)
	jr	z, BB19_9
	ld	hl, _engine_board+144
	ld	(ix - 3), bc
	ld	bc, -800
	lea	iy, ix
	add	iy, bc
	ld	de, (iy)
	add	hl, de
	push	ix
	ld	bc, -803
	add	ix, bc
	ld	(ix), hl
	pop	ix
	or	a, a
	sbc	hl, hl
	push	ix
	ld	bc, -797
	add	ix, bc
	ld	(ix), hl
	pop	ix
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	ld	bc, (ix - 3)
	ld	a, c
	ld	(ix - 3), de
	push	ix
	ld	de, -803
	add	ix, de
	ld	iy, (ix)
	pop	ix
	ld	l, (iy)
	ld	de, -797
	lea	iy, ix
	add	iy, de
	ld	(iy), hl
	ld	hl, _engine_board
	ld	iyl, b
	push	ix
	add	ix, de
	ld	bc, (ix)
	pop	ix
	add	hl, bc
	ld	b, iyl
	ld	c, a
	ld	a, (hl)
	and	a, 6
	ld	de, (ix - 3)
	inc	de
	cp	a, 2
	jp	nz, BB19_7
	jp	BB19_22
BB19_9:
	ld	a, c
	cp	a, 2
	jr	nz, BB19_14
	ld	de, -791
	lea	hl, ix
	add	hl, de
	ld	a, (hl)
	cp	a, 1
	jr	nz, BB19_14
	ld	iy, _engine_board+128
BB19_12:
	ld	de, -794
	lea	hl, ix
	add	hl, de
	ld	hl, (hl)
	ld	de, 2
	or	a, a
	sbc	hl, de
	jr	z, BB19_14
	lea	hl, iy
	ld	(ix - 3), bc
	ld	bc, -794
	lea	iy, ix
	add	iy, bc
	ld	de, (iy)
	add	hl, de
	ld	de, 0
	ld	e, (hl)
	ld	hl, _engine_board
	ld	iy, _engine_board+128
	add	hl, de
	ld	a, (hl)
	and	a, 6
	ld	de, -794
	lea	hl, ix
	add	hl, de
	ld	hl, (hl)
	inc	hl
	push	ix
	add	ix, de
	ld	(ix), hl
	pop	ix
	cp	a, 2
	ld	bc, (ix - 3)
	jr	nz, BB19_12
	jp	BB19_22
BB19_14:
	ld	bc, -788
	lea	iy, ix
	add	iy, bc
	lea	hl, iy + 14
	push	ix
	ld	bc, -791
	add	ix, bc
	ld	(ix), hl
	pop	ix
	lea	hl, iy
	ld	bc, -794
	lea	iy, ix
	add	iy, bc
	ld	(iy), hl
	ld	a, (_engine_board+164)
	ld	de, 0
	ld	e, a
	ld	hl, _engine_board+162
	add	hl, de
	ld	l, (hl)
	xor	a, 1
	ld	e, a
	push	de
	push	hl
	ld	hl, _engine_board
	push	hl
	call	_is_square_attacked
	ld	bc, -797
	lea	hl, ix
	add	hl, bc
	ld	(hl), a
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	sbc	hl, hl
	push	hl
	ld	bc, -791
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	push	hl
	ld	hl, _engine_board
	push	hl
	call	_generate_moves
	pop	hl
	pop	hl
	pop	hl
	ld	de, 0
	ld	e, a
	inc	de
BB19_15:
	dec	de
	push	de
	pop	hl
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jp	z, BB19_19
	ld	bc, -791
	lea	hl, ix
	add	hl, bc
	ld	iy, (hl)
	lea	hl, iy + 3
	ld	bc, -803
	lea	iy, ix
	add	iy, bc
	ld	(iy), hl
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	bc, -791
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	ld	a, (hl)
	ld	(iy), a
	lea	hl, iy
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	ld	a, (iy + 1)
	push	hl
	pop	iy
	ld	(iy + 1), a
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	ld	a, (iy + 2)
	push	hl
	pop	iy
	ld	(iy + 2), a
	ld	bc, -794
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	ld	(iy + 3), hl
	ld	hl, _engine_board
	push	hl
	ld	bc, -800
	lea	hl, ix
	add	hl, bc
	ld	(hl), de
	call	_board_make
	pop	hl
	pop	hl
	pop	hl
	call	_board_is_legal
	ld	bc, -804
	lea	hl, ix
	add	hl, bc
	ld	(hl), a
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	push	ix
	ld	bc, -791
	add	ix, bc
	ld	hl, (ix)
	pop	ix
	ld	a, (hl)
	ld	(iy), a
	lea	hl, iy
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	ld	a, (iy + 1)
	push	hl
	pop	iy
	ld	(iy + 1), a
	lea	iy, ix
	add	iy, bc
	ld	iy, (iy)
	ld	a, (iy + 2)
	push	hl
	pop	iy
	ld	(iy + 2), a
	ld	bc, -794
	lea	hl, ix
	add	hl, bc
	ld	hl, (hl)
	ld	(iy + 3), hl
	ld	hl, _engine_board
	push	hl
	call	_board_unmake
	ld	bc, -800
	lea	hl, ix
	add	hl, bc
	ld	de, (hl)
	pop	hl
	pop	hl
	pop	hl
	ld	bc, -804
	lea	hl, ix
	add	hl, bc
	ld	a, (hl)
	or	a, a
	inc	bc
	lea	iy, ix
	push	af
	add	iy, bc
	pop	af
	ld	hl, (iy)
	push	ix
	ld	bc, -791
	push	af
	add	ix, bc
	pop	af
	ld	(ix), hl
	pop	ix
	jp	z, BB19_15
	ld	bc, -797
	lea	hl, ix
	add	hl, bc
	ld	a, (hl)
	or	a, a
	jr	nz, BB19_21
	ld	b, 0
	jr	BB19_22
BB19_19:
	ld	de, -797
	lea	hl, ix
	add	hl, de
	ld	a, (hl)
	or	a, a
	ld	b, 3
	jr	z, BB19_22
	ld	b, 2
	jr	BB19_22
BB19_21:
	ld	b, 1
BB19_22:
	ld	a, b
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_think
_engine_think:
	ld	hl, -18
	call	__frameset
	ld	a, (ix + 9)
	ld	de, (ix + 12)
	ld	c, (ix + 15)
	ld	hl, _engine_board
	ld	(ix - 8), a
	ld	(ix - 7), de
	ld	(ix - 4), c
	ld	de, (_engine_hooks)
	ld	(ix - 3), de
	pea	ix - 8
	push	hl
	pea	ix - 18
	call	_search_go
	pop	hl
	pop	hl
	pop	hl
	ld	e, (ix - 18)
	ld	a, e
	cp	a, -1
	jr	nz, BB20_2
	ld	iy, (ix + 6)
	ld	(iy), -1
	or	a, a
	sbc	hl, hl
	ld	(iy + 1), hl
	ld	(iy + 4), h
	jr	BB20_3
BB20_2:
	ld	b, 4
	ld	l, (ix - 17)
	ld	c, (ix - 16)
	ld	a, e
	call	__bshru
	ld	iy, (ix + 6)
	ld	(iy), a
	ld	a, e
	and	a, 7
	ld	(iy + 1), a
	ld	a, l
	call	__bshru
	ld	(iy + 2), a
	ld	a, l
	and	a, 7
	ld	(iy + 3), a
	ld	(iy + 4), c
BB20_3:
	lea	hl, iy
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_get_status
_engine_get_status:
	jp	_compute_status
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_engine_in_check
_engine_in_check:
	ld	bc, _engine_board
	ld	a, (_engine_board+164)
	ld	de, 0
	ld	e, a
	ld	hl, _engine_board+162
	add	hl, de
	ld	l, (hl)
	xor	a, 1
	ld	e, a
	push	de
	push	hl
	push	bc
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_evaluate
_evaluate:
	ld	hl, -16
	call	__frameset
	ld	bc, (ix + 6)
	xor	a, a
	ld	de, 176
	push	bc
	pop	hl
	add	hl, de
	ld	hl, (hl)
	ld	(ix - 6), hl
	ld	de, 178
	push	bc
	pop	hl
	add	hl, de
	ld	hl, (hl)
	ld	(ix - 9), hl
	ld	de, 180
	push	bc
	pop	hl
	add	hl, de
	ld	hl, (hl)
	ld	(ix - 12), hl
	ld	de, 182
	push	bc
	pop	hl
	add	hl, de
	ld	hl, (hl)
	ld	(ix - 15), hl
	ld	de, 160
	push	bc
	pop	iy
	add	iy, de
	ld	de, 128
	push	bc
	pop	hl
	add	hl, de
	ld	(ix - 3), hl
	or	a, a
	sbc	hl, hl
	ld	l, (iy)
	ld	e, a
BB23_1:
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jr	z, BB23_5
	ld	bc, 0
	ld	iy, (ix - 3)
	ld	c, (iy)
	ld	iy, (ix + 6)
	add	iy, bc
	ld	a, (iy)
	and	a, 7
	cp	a, 3
	ld	d, 1
	jr	z, BB23_4
	ld	d, 0
BB23_4:
	ld	a, e
	add	a, d
	ld	e, a
	ld	bc, (ix - 3)
	inc	bc
	ld	(ix - 3), bc
	dec	hl
	jr	BB23_1
BB23_5:
	ld	bc, 161
	ld	(ix - 16), e
	ld	de, (ix + 6)
	push	de
	pop	iy
	add	iy, bc
	or	a, a
	sbc	hl, hl
	ld	l, (iy)
	ld	bc, 144
	push	de
	pop	iy
	add	iy, bc
	ld	d, b
BB23_6:
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jr	z, BB23_10
	ld	bc, 0
	ld	(ix - 3), iy
	ld	c, (iy)
	ld	iy, (ix + 6)
	add	iy, bc
	ld	a, (iy)
	and	a, 7
	cp	a, 3
	ld	c, 1
	jr	z, BB23_9
	ld	c, 0
BB23_9:
	ld	a, d
	add	a, c
	ld	d, a
	ld	iy, (ix - 3)
	inc	iy
	dec	hl
	jr	BB23_6
BB23_10:
	ld	(ix - 3), d
	ld	hl, (ix - 12)
	ld	bc, (ix - 15)
	or	a, a
	sbc.sis	hl, bc
	ld	e, l
	ld	d, h
	ld	hl, (ix - 6)
	ld	bc, (ix - 9)
	or	a, a
	sbc.sis	hl, bc
	ld	a, (ix - 16)
	cp	a, 2
	ccf
	sbc	a, a
	ld	(ix - 6), hl
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
	ld.sis	bc, 30
	add.sis	iy, bc
	ld	(ix - 9), de
	ld	l, e
	ld	h, d
	ld.sis	bc, 50
	add.sis	hl, bc
	bit	0, a
	jr	nz, BB23_12
	ld	hl, (ix - 9)
BB23_12:
	ld	c, l
	ld	b, h
	bit	0, a
	ld	a, (ix - 3)
	jr	nz, BB23_14
	ld	iy, (ix - 6)
BB23_14:
	cp	a, 2
	ccf
	sbc	a, a
	ld	(ix - 9), iy
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	ld.sis	de, -30
	add.sis	hl, de
	ld	(ix - 6), hl
	ld	iyl, c
	ld	iyh, b
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	ld.sis	de, -50
	add.sis	hl, de
	ld	(ix - 3), hl
	bit	0, a
	jr	nz, BB23_16
	ld	(ix - 3), iy
BB23_16:
	bit	0, a
	jr	nz, BB23_18
	ld	hl, (ix - 9)
	ld	(ix - 6), hl
BB23_18:
	ld	de, 184
	ld	hl, (ix + 6)
	add	hl, de
	ld	de, (hl)
	ld.sis	bc, 24
	ld	l, e
	ld	h, d
	or	a, a
	sbc.sis	hl, bc
	call	pe, __setflag
	jp	m, BB23_20
	ld.sis	hl, 24
	ld	e, l
	ld	d, h
BB23_20:
	ld.sis	bc, 1
	ld	l, e
	ld	h, d
	or	a, a
	sbc.sis	hl, bc
	call	pe, __setflag
	jp	p, BB23_22
	ld.sis	hl, 0
	ld	e, l
	ld	d, h
BB23_22:
	ld	iy, (ix - 6)
	ld	a, iyh
	ld	l, a
	rlc	l
	sbc	hl, hl
	push	hl
	pop	bc
	ld	b, a
	ld	c, iyl
	push	bc
	pop	hl
	push	bc
	pop	iy
	add	iy, iy
	sbc	hl, hl
	push	hl
	pop	iy
	or	a, a
	sbc	hl, hl
	ld	l, e
	ld	h, d
	ld	(ix - 9), hl
	ld	e, 0
	ld	a, iyl
	call	__lmulu
	ld	(ix - 6), hl
	ld	(ix - 12), e
	ld	iy, (ix - 3)
	ld	a, iyh
	ld	l, a
	rlc	l
	sbc	hl, hl
	push	hl
	pop	bc
	ld	b, a
	ld	c, iyl
	push	bc
	pop	hl
	push	bc
	pop	iy
	add	iy, iy
	sbc	hl, hl
	push	hl
	pop	iy
	ld	hl, 24
	ld	de, (ix - 9)
	or	a, a
	sbc	hl, de
	ld	e, 0
	ld	a, iyl
	call	__lmulu
	ld	bc, (ix - 6)
	ld	a, (ix - 12)
	call	__ladd
	ld	bc, 24
	xor	a, a
	call	__ldivs
	push	hl
	pop	iy
	ld	de, 164
	ld	hl, (ix + 6)
	add	hl, de
	ld	a, (hl)
	ld	c, 8
	lea	hl, iy
	call	__ishl
	push	hl
	pop	de
	lea	hl, iy
	ld	bc, -256
	call	__imulu
	or	a, a
	jr	z, BB23_24
	ex	de, hl
BB23_24:
	ex	de, hl
	ld	c, 8
	call	__ishru
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_generate_moves
_generate_moves:
	ld	hl, -16
	call	__frameset
	ld	iy, (ix + 6)
	xor	a, a
	ld	de, 164
	lea	hl, iy
	add	hl, de
	ld	l, (hl)
	ld	(ix - 6), l
	ld	de, 0
	ld	e, l
	lea	hl, iy
	add	hl, de
	ld	bc, 160
	add	hl, bc
	ld	(ix - 3), hl
	ld	c, 4
	ex	de, hl
	call	__ishl
	push	hl
	pop	de
	add	iy, de
	ld	(ix - 9), iy
	ld	l, (ix + 12)
	ld	(ix - 12), hl
	ld	l, (ix - 6)
	ld	(ix - 15), hl
	ld	bc, 0
BB24_1:
	ld	de, 0
	ld	hl, (ix - 3)
	ld	e, (hl)
	push	bc
	pop	hl
	or	a, a
	sbc	hl, de
	jr	nc, BB24_3
	ld	hl, (ix - 9)
	add	hl, bc
	ld	de, 128
	add	hl, de
	ld	l, (hl)
	ex	de, hl
	ld	iyl, e
	ex	de, hl
	or	a, a
	sbc	hl, hl
	ld	l, a
	ld	(ix - 6), bc
	ld	bc, 3
	call	__imulu
	push	hl
	pop	de
	ld	hl, (ix + 9)
	add	hl, de
	ld	de, (ix - 12)
	push	de
	push	hl
	ld	hl, (ix - 15)
	push	hl
	ex	de, hl
	ld	e, iyl
	ex	de, hl
	push	hl
	ld	hl, (ix + 6)
	push	hl
	ld	(ix - 16), a
	call	_gen_piece_moves
	ld	bc, (ix - 6)
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	add	a, (ix - 16)
	inc	bc
	jr	BB24_1
BB24_3:
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_gen_piece_moves
_gen_piece_moves:
	ld	hl, -15
	call	__frameset
	ld	iy, (ix + 6)
	ld	bc, 0
	push	bc
	pop	de
	ld	e, (ix + 9)
	ld	(ix - 5), de
	add	iy, de
	ld	a, (iy)
	and	a, 7
	ld	c, a
	dec	bc
	ld	de, 6
	push	bc
	pop	hl
	or	a, a
	sbc	hl, de
	jr	c, BB25_2
	ld	b, 0
	jp	BB25_108
BB25_2:
	xor	a, a
	ld	(ix - 9), a
	ld	a, (ix + 12)
	ld	l, (ix + 18)
	ex	de, hl
	ld	iyl, e
	ex	de, hl
	ld	l, 1
	ld	(ix - 6), l
	ld	hl, JTI25_0
	add	hl, bc
	add	hl, bc
	add	hl, bc
	ld	hl, (hl)
	jp	(hl)
BB25_3:
	or	a, a
	ld	c, (ix + 9)
	jp	z, BB25_40
	ld	a, 0
	jp	BB25_41
BB25_5:
	xor	a, a
	ld	(ix - 9), a
	ld	iy, (ix + 6)
	ld	de, 0
BB25_6:
	push	de
	pop	hl
	ld	bc, 8
	or	a, a
	sbc	hl, bc
	jp	z, BB25_107
	ld	hl, _knight_offsets
	ld	(ix - 5), de
	add	hl, de
	ld	a, (hl)
	add	a, (ix + 9)
	ld	d, a
	and	a, -120
	or	a, a
	jr	nz, BB25_14
	ld	bc, 0
	ld	c, d
	add	iy, bc
	ld	l, (iy)
	ld	a, l
	or	a, a
	ld	e, (ix + 18)
	jr	nz, BB25_10
	ld	a, e
	cp	a, 1
	ld	a, 0
	jr	nz, BB25_12
	jr	BB25_13
BB25_10:
	ld	a, l
	ld	b, 7
	call	__bshru
	ld	l, a
	ld	a, e
	cp	a, 2
	jr	z, BB25_13
	ld	a, l
	ld	l, (ix + 12)
	cp	a, l
	ld	a, 1
	jr	z, BB25_13
BB25_12:
	or	a, a
	sbc	hl, hl
	ld	e, (ix - 9)
	ld	l, e
	inc	e
	ld	(ix - 9), e
	ld	bc, 3
	call	__imulu
	push	hl
	pop	bc
	ld	iy, (ix + 15)
	add	iy, bc
	ld	l, (ix + 9)
	ld	(iy), l
	ld	(iy + 1), d
	ld	(iy + 2), a
BB25_13:
	ld	iy, (ix + 6)
BB25_14:
	ld	de, (ix - 5)
	inc	de
	jr	BB25_6
BB25_15:
	ex	de, hl
	ld	e, iyl
	ex	de, hl
	push	hl
	ld	hl, (ix + 15)
	push	hl
	ld	hl, _bishop_offsets
	jr	BB25_17
BB25_16:
	ex	de, hl
	ld	e, iyl
	ex	de, hl
	push	hl
	ld	hl, (ix + 15)
	push	hl
	ld	hl, _rook_offsets
BB25_17:
	push	hl
	ld	l, a
	push	hl
	ld	l, (ix + 9)
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_gen_sliding_moves
	ld	b, a
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	jp	BB25_108
BB25_18:
	ex	de, hl
	ld	e, iyl
	ex	de, hl
	push	hl
	ld	hl, (ix + 15)
	push	hl
	ld	hl, _bishop_offsets
	push	hl
	ld	l, a
	push	hl
	ld	l, (ix + 9)
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_gen_sliding_moves
	ld	(ix - 5), a
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	sbc	hl, hl
	ld	l, a
	ld	bc, 3
	call	__imulu
	push	hl
	pop	de
	ld	iy, (ix + 15)
	add	iy, de
	ld	l, (ix + 18)
	push	hl
	push	iy
	ld	hl, _rook_offsets
	push	hl
	ld	l, (ix + 12)
	push	hl
	ld	l, (ix + 9)
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_gen_sliding_moves
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	add	a, (ix - 5)
	ld	b, a
	jp	BB25_108
BB25_19:
	ld	a, 114
	ld	(ix - 10), a
	ld	b, 0
	ld	(ix - 9), b
	ld	iy, (ix + 6)
	ld	de, 0
BB25_20:
	push	de
	pop	hl
	ld	bc, 8
	or	a, a
	sbc	hl, bc
	jr	z, BB25_29
	ld	hl, _king_offsets
	add	hl, de
	ld	a, (hl)
	add	a, (ix + 9)
	ld	c, a
	and	a, -120
	or	a, a
	jr	nz, BB25_28
	ld	(ix - 5), de
	ld	de, 0
	ld	e, c
	add	iy, de
	ld	l, (iy)
	ld	a, l
	or	a, a
	jr	nz, BB25_24
	ld	a, (ix + 18)
	cp	a, 1
	ld	a, 0
	jr	nz, BB25_26
	jr	BB25_27
BB25_24:
	ld	a, l
	ld	b, 7
	call	__bshru
	ld	l, a
	ld	a, (ix + 18)
	cp	a, 2
	jr	z, BB25_27
	ld	a, l
	ld	l, (ix + 12)
	cp	a, l
	ld	a, 1
	jr	z, BB25_27
BB25_26:
	or	a, a
	sbc	hl, hl
	ld	e, (ix - 9)
	ld	l, e
	inc	e
	ld	(ix - 9), e
	ld	(ix - 11), c
	ld	bc, 3
	call	__imulu
	ld	c, (ix + 9)
	push	hl
	pop	de
	ld	iy, (ix + 15)
	add	iy, de
	ld	(iy), c
	ld	l, (ix - 11)
	ld	(iy + 1), l
	ld	(iy + 2), a
BB25_27:
	ld	iy, (ix + 6)
	ld	de, (ix - 5)
BB25_28:
	inc	de
	jp	BB25_20
BB25_29:
	ld	a, (ix + 18)
	cp	a, 1
	jp	z, BB25_107
	ld	a, (ix + 9)
	cp	a, 116
	jp	nz, BB25_59
	ld	a, (ix + 12)
	or	a, a
	jp	nz, BB25_59
	ld	de, 165
	lea	bc, iy
	add	iy, de
	ld	e, (iy)
	ld	a, e
	and	a, 1
	bit	0, a
	ld	hl, 116
	push	bc
	pop	iy
	jp	z, BB25_87
	ld	a, (iy + 119)
	cp	a, 4
	jp	nz, BB25_87
	ld	a, (iy + 117)
	or	a, a
	jp	nz, BB25_87
	ld	a, (iy + 118)
	or	a, a
	jp	nz, BB25_87
	ld	(ix - 5), e
	ld	de, 1
	push	de
	push	hl
	push	iy
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jp	nz, BB25_86
	ld	hl, 1
	push	hl
	ld	hl, 117
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jp	nz, BB25_86
	ld	hl, 1
	push	hl
	ld	hl, 118
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jp	nz, BB25_86
	or	a, a
	sbc	hl, hl
	ld	a, (ix - 9)
	ld	l, a
	inc	a
	ld	(ix - 9), a
	ld	bc, 3
	call	__imulu
	push	hl
	pop	de
	ld	iy, (ix + 15)
	add	iy, de
	ld	(iy), 116
	ld	(iy + 1), 118
	ld	(iy + 2), 2
	ld	hl, (ix + 6)
	push	hl
	pop	iy
	ld	de, 165
	add	iy, de
	ld	e, (iy)
	push	hl
	pop	iy
	ld	hl, 116
	jp	BB25_87
BB25_40:
	ld	a, -1
BB25_41:
	bit	0, a
	jr	nz, BB25_43
	ld	b, 16
	jr	BB25_44
BB25_43:
	ld	b, -16
BB25_44:
	ld	(ix - 10), b
	ld	b, 0
	bit	0, a
	jr	nz, BB25_46
	ld	iy, 1
	ld	(ix - 14), iy
	jr	BB25_47
BB25_46:
	ld	hl, 6
	ld	(ix - 14), hl
BB25_47:
	bit	0, a
	jr	nz, BB25_49
	ld	a, 7
	ld	b, a
BB25_49:
	ld	(ix - 11), b
	ld	a, c
	ld	b, 4
	call	__bshru
	ld	l, a
	ld	a, (ix + 18)
	cp	a, 1
	jr	nz, BB25_51
	ld	b, 0
	ld	de, 0
	jp	BB25_66
BB25_51:
	ld	(ix - 15), l
	ld	bc, 255
	ld	iy, 0
	push	af
	ld	a, (ix - 10)
	ld	iyl, a
	pop	af
	ld	de, (ix - 5)
	add	iy, de
	lea	hl, iy
	call	__iand
	push	hl
	pop	de
	lea	hl, iy
	ld	a, l
	and	a, -120
	or	a, a
	jp	nz, BB25_63
	ld	iy, (ix + 6)
	add	iy, de
	ld	a, (iy)
	or	a, a
	jp	nz, BB25_63
	ld	b, l
	ld	c, 4
	ex	de, hl
	call	__ishru
	ld	iy, (ix + 15)
	ld	c, (ix + 9)
	ld	(iy), c
	ld	a, l
	ld	l, (ix - 11)
	cp	a, l
	jr	nz, BB25_55
	ld	a, 8
	ld	(ix - 9), a
	ld	(iy + 3), c
	ld	(iy + 4), b
	ld	(iy + 5), 24
	ld	(iy + 6), c
	ld	(iy + 7), b
	ld	(iy + 8), 40
	ld	(iy + 9), c
	ld	(iy + 10), b
	ld	(iy + 11), 56
	ld	a, 4
	ld	(ix - 6), a
BB25_55:
	ld	(iy + 1), b
	ld	a, (ix - 9)
	ld	(iy + 2), a
	ld	hl, (ix - 14)
	ld	a, l
	ld	l, (ix - 15)
	cp	a, l
	ld	de, 0
	jr	nz, BB25_64
	ld	a, (ix - 10)
	add	a, b
	ld	l, a
	and	a, -120
	or	a, a
	jr	nz, BB25_64
	ld	e, l
	ld	iy, (ix + 6)
	add	iy, de
	ld	a, (iy)
	or	a, a
	ld	b, (ix - 6)
	jr	nz, BB25_65
	ld	(ix - 5), l
	or	a, a
	sbc	hl, hl
	ld	l, b
	inc	b
	ld	a, b
	ld	bc, 3
	call	__imulu
	ld	b, a
	ld	c, (ix + 9)
	push	hl
	pop	de
	ld	iy, (ix + 15)
	add	iy, de
	ld	(iy), c
	ld	a, (ix - 5)
	ld	(iy + 1), a
	ld	(iy + 2), 64
	jr	BB25_65
BB25_59:
	ld	a, (ix + 9)
	cp	a, 4
	jp	nz, BB25_107
	ld	a, (ix + 12)
	cp	a, 1
	jp	nz, BB25_107
	ld	de, 165
	lea	hl, iy
	add	iy, de
	ld	c, (iy)
	bit	2, c
	ld	de, 4
	push	hl
	pop	iy
	jp	nz, BB25_79
	or	a, a
	sbc	hl, hl
	jp	BB25_97
BB25_63:
	ld	b, 0
	ld	c, (ix + 9)
	jr	BB25_65
BB25_64:
	ld	b, (ix - 6)
BB25_65:
	ld	a, (ix + 18)
	cp	a, 2
	ld	de, 0
	jp	z, BB25_108
BB25_66:
	lea	hl, ix - 2
	ld	(ix - 9), hl
	ld	l, (ix - 10)
	ld	a, l
	dec	a
	ld	(ix - 2), a
	inc	l
	ld	(ix - 1), l
	push	de
	pop	iy
BB25_67:
	ld	de, 2
	lea	hl, iy
	or	a, a
	sbc	hl, de
	jp	z, BB25_108
	ld	hl, (ix - 9)
	lea	de, iy
	ld	(ix - 5), de
	add	hl, de
	ld	a, (hl)
	add	a, c
	ld	e, a
	and	a, -120
	or	a, a
	jp	nz, BB25_78
	ld	d, b
	ld	bc, 0
	ld	c, e
	ld	iy, (ix + 6)
	add	iy, bc
	ld	c, (iy)
	ld	a, c
	ld	b, 7
	call	__bshru
	ld	l, a
	ld	a, c
	or	a, a
	jr	z, BB25_71
	ld	a, l
	ld	l, (ix + 12)
	cp	a, l
	jr	nz, BB25_74
BB25_71:
	ld	iy, (ix + 6)
	ld	bc, 166
	add	iy, bc
	ld	l, (iy)
	ld	a, e
	cp	a, l
	jr	nz, BB25_73
	or	a, a
	sbc	hl, hl
	ld	l, d
	inc	d
	ld	bc, 3
	call	__imulu
	push	hl
	pop	bc
	ld	iy, (ix + 15)
	add	iy, bc
	ld	b, d
	ld	c, (ix + 9)
	ld	(iy), c
	ld	(iy + 1), e
	ld	(iy + 2), 5
	jp	BB25_78
BB25_73:
	ld	c, (ix + 9)
	jp	BB25_77
BB25_74:
	ld	a, e
	ld	b, 4
	call	__bshru
	ld	c, d
	inc	d
	or	a, a
	sbc	hl, hl
	ld	(ix - 6), c
	ld	l, c
	ld	bc, 3
	call	__imulu
	push	hl
	pop	bc
	ld	iy, (ix + 15)
	add	iy, bc
	ld	c, (ix + 9)
	ld	(iy), c
	ld	(iy + 1), e
	ld	l, (ix - 11)
	cp	a, l
	jp	nz, BB25_76
	ld	(iy + 2), 9
	ld	a, (ix - 6)
	add	a, 2
	ld	(ix - 10), a
	or	a, a
	sbc	hl, hl
	ld	l, d
	ld	bc, 3
	call	__imulu
	push	hl
	pop	bc
	ld	hl, (ix + 15)
	push	hl
	pop	iy
	add	iy, bc
	ld	a, (ix + 9)
	ld	(iy), a
	ld	(iy + 1), e
	ld	(iy + 2), 25
	ld	d, (ix - 6)
	ld	a, d
	add	a, 3
	ld	(ix - 14), a
	or	a, a
	sbc	hl, hl
	ld	l, (ix - 10)
	ld	bc, 3
	call	__imulu
	push	hl
	pop	bc
	ld	iy, (ix + 15)
	add	iy, bc
	ld	a, (ix + 9)
	ld	(iy), a
	ld	(iy + 1), e
	ld	(iy + 2), 41
	ld	a, d
	add	a, 4
	or	a, a
	sbc	hl, hl
	ld	l, (ix - 14)
	ld	bc, 3
	call	__imulu
	push	hl
	pop	bc
	ld	iy, (ix + 15)
	add	iy, bc
	ld	b, a
	ld	c, (ix + 9)
	ld	(iy), c
	ld	(iy + 1), e
	ld	(iy + 2), 57
	jr	BB25_78
BB25_76:
	ld	(iy + 2), 1
BB25_77:
	ld	b, d
BB25_78:
	ld	iy, (ix - 5)
	inc	iy
	jp	BB25_67
BB25_79:
	ld	a, (iy + 7)
	cp	a, -124
	ld	hl, 0
	jp	nz, BB25_97
	ld	a, (iy + 5)
	or	a, a
	jp	nz, BB25_97
	ld	a, (iy + 6)
	or	a, a
	jp	nz, BB25_97
	ld	(ix - 5), c
	push	hl
	push	de
	push	iy
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jp	nz, BB25_96
	or	a, a
	sbc	hl, hl
	push	hl
	ld	hl, 5
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jp	nz, BB25_96
	or	a, a
	sbc	hl, hl
	push	hl
	ld	hl, 6
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jp	nz, BB25_96
	or	a, a
	sbc	hl, hl
	ld	a, (ix - 9)
	ld	l, a
	inc	a
	ld	(ix - 9), a
	ld	bc, 3
	call	__imulu
	push	hl
	pop	de
	ld	iy, (ix + 15)
	add	iy, de
	ld	(iy), 4
	ld	(iy + 1), 6
	ld	(iy + 2), 2
	ld	hl, (ix + 6)
	push	hl
	pop	iy
	ld	de, 165
	add	iy, de
	ld	c, (iy)
	push	hl
	pop	iy
	or	a, a
	sbc	hl, hl
	ld	de, 4
	jp	BB25_97
BB25_86:
	ld	iy, (ix + 6)
	ld	hl, 116
	ld	e, (ix - 5)
BB25_87:
	bit	1, e
	jp	z, BB25_107
	ld	a, (iy + 112)
	cp	a, 4
	jp	nz, BB25_107
	ld	a, (iy + 115)
	or	a, a
	jp	nz, BB25_107
	ld	a, (iy + 114)
	or	a, a
	jp	nz, BB25_107
	ld	a, (iy + 113)
	or	a, a
	jp	nz, BB25_107
	ld	de, 1
	push	de
	push	hl
	push	iy
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jp	nz, BB25_107
	ld	hl, 1
	push	hl
	ld	hl, 115
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jp	nz, BB25_107
	ld	hl, 1
	push	hl
	ld	hl, 114
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jp	nz, BB25_107
	or	a, a
	sbc	hl, hl
	ld	a, (ix - 9)
	ld	l, a
	ld	bc, 3
	call	__imulu
	push	hl
	pop	de
	ld	iy, (ix + 15)
	add	iy, de
	ld	(iy), 116
	jp	BB25_106
BB25_96:
	ld	iy, (ix + 6)
	or	a, a
	sbc	hl, hl
	ld	de, 4
	ld	c, (ix - 5)
BB25_97:
	bit	3, c
	jp	z, BB25_107
	ld	a, (iy)
	cp	a, -124
	jr	nz, BB25_107
	ld	a, (iy + 3)
	or	a, a
	jr	nz, BB25_107
	ld	a, (iy + 2)
	or	a, a
	jr	nz, BB25_107
	ld	a, (iy + 1)
	or	a, a
	jr	nz, BB25_107
	push	hl
	push	de
	push	iy
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jr	nz, BB25_107
	or	a, a
	sbc	hl, hl
	push	hl
	ld	hl, 3
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jr	nz, BB25_107
	or	a, a
	sbc	hl, hl
	push	hl
	ld	hl, 2
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jr	nz, BB25_107
	or	a, a
	sbc	hl, hl
	ld	a, (ix - 9)
	ld	l, a
	ld	bc, 3
	call	__imulu
	push	hl
	pop	de
	ld	iy, (ix + 15)
	add	iy, de
	ld	(iy), 4
	ld	l, 2
	ld	(ix - 10), l
BB25_106:
	ld	b, a
	inc	b
	ld	a, (ix - 10)
	ld	(iy + 1), a
	ld	(iy + 2), 2
	jr	BB25_108
BB25_107:
	ld	b, (ix - 9)
BB25_108:
	ld	a, b
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits
	section	.rodata,"a",@progbits
	private	JTI25_0
JTI25_0:
	dl	BB25_3
	dl	BB25_5
	dl	BB25_15
	dl	BB25_16
	dl	BB25_18
	dl	BB25_19

	section	.text,"ax",@progbits
	private	_gen_sliding_moves
_gen_sliding_moves:
	ld	hl, -6
	call	__frameset
	ld	bc, 0
	xor	a, a
BB26_1:
	ld	de, 4
	push	bc
	pop	hl
	or	a, a
	sbc	hl, de
	jp	z, BB26_16
	ld	e, a
	ld	hl, (ix + 15)
	add	hl, bc
	ld	a, (hl)
	ld	(ix - 2), a
	add	a, (ix + 9)
BB26_3:
	ld	iyl, a
	or	a, a
	sbc	hl, hl
	and	a, -120
	or	a, a
	jr	nz, BB26_9
	ld	(ix - 5), bc
	ld	(ix - 1), e
	push	hl
	pop	bc
	push	af
	ld	a, iyl
	ld	(ix - 6), a
	pop	af
	ld	c, iyl
	ld	iy, (ix + 6)
	add	iy, bc
	ld	c, (iy)
	ld	a, c
	or	a, a
	jr	nz, BB26_10
	ld	a, (ix + 21)
	cp	a, 1
	jr	nz, BB26_7
	ld	e, (ix - 1)
	ld	a, (ix - 6)
	jr	BB26_8
BB26_7:
	ld	e, (ix - 1)
	ld	l, e
	inc	e
	ld	bc, 3
	call	__imulu
	push	hl
	pop	bc
	ld	iy, (ix + 18)
	add	iy, bc
	lea	bc, iy
	ld	a, (ix + 9)
	push	bc
	pop	hl
	ld	(hl), a
	ld	a, (ix - 6)
	push	bc
	pop	iy
	ld	(iy + 1), a
	ld	(iy + 2), 0
BB26_8:
	ld	bc, (ix - 5)
	add	a, (ix - 2)
	jr	BB26_3
BB26_9:
	ld	a, e
	jr	BB26_15
BB26_10:
	ld	a, c
	ld	b, 7
	call	__bshru
	ld	c, a
	ld	a, (ix + 21)
	cp	a, 2
	jr	nz, BB26_12
	ld	a, (ix - 1)
	jr	BB26_14
BB26_12:
	ld	a, c
	ld	c, (ix + 12)
	cp	a, c
	ld	a, (ix - 1)
	jr	z, BB26_14
	ld	l, a
	inc	a
	ld	(ix - 1), a
	ld	bc, 3
	call	__imulu
	push	hl
	pop	bc
	ld	hl, (ix + 18)
	add	hl, bc
	push	hl
	pop	bc
	ld	a, (ix + 9)
	ld	(hl), a
	ld	a, (ix - 6)
	push	bc
	pop	iy
	ld	(iy + 1), a
	ld	a, (ix - 1)
	ld	(iy + 2), 1
BB26_14:
	ld	bc, (ix - 5)
BB26_15:
	inc	bc
	jp	BB26_1
BB26_16:
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_is_square_attacked
_is_square_attacked:
	ld	hl, -4
	call	__frameset
	ld	l, 0
	ld	de, 0
	ld	a, (ix + 12)
	or	a, a
	ld	(ix - 1), l
	jr	z, BB27_2
	ld	a, -128
	ld	(ix - 1), a
BB27_2:
	ld	iy, 16
BB27_3:
	ld	bc, 8
	push	de
	pop	hl
	or	a, a
	sbc	hl, bc
	jr	z, BB27_9
	ld	hl, _knight_offsets
	add	hl, de
	ld	a, (hl)
	add	a, (ix + 9)
	ld	l, a
	ld	bc, 0
	and	a, -120
	or	a, a
	jr	nz, BB27_8
	ld	c, l
	ld	hl, (ix + 6)
	add	hl, bc
	ld	l, (hl)
	ld	a, l
	or	a, a
	jr	z, BB27_8
	ld	a, l
	and	a, -128
	ld	h, a
	ld	a, l
	and	a, 7
	ld	l, a
	ld	a, h
	ld	c, (ix - 1)
	cp	a, c
	jr	nz, BB27_8
	ld	a, l
	cp	a, 2
	jr	z, BB27_15
BB27_8:
	inc	de
	jr	BB27_3
BB27_9:
	ld	a, (ix + 12)
	or	a, a
	jr	z, BB27_11
	ld	iy, -16
BB27_11:
	ld	e, (ix - 1)
	inc	e
	ld	bc, 0
	ld	c, (ix + 9)
	add	iy, bc
	lea	hl, iy
	ld	bc, 255
	add	hl, bc
	ld	a, l
	and	a, -120
	or	a, a
	jr	nz, BB27_13
	ld	bc, 255
	call	__iand
	push	hl
	pop	bc
	ld	hl, (ix + 6)
	add	hl, bc
	ld	bc, 255
	ld	a, (hl)
	cp	a, e
	jr	z, BB27_15
BB27_13:
	inc	iy
	ld	a, iyl
	and	a, -120
	or	a, a
	jr	nz, BB27_16
	lea	hl, iy
	call	__iand
	push	hl
	pop	bc
	ld	hl, (ix + 6)
	add	hl, bc
	ld	a, (hl)
	cp	a, e
	jr	nz, BB27_16
BB27_15:
	ld	a, 1
	jp	BB27_41
BB27_16:
	ld	de, 0
BB27_17:
	ld	bc, 8
	push	de
	pop	hl
	or	a, a
	sbc	hl, bc
	jr	z, BB27_23
	ld	hl, _king_offsets
	add	hl, de
	ld	a, (hl)
	add	a, (ix + 9)
	ld	l, a
	and	a, -120
	or	a, a
	jr	nz, BB27_22
	ld	bc, 0
	ld	c, l
	ld	hl, (ix + 6)
	add	hl, bc
	ld	h, (hl)
	ld	a, h
	and	a, -128
	ld	c, a
	ld	a, h
	and	a, 7
	ld	l, a
	ld	a, h
	or	a, a
	jr	z, BB27_22
	ld	a, c
	ld	c, (ix - 1)
	cp	a, c
	jr	nz, BB27_22
	ld	a, l
	cp	a, 6
	jr	z, BB27_15
BB27_22:
	inc	de
	jr	BB27_17
BB27_23:
	ld	bc, 4
	ld	de, 0
	push	de
	pop	iy
BB27_24:
	push	de
	pop	hl
	or	a, a
	sbc	hl, bc
	jr	z, BB27_32
	ld	hl, _bishop_offsets
	ld	(ix - 4), de
	add	hl, de
	ld	b, (hl)
	ld	a, b
	add	a, (ix + 9)
	ld	c, a
BB27_26:
	ld	a, c
	and	a, -120
	or	a, a
	jr	nz, BB27_31
	ld	de, 0
	ld	e, c
	ld	hl, (ix + 6)
	add	hl, de
	ld	iy, 0
	ld	h, (hl)
	ld	a, c
	add	a, b
	ld	c, a
	ld	a, h
	or	a, a
	jr	z, BB27_26
	ld	a, h
	and	a, -128
	ld	l, (ix - 1)
	cp	a, l
	jr	nz, BB27_31
	ld	a, h
	and	a, 7
	cp	a, 3
	jp	z, BB27_15
	cp	a, 5
	jp	z, BB27_15
BB27_31:
	ld	de, (ix - 4)
	inc	de
	ld	bc, 4
	jr	BB27_24
BB27_32:
	lea	de, iy
BB27_33:
	push	de
	pop	hl
	or	a, a
	sbc	hl, bc
	jr	z, BB27_40
	ld	hl, _rook_offsets
	add	hl, de
	ld	b, (hl)
	ld	a, b
	add	a, (ix + 9)
	ld	c, a
BB27_35:
	ld	a, c
	and	a, -120
	or	a, a
	jr	nz, BB27_39
	push	de
	pop	iy
	ld	de, 0
	ld	e, c
	ld	hl, (ix + 6)
	add	hl, de
	lea	de, iy
	ld	h, (hl)
	ld	a, c
	add	a, b
	ld	c, a
	ld	a, h
	or	a, a
	jr	z, BB27_35
	ld	a, h
	and	a, -128
	ld	c, a
	ld	a, h
	and	a, 6
	ld	l, a
	ld	a, c
	ld	c, (ix - 1)
	cp	a, c
	jr	nz, BB27_39
	ld	a, l
	cp	a, 4
	jp	z, BB27_15
BB27_39:
	inc	de
	ld	bc, 4
	jr	BB27_33
BB27_40:
	xor	a, a
BB27_41:
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_generate_moves_from
_generate_moves_from:
	call	__frameset0
	ld	hl, (ix + 6)
	ld	b, 7
	ld	de, 0
	ld	e, (ix + 9)
	push	hl
	pop	iy
	add	iy, de
	ld	c, (iy)
	push	hl
	pop	iy
	ld	de, 164
	add	hl, de
	ld	d, (hl)
	ld	a, c
	call	__bshru
	ld	e, a
	ld	a, c
	or	a, a
	jr	z, BB28_3
	ld	a, e
	cp	a, d
	ld	a, 0
	jr	nz, BB28_4
	ld	hl, (ix + 12)
	ld	bc, 0
	push	bc
	push	hl
	ld	l, d
	push	hl
	ld	l, (ix + 9)
	push	hl
	push	iy
	call	_gen_piece_moves
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	jr	BB28_4
BB28_3:
	xor	a, a
BB28_4:
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_search_history_push
_search_history_push:
	call	__frameset0
	ld	iy, _pos_history_count
	ld	de, (iy)
	ld.sis	bc, 512
	ld	l, e
	ld	h, d
	or	a, a
	sbc.sis	hl, bc
	jr	nc, BB29_2
	ld	a, (ix + 9)
	or	a, a
	sbc	hl, hl
	ld	l, e
	ld	h, d
	inc.sis	de
	ld	(iy), e
	ld	(iy + 1), d
	ld	c, 2
	call	__ishl
	push	hl
	pop	de
	ld	iy, _pos_history
	add	iy, de
	ld	hl, (ix + 6)
	ld	(iy), hl
	ld	(iy + 3), a
BB29_2:
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_search_history_pop
_search_history_pop:
	ld	iy, _pos_history_count
	ld	hl, (iy)
	add.sis	hl, bc
	or	a, a
	sbc.sis	hl, bc
	jr	z, BB30_2
	dec.sis	hl
	ld	(iy), l
	ld	(iy + 1), h
BB30_2:
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_search_history_clear
_search_history_clear:
	ld.sis	bc, 0
	ld	iy, _pos_history_count
	ld	de, _pos_history_irreversible
	ld	(iy), c
	ld	(iy + 1), b
	ex	de, hl
	ld	(hl), c
	inc	hl
	ld	(hl), b
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_search_history_set_irreversible
_search_history_set_irreversible:
	ld	hl, _pos_history_count
	ld	iy, _pos_history_irreversible
	ld	hl, (hl)
	ld	(iy), l
	ld	(iy + 1), h
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_search_init
_search_init:
	ld	hl, -6
	call	__frameset
	ld	hl, _tt
	xor	a, a
	ld.sis	iy, 0
	ld	de, _history
	ld	(ix - 3), de
	ld	(_tt), a
	push	hl
	pop	de
	inc	de
	ld	bc, 32767
	ldir
	ld	hl, _pos_history_count
	push	de
	ld	e, iyl
	ld	d, iyh
	ld	(hl), e
	inc	hl
	ld	(hl), d
	pop	de
	ld	hl, _pos_history_irreversible
	push	de
	ld	e, iyl
	ld	d, iyh
	ld	(hl), e
	inc	hl
	ld	(hl), d
	pop	de
	ld	hl, _move_sp
	push	de
	ld	e, iyl
	ld	d, iyh
	ld	(hl), e
	inc	hl
	ld	(hl), d
	pop	de
	ld	de, 384
	ld	iy, 0
BB33_1:
	lea	hl, iy
	or	a, a
	sbc	hl, de
	jr	z, BB33_3
	lea	bc, iy
	lea	hl, iy
	ld	iy, _killers+2
	add	iy, bc
	ld	(iy - 2), -1
	ld	(iy - 1), -1
	ld	(iy), 0
	ld	(iy + 1), -1
	ld	(iy + 2), -1
	ld	(iy + 3), 0
	push	hl
	pop	iy
	ld	bc, 6
	add	iy, bc
	jr	BB33_1
BB33_3:
	ld	bc, 0
BB33_4:
	push	bc
	pop	hl
	ld	de, 2
	or	a, a
	sbc	hl, de
	jr	z, BB33_9
	ld	(ix - 6), bc
	ld	iy, 0
BB33_6:
	lea	hl, iy
	ld	de, 256
	or	a, a
	sbc	hl, de
	jr	z, BB33_8
	lea	bc, iy
	ld	hl, (ix - 3)
	add	hl, bc
	ld.sis	bc, 0
	ld	(hl), c
	inc	hl
	ld	(hl), b
	ld	bc, 2
	add	iy, bc
	jr	BB33_6
BB33_8:
	ld	bc, (ix - 6)
	inc	bc
	ld	hl, (ix - 3)
	ld	de, 256
	add	hl, de
	ld	(ix - 3), hl
	jr	BB33_4
BB33_9:
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_search_go
_search_go:
	ld	hl, -6
	call	__frameset
	ld	iy, (ix + 12)
	or	a, a
	sbc	hl, hl
	ld	b, h
	ld	c, -1
	ld.sis	de, 0
	ld	(_search_nodes), hl
	ld	a, b
	ld	(_search_nodes+3), a
	ld	(_search_stopped), a
	ld	a, c
	ld	(_search_best_root_move), a
	ld	(_search_best_root_move+1), a
	ld	a, b
	ld	(_search_best_root_move+2), a
	ld	hl, _move_sp
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	hl, (iy + 5)
	ld	(ix - 6), hl
	ld	(_search_time_fn), hl
	ld	hl, (iy + 1)
	ld	d, (iy + 4)
	ld	(ix - 3), hl
	ld	e, d
	call	__lcmpzero
	jr	z, BB34_3
	ld	iy, (ix - 6)
	lea	hl, iy
	add	hl, bc
	or	a, a
	sbc	hl, bc
	ld	hl, 0
	ld	a, b
	jr	z, BB34_4
	call	__indcall
	push	hl
	pop	bc
	ld	a, e
	ld	hl, (ix + 12)
	push	hl
	pop	iy
	ld	hl, (iy + 1)
	ld	d, (iy + 4)
	ld	(ix - 3), hl
	ld	e, d
	call	__ladd
	ld	b, 0
	ld	a, e
	jr	BB34_4
BB34_3:
	or	a, a
	sbc	hl, hl
	ld	a, b
BB34_4:
	ld	(_search_deadline), hl
	ld	(_search_deadline+3), a
	ld	hl, (ix + 12)
	ld	c, (hl)
	ld	hl, (ix - 3)
	ld	e, d
	call	__lcmpzero
	jr	z, BB34_6
	ld	e, 0
	jr	BB34_7
BB34_6:
	ld	e, 1
BB34_7:
	or	a, a
	sbc	hl, hl
	ld	a, c
	or	a, a
	jr	z, BB34_9
	ld	e, c
BB34_9:
	ld	a, e
	or	a, a
	jr	nz, BB34_11
	ld	e, 63
BB34_11:
	ld	c, 1
	ld	iy, (ix + 6)
	ld	(iy), -1
	ld	(iy + 1), -1
	ld	(iy + 2), hl
	ld	(iy + 5), hl
	ld.sis	hl, 0
	ld	(iy + 8), l
	ld	(iy + 9), h
BB34_12:
	ld	a, e
	cp	a, c
	call	pe, __setflag
	jp	m, BB34_17
	ld	a, -1
	ld	(_search_best_root_move), a
	ld	(_search_best_root_move+1), a
	ld	a, b
	ld	(_search_best_root_move+2), a
	ld	hl, 1
	push	hl
	dec	hl
	push	hl
	ld	hl, 30000
	push	hl
	ld	hl, -30000
	push	hl
	ld	l, c
	push	hl
	ld	hl, (ix + 9)
	push	hl
	ld	(ix - 3), e
	ld	(ix - 6), c
	call	_negamax
	ld	c, (ix - 6)
	ld	b, 0
	pop	de
	pop	de
	pop	de
	pop	de
	pop	de
	pop	de
	ld	e, (ix - 3)
	ld	a, (_search_stopped)
	bit	0, a
	jr	nz, BB34_17
	ld	a, (_search_best_root_move)
	cp	a, -1
	jr	z, BB34_16
	ld	iy, _search_best_root_move
	ld	a, (iy)
	ld	iy, (ix + 6)
	ld	(iy), a
	ld	a, (_search_best_root_move+1)
	ld	(iy + 1), a
	ld	a, (_search_best_root_move+2)
	ld	(iy + 2), a
	ld	(iy + 3), l
	ld	(iy + 4), h
	ld	(iy + 5), c
	ld	hl, (_search_nodes)
	ld	a, (_search_nodes+3)
	ld	(iy + 6), hl
	ld	(iy + 9), a
BB34_16:
	inc	c
	jp	BB34_12
BB34_17:
	ld	a, (_search_best_root_move)
	ld	e, a
	ld	hl, (ix + 6)
	ld	a, (hl)
	cp	a, -1
	jr	nz, BB34_20
	ld	a, e
	cp	a, -1
	jr	z, BB34_20
	ld	hl, _search_best_root_move
	ld	a, (hl)
	ld	iy, (ix + 6)
	ld	(iy), a
	ld	a, (_search_best_root_move+1)
	ld	(iy + 1), a
	ld	a, (_search_best_root_move+2)
	ld	(iy + 2), a
	ld.sis	hl, 0
	ld	(iy + 3), l
	ld	(iy + 4), h
	ld	(iy + 5), h
	ld	hl, (_search_nodes)
	ld	a, (_search_nodes+3)
	ld	(iy + 6), hl
	ld	(iy + 9), a
BB34_20:
	ld	hl, (ix + 6)
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_negamax
_negamax:
	ld	hl, -96
	call	__frameset
	ld.sis	iy, 0
	ld	a, (_search_stopped)
	bit	0, a
	jp	nz, BB35_34
	ld	iy, _search_nodes
	ld	bc, 1
	ld	hl, (_search_nodes)
	lea	iy, iy + 3
	ld	e, (iy)
	ld	iyl, b
	ld	a, iyl
	call	__ladd
	ld	a, e
	ld	(_search_nodes), hl
	ld	(_search_nodes+3), a
	call	_check_time
	ld	a, (_search_stopped)
	bit	0, a
	jr	z, BB35_3
BB35_2:
	ld.sis	iy, 0
	jp	BB35_34
BB35_3:
	ld	iy, (ix + 6)
	ld	hl, (ix + 12)
	ld	(ix - 38), hl
	ld	h, 0
	ld	a, (ix + 18)
	or	a, a
	ld	bc, 170
	jp	nz, BB35_9
	ld	a, (ix + 9)
	cp	a, 1
	call	pe, __setflag
	jp	m, BB35_12
	ld	e, l
	ld	d, h
	ld	iy, (ix + 6)
	add	iy, bc
	ld	bc, (iy)
	lea	hl, iy + 3
	ld	iy, (ix + 6)
	ld	l, (hl)
BB35_6:
	ld	(ix - 35), bc
	lea	bc, ix - 5
	ld	(ix - 41), bc
	ld	e, (ix + 18)
	ld	(ix - 32), de
	ld	(ix - 5), -1
	ld	(ix - 4), -1
	ld	(ix - 3), 0
	ld	de, 174
	add	iy, de
	ld	(ix - 47), iy
	ld	de, (iy)
	pea	ix - 9
	pea	ix - 8
	pea	ix - 2
	pea	ix - 7
	push	de
	push	hl
	ld	hl, (ix - 35)
	push	hl
	call	_tt_probe
	ld	iy, (ix + 6)
	ld	hl, 21
	add	hl, sp
	ld	sp, hl
	or	a, a
	ld.sis	de, 28937
	jp	z, BB35_23
	ld	iy, (ix - 7)
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	jp	m, BB35_18
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	ld	de, (ix - 32)
	or	a, a
	sbc.sis	hl, de
	ld	e, l
	ld	d, h
	ld	(ix - 7), e
	ld	(ix - 6), d
	jp	BB35_21
BB35_9:
	add	iy, bc
	ld	hl, (iy)
	ld	(ix - 35), hl
	lea	hl, iy + 3
	ld	a, (hl)
	ld	(ix - 41), a
	ld	hl, _pos_history_count
	ld	bc, (hl)
	ld.sis	de, 3
	ld	l, c
	ld	h, b
	or	a, a
	sbc.sis	hl, de
	jr	nc, BB35_13
BB35_10:
	ld	de, 167
	ld	iy, (ix + 6)
	lea	hl, iy
	add	hl, de
	ld	a, (hl)
	cp	a, 100
	jp	nc, BB35_2
	ld	a, (ix + 9)
	cp	a, 1
	call	pe, __setflag
	ld	d, 0
	jp	p, BB35_16
BB35_12:
	or	a, a
	sbc	hl, hl
	push	hl
	ld	l, (ix + 18)
	push	hl
	ld	hl, (ix + 15)
	push	hl
	ld	hl, (ix + 12)
	push	hl
	push	iy
	call	_quiescence
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	jp	BB35_33
BB35_13:
	ld	iy, _pos_history_irreversible
	ld	de, 0
	push	de
	pop	hl
	ld	l, c
	ld	h, b
	ld	(ix - 32), hl
	ld	bc, (iy)
	ld	e, c
	ld	d, b
	ld	(ix - 44), de
	ld	c, 2
	call	__ishl
	push	hl
	pop	de
	ld	iy, _pos_history
	add	iy, de
	lea	bc, iy - 12
	ld	hl, (ix - 32)
	dec	hl
	ld	(ix - 32), hl
	ld	a, (ix - 41)
BB35_14:
	ld	hl, -2
	ex	de, hl
	ld	hl, (ix - 32)
	add	hl, de
	ld	(ix - 32), hl
	ld	de, (ix - 44)
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	m, BB35_10
	push	bc
	pop	iy
	lea	hl, iy - 8
	ld	(ix - 47), hl
	push	bc
	pop	hl
	ld	hl, (hl)
	ld	e, (iy + 3)
	ld	bc, (ix - 35)
	call	__lcmpu
	ld	bc, (ix - 47)
	jp	z, BB35_2
	jr	BB35_14
BB35_16:
	ld	a, (ix + 18)
	cp	a, 64
	ld	l, (ix - 41)
	ld	bc, (ix - 35)
	jp	c, BB35_6
	push	iy
	jp	BB35_32
BB35_18:
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	ld.sis	de, -28936
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	jp	p, BB35_20
	ld	de, (ix - 32)
	add.sis	iy, de
	push	iy
	ex	(sp), hl
	ld	(ix - 7), l
	ld	(ix - 6), h
	pop	hl
BB35_20:
	ld	e, iyl
	ld	d, iyh
BB35_21:
	ld	a, (ix - 8)
	ld	l, (ix + 9)
	cp	a, l
	call	pe, __setflag
	jp	p, BB35_69
BB35_22:
	ld	hl, (ix - 2)
	add.sis	hl, bc
	or	a, a
	sbc.sis	hl, bc
	push	hl
	ld	hl, (ix - 41)
	push	hl
	call	nz, _tt_unpack_move
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	push	hl
	pop	iy
BB35_23:
	ld	de, 164
	lea	hl, iy
	add	hl, de
	ld	(ix - 72), hl
	ld	a, (hl)
	or	a, a
	sbc	hl, hl
	push	hl
	pop	bc
	ld	c, a
	ld	de, 162
	lea	hl, iy
	ld	(ix - 35), bc
	add	hl, bc
	ld	(ix - 50), hl
	add	hl, de
	ld	l, (hl)
	xor	a, 1
	ld	(ix - 53), a
	ld	e, a
	push	de
	push	hl
	push	iy
	call	_is_square_attacked
	ld	b, a
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jr	nz, BB35_25
	ld	a, 0
	jr	BB35_26
BB35_25:
	ld	a, 1
BB35_26:
	ld	l, (ix + 9)
	add	a, l
	ld	(ix - 44), a
	ld	a, (ix + 18)
	or	a, a
	ld	(ix - 63), b
	jr	z, BB35_30
	ld	a, (ix + 21)
	or	a, a
	jr	z, BB35_30
	ld	a, b
	or	a, a
	jr	nz, BB35_30
	ld	a, (ix - 44)
	cp	a, 3
	call	pe, __setflag
	jp	p, BB35_84
BB35_30:
	ld	de, _raw_moves_buf
	or	a, a
	sbc	hl, hl
	push	hl
	ld	(ix - 47), de
	push	de
	ld	hl, (ix + 6)
	push	hl
	call	_generate_moves
	ld	bc, 0
	ld	e, a
	pop	hl
	pop	hl
	pop	hl
	ld	hl, _move_sp
	ld	hl, (hl)
	push	bc
	pop	iy
	ld	(ix - 59), hl
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
	ld	(ix - 50), de
	ld	c, e
	lea	hl, iy
	add	hl, bc
	ld	de, 2049
	ld	(ix - 56), hl
	or	a, a
	sbc	hl, de
	jr	c, BB35_35
	ld	hl, (ix + 6)
	push	hl
BB35_32:
	call	_evaluate
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
BB35_33:
	pop	hl
BB35_34:
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	ld	sp, ix
	pop	ix
	ret
BB35_35:
	ld	a, 2
	ld	(ix - 75), a
	ld.sis	hl, -30000
	ld	(ix - 69), hl
	lea	hl, ix - 23
	ld	(ix - 66), hl
	lea	hl, ix - 26
	ld	(ix - 78), hl
	lea	hl, ix - 29
	ld	(ix - 62), hl
	ld	(ix - 35), bc
	ld	bc, 5
	lea	hl, iy
	call	__imulu
	push	hl
	pop	de
	ld	iy, _move_pool
	add	iy, de
	ld	hl, (ix - 35)
	ld	(ix - 53), iy
	lea	de, iy
BB35_36:
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jr	z, BB35_38
	ld	iy, (ix - 47)
	ld	a, (iy)
	lea	bc, iy
	push	de
	pop	iy
	ld	(iy), a
	push	bc
	pop	iy
	ld	a, (iy + 1)
	push	de
	pop	iy
	ld	(iy + 1), a
	push	bc
	pop	iy
	ld	a, (iy + 2)
	push	de
	pop	iy
	ld	(iy + 2), a
	ld.sis	de, 0
	ld	(iy + 3), e
	ld	(iy + 4), d
	lea	iy, iy + 5
	lea	de, iy
	push	bc
	pop	iy
	lea	iy, iy + 3
	ld	(ix - 47), iy
	dec	hl
	jr	BB35_36
BB35_38:
	ld	hl, _move_sp
	ld	de, (ix - 56)
	ld	(hl), e
	inc	hl
	ld	(hl), d
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	hl, (ix - 41)
	ld	a, (hl)
	ld	(iy), a
	ld	a, (ix - 4)
	ld	(iy + 1), a
	ld	a, (ix - 3)
	ld	(iy + 2), a
	ld	l, (ix + 18)
	push	hl
	ld	hl, (ix - 50)
	push	hl
	ld	hl, (ix - 53)
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_score_moves
	ld	iy, (ix - 35)
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	(ix - 26), -1
	ld	(ix - 25), -1
	ld	(ix - 24), 0
	ld	a, (ix - 44)
	ld	e, a
	dec	e
	ld	hl, (ix + 15)
	call	__sneg
	ld	(ix - 81), hl
	ld	l, (ix + 18)
	inc	l
	add	a, -2
	ld	c, a
	ld	(ix - 93), bc
	ld	c, l
	ld	(ix - 96), bc
	lea	bc, iy
	ld	(ix - 84), hl
	ld	l, e
	ld	(ix - 87), hl
	ld	hl, (ix - 53)
	ld	(ix - 41), hl
	ld	e, 0
	ld	a, e
BB35_39:
	ld	iy, (ix - 32)
	push	bc
	pop	hl
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jp	z, BB35_65
	ld	(ix - 56), a
	ld	(ix - 35), bc
	ld	(ix - 90), de
	push	de
	ld	hl, (ix - 50)
	push	hl
	ld	hl, (ix - 53)
	push	hl
	call	_pick_move
	pop	hl
	pop	hl
	pop	hl
	ld	iy, (ix - 41)
	ld	a, (iy)
	ld	hl, (ix - 62)
	ld	(hl), a
	ld	a, (iy + 1)
	ld	(ix - 28), a
	ld	a, (iy + 2)
	ld	(ix - 27), a
	push	hl
	push	hl
	ex	de, hl
	ld	hl, 0
	add	hl, sp
	ex	de, hl
	ld	a, (iy)
	push	de
	pop	hl
	ld	(hl), a
	ld	a, (iy + 1)
	lea	hl, iy
	push	de
	pop	iy
	ld	(iy + 1), a
	push	hl
	pop	iy
	ld	a, (iy + 2)
	push	de
	pop	iy
	ld	(iy + 2), a
	ld	hl, (ix - 66)
	ld	(iy + 3), hl
	ld	hl, (ix + 6)
	push	hl
	call	_board_make
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	push	hl
	call	_board_is_legal.23
	pop	hl
	or	a, a
	jr	nz, BB35_44
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	hl, (ix - 62)
	ld	a, (hl)
	ld	(iy), a
	ld	a, (ix - 28)
	ld	(iy + 1), a
	ld	a, (ix - 27)
	ld	(iy + 2), a
	ld	hl, (ix - 66)
	ld	(iy + 3), hl
	ld	hl, (ix + 6)
	push	hl
	call	_board_unmake
	pop	hl
	pop	hl
	pop	hl
BB35_42:
	ld	de, (ix - 90)
	ld	bc, (ix - 35)
	ld	a, (ix - 56)
BB35_43:
	inc	e
	ld	iy, (ix - 41)
	lea	iy, iy + 5
	ld	(ix - 41), iy
	dec	bc
	jp	BB35_39
BB35_44:
	ld	a, (ix - 56)
	inc	a
	ld	(ix - 56), a
	ld	iy, (ix + 6)
	ld	de, 170
	add	iy, de
	ld	de, (iy)
	lea	hl, iy + 3
	ld	l, (hl)
	push	hl
	push	de
	call	_search_history_push
	pop	hl
	pop	hl
	ld	a, (ix - 44)
	cp	a, 3
	call	pe, __setflag
	jp	m, BB35_51
	ld	a, (ix - 63)
	or	a, a
	jp	nz, BB35_51
	ld	a, (ix - 56)
	cp	a, 5
	jp	c, BB35_51
	ld	a, (ix - 27)
	and	a, 9
	or	a, a
	jp	nz, BB35_51
	ld	hl, (ix - 38)
	call	__sneg
	ld	e, l
	ld	d, h
	ld	hl, 1
	push	hl
	ld	hl, (ix - 96)
	push	hl
	ld	(ix - 47), de
	push	de
	ld	hl, (ix - 81)
	push	hl
	ld	hl, (ix - 93)
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_negamax
	pop	de
	pop	de
	pop	de
	pop	de
	pop	de
	pop	de
	call	__sneg
	ld	c, l
	ld	b, h
	ld	a, (_search_stopped)
	ld	hl, (ix - 38)
	or	a, a
	sbc.sis	hl, bc
	call	pe, __setflag
	jp	p, BB35_53
	bit	0, a
	ld	hl, _pos_history_count
	ld	de, (ix - 66)
	jp	nz, BB35_54
	ld	de, (ix - 47)
	jp	BB35_52
BB35_51:
	ld	hl, (ix - 38)
	call	__sneg
	ld	e, l
	ld	d, h
BB35_52:
	ld	hl, 1
	push	hl
	ld	hl, (ix - 84)
	push	hl
	push	de
	ld	hl, (ix - 81)
	push	hl
	ld	hl, (ix - 87)
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_negamax
	pop	de
	pop	de
	pop	de
	pop	de
	pop	de
	pop	de
	call	__sneg
	ld	c, l
	ld	b, h
BB35_53:
	ld	hl, _pos_history_count
	ld	de, (ix - 66)
BB35_54:
	ld	(ix - 47), bc
	ld	hl, (hl)
	add.sis	hl, bc
	or	a, a
	sbc.sis	hl, bc
	jr	z, BB35_56
	dec.sis	hl
	ld	iy, _pos_history_count
	ld	(iy), l
	ld	(iy + 1), h
BB35_56:
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	hl, (ix - 62)
	ld	a, (hl)
	ld	(iy), a
	ld	a, (ix - 28)
	ld	(iy + 1), a
	ld	a, (ix - 27)
	ld	(iy + 2), a
	ld	(iy + 3), de
	ld	hl, (ix + 6)
	push	hl
	call	_board_unmake
	pop	hl
	pop	hl
	pop	hl
	ld	a, (_search_stopped)
	bit	0, a
	jp	nz, BB35_79
	ld	hl, (ix - 69)
	ld	de, (ix - 47)
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	jp	p, BB35_42
	ld	hl, (ix - 62)
	ld	a, (hl)
	ld	hl, (ix - 78)
	ld	(hl), a
	ld	a, (ix - 28)
	ld	(ix - 25), a
	ld	a, (ix - 27)
	ld	(ix - 24), a
	ld	a, (ix + 18)
	or	a, a
	ld	iy, (ix - 32)
	ld	bc, (ix - 35)
	jr	nz, BB35_60
	ld	hl, (ix - 62)
	ld	a, (hl)
	ld	hl, _search_best_root_move
	ld	(hl), a
	ld	a, (ix - 28)
	ld	(_search_best_root_move+1), a
	ld	a, (ix - 27)
	ld	(_search_best_root_move+2), a
BB35_60:
	ld	hl, (ix - 38)
	ld	de, (ix - 47)
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	ld	a, (ix - 56)
	jp	p, BB35_63
	ld	hl, (ix - 47)
	ld	bc, (ix + 15)
	or	a, a
	sbc.sis	hl, bc
	call	pe, __setflag
	jp	p, BB35_95
	ld	l, 1
	ld	(ix - 75), l
	ld	de, (ix - 47)
	ld	(ix - 69), de
	ld	l, e
	ld	h, d
	ld	(ix - 38), hl
	ld	bc, (ix - 35)
	jr	BB35_64
BB35_63:
	ld	de, (ix - 47)
	ld	(ix - 69), de
BB35_64:
	ld	de, (ix - 90)
	jp	BB35_43
BB35_65:
	ld	e, (ix - 75)
	ld	hl, (ix - 69)
	ld	(ix - 47), hl
	ld	bc, (ix - 59)
BB35_66:
	ld	hl, _move_sp
	ld	(hl), c
	inc	hl
	ld	(hl), b
	or	a, a
	jr	nz, BB35_71
	ld.sis	de, -29000
	add.sis	iy, de
	ld	a, (ix - 63)
	or	a, a
	ld.sis	hl, 0
	jp	nz, BB35_34
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
	jp	BB35_34
BB35_69:
	ld	a, (ix - 9)
	cp	a, 1
	jp	nz, BB35_76
	ld	iyl, e
	ld	iyh, d
	jp	BB35_34
BB35_71:
	ld	(ix - 35), e
	ld	bc, (ix - 47)
	ld	l, c
	ld	h, b
	ld.sis	de, -28936
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	jp	m, BB35_73
	ld.sis	hl, 0
BB35_73:
	call	__sneg
	ld	e, l
	ld	d, h
	ld	l, c
	ld	h, b
	ld.sis	bc, 28937
	or	a, a
	sbc.sis	hl, bc
	call	pe, __setflag
	jp	p, BB35_75
	ld	iyl, e
	ld	iyh, d
BB35_75:
	ld	de, (ix - 47)
	add.sis	iy, de
	ld	(ix - 32), iy
	ld	hl, (ix + 6)
	push	hl
	pop	iy
	ld	de, 170
	add	hl, de
	ld	hl, (hl)
	ld	(ix - 41), hl
	ld	de, 174
	add	iy, de
	ld	hl, (iy)
	ld	(ix - 38), hl
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	hl, (ix - 78)
	ld	a, (hl)
	ld	(iy), a
	ld	a, (ix - 25)
	ld	(iy + 1), a
	ld	a, (ix - 24)
	ld	(iy + 2), a
	call	_tt_pack_move
	ld	e, l
	ld	d, h
	pop	hl
	ld	hl, (ix - 41)
	ld	bc, 4095
	call	__iand
	ld	c, 3
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _tt
	add	iy, bc
	ld	hl, (ix - 38)
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix - 32)
	ld	(iy + 2), l
	ld	(iy + 3), h
	ld	(iy + 4), e
	ld	(iy + 5), d
	ld	a, (ix - 44)
	ld	(iy + 6), a
	ld	a, (ix - 35)
	ld	(iy + 7), a
	ld	iy, (ix - 47)
	jp	BB35_34
BB35_76:
	cp	a, 3
	jr	nz, BB35_80
	ld	l, e
	ld	h, d
	ld	de, (ix + 15)
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	jp	m, BB35_22
BB35_78:
	ld	hl, (ix + 15)
	jp	BB35_83
BB35_79:
	ld	hl, _move_sp
	ld	de, (ix - 59)
	ld	(hl), e
	inc	hl
	ld	(hl), d
	jp	BB35_2
BB35_80:
	cp	a, 2
	jp	nz, BB35_22
	ld	hl, (ix + 12)
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	jp	m, BB35_22
	ld	hl, (ix + 12)
BB35_83:
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
	jp	BB35_34
BB35_84:
	ld	de, 160
	ld	hl, (ix - 50)
	add	hl, de
	ld	iy, 0
	push	af
	ld	a, (hl)
	ld	iyl, a
	pop	af
	ld	c, 4
	ld	hl, (ix - 35)
	call	__ishl
	ld	de, 128
	add	hl, de
	lea	de, iy
	ld	(ix - 35), hl
BB35_85:
	push	de
	pop	hl
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jp	z, BB35_30
	ld	iy, (ix + 6)
	lea	hl, iy
	ld	bc, (ix - 35)
	add	hl, bc
	ld	bc, 0
	ld	c, (hl)
	add	iy, bc
	ld	a, (iy)
	and	a, 7
	cp	a, 1
	jr	z, BB35_88
	cp	a, 6
	jr	nz, BB35_89
BB35_88:
	ld	hl, (ix - 35)
	inc	hl
	ld	(ix - 35), hl
	dec	de
	jr	BB35_85
BB35_89:
	ld	de, 166
	ld	hl, (ix + 6)
	push	hl
	pop	iy
	add	hl, de
	ld	a, (hl)
	ld	(ix - 50), a
	ld	de, 170
	add	iy, de
	ld	bc, (iy)
	lea	hl, iy + 3
	ld	(ix - 35), hl
	ld	a, (hl)
	ld	(ix - 56), a
	ld	hl, (ix - 47)
	ld	hl, (hl)
	ld	(ix - 59), hl
	ld	hl, (ix + 6)
	ld	de, 164
	add	hl, de
	ld	(ix - 69), hl
	ld	a, (ix - 53)
	ld	(hl), a
	ld	hl, (_zobrist_side)
	ld	a, (_zobrist_side+3)
	ld	e, a
	ld	(ix - 66), bc
	ld	a, (ix - 56)
	call	__lxor
	ld	(ix - 53), hl
	ld	(ix - 62), iy
	ld	(iy), hl
	ld	hl, (ix - 35)
	ld	(hl), e
	ld	hl, _lock_side
	ld	hl, (hl)
	ld	bc, (ix - 59)
	call	__sxor
	ld	a, (ix - 50)
	ld	iy, (ix - 47)
	ld	(iy), l
	ld	(iy + 1), h
	cp	a, -1
	jp	z, BB35_91
	and	a, 7
	ld	d, a
	ld	b, 2
	call	__bshl
	ld	(ix - 75), hl
	or	a, a
	sbc	hl, hl
	push	hl
	pop	bc
	ld	c, a
	ld	(ix - 78), bc
	ld	hl, _zobrist_ep_file
	push	hl
	pop	iy
	add	iy, bc
	ld	hl, (iy)
	ld	a, e
	ld	e, (iy + 3)
	ld	bc, (ix - 53)
	call	__lxor
	ld	(ix - 53), hl
	ld	iy, (ix - 62)
	ld	(iy), hl
	ld	hl, (ix - 35)
	ld	(hl), e
	sla	d
	ld	bc, (ix - 78)
	ld	c, d
	ld	hl, _lock_ep_file
	add	hl, bc
	ld	hl, (hl)
	ld	bc, (ix - 75)
	call	__sxor
	ld	iy, (ix + 6)
	ld	bc, 174
	add	iy, bc
	ld	(iy), l
	ld	(iy + 1), h
BB35_91:
	ld	c, e
	ld	de, (ix + 6)
	ex	de, hl
	ld	de, 166
	add	hl, de
	ld	(ix - 75), hl
	ld	(hl), -1
	push	bc
	ld	hl, (ix - 53)
	push	hl
	call	_search_history_push
	pop	hl
	pop	hl
	ld	a, (ix - 44)
	add	a, -3
	ld	iyl, a
	ld	bc, (ix + 15)
	ld	l, c
	ld	h, b
	call	__sneg
	ld	e, l
	ld	d, h
	ld.sis	hl, 1
	or	a, a
	sbc.sis	hl, bc
	ld	a, (ix + 18)
	inc	a
	ld	bc, 0
	push	bc
	ld	c, a
	push	bc
	push	hl
	push	de
	push	iy
	ld	hl, (ix + 6)
	push	hl
	call	_negamax
	ld	e, l
	ld	d, h
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, _pos_history_count
	ld	hl, (hl)
	add.sis	hl, bc
	or	a, a
	sbc.sis	hl, bc
	jr	z, BB35_93
	dec.sis	hl
	ld	iy, _pos_history_count
	ld	(iy), l
	ld	(iy + 1), h
BB35_93:
	ld	hl, (ix - 69)
	ld	a, (hl)
	xor	a, 1
	ld	(hl), a
	ld	hl, (ix - 62)
	ld	bc, (ix - 66)
	ld	(hl), bc
	ld	hl, (ix - 35)
	ld	a, (ix - 56)
	ld	(hl), a
	ld	hl, (ix - 47)
	ld	bc, (ix - 59)
	ld	(hl), c
	inc	hl
	ld	(hl), b
	ld	a, (ix - 50)
	ld	hl, (ix - 75)
	ld	(hl), a
	ld	a, (_search_stopped)
	bit	0, a
	jp	nz, BB35_2
	ld	l, e
	ld	h, d
	call	__sneg
	ld	de, (ix + 15)
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	jp	m, BB35_30
	jp	BB35_78
BB35_95:
	ld	l, (ix - 27)
	ld	a, l
	and	a, 1
	bit	0, a
	jp	nz, BB35_105
	ld	(ix - 41), l
	ld	a, (ix - 29)
	ld	(ix - 38), a
	ld	a, (ix - 28)
	ld	(ix - 35), a
	ld	de, 0
	ld	e, (ix + 18)
	ld	bc, 6
	push	de
	pop	hl
	call	__imulu
	push	hl
	pop	bc
	ld	iy, _killers
	add	iy, bc
	ld	l, (iy)
	ld	a, (ix - 38)
	cp	a, l
	jr	nz, BB35_99
	ld	l, (iy + 1)
	ld	a, (ix - 35)
	cp	a, l
	jr	nz, BB35_99
	ld	l, (iy + 2)
	ld	a, (ix - 41)
	cp	a, l
	jr	z, BB35_100
BB35_99:
	ld	bc, 6
	ex	de, hl
	call	__imulu
	push	hl
	pop	de
	lea	bc, iy
	ld	iy, _killers
	add	iy, de
	lea	hl, iy + 3
	ld	(ix - 50), hl
	lea	de, iy
	push	bc
	pop	hl
	ld	a, (hl)
	ld	hl, (ix - 50)
	ld	(hl), a
	push	bc
	pop	iy
	ld	a, (iy + 1)
	push	de
	pop	iy
	ld	(iy + 4), a
	push	bc
	pop	iy
	ld	a, (iy + 2)
	push	de
	pop	iy
	ld	(iy + 5), a
	ld	a, (ix - 38)
	push	bc
	pop	iy
	ld	(iy), a
	ld	a, (ix - 35)
	ld	(iy + 1), a
	ld	a, (ix - 41)
	ld	(iy + 2), a
BB35_100:
	ld	hl, (ix - 72)
	ld	a, (hl)
	ld	e, (ix - 44)
	ld	l, e
	rlc	l
	sbc	hl, hl
	ld	l, e
	push	hl
	pop	bc
	call	__imulu
	ld	(ix - 38), hl
	or	a, a
	sbc	hl, hl
	ld	l, a
	ld	de, 0
	ld	e, (ix - 35)
	ld	c, 8
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _history
	add	iy, bc
	ld	c, 1
	ex	de, hl
	call	__ishl
	push	hl
	pop	de
	add	iy, de
	ld	(ix - 35), iy
	ld	iy, (iy)
	ld	a, iyh
	ld	l, a
	rlc	l
	sbc	hl, hl
	push	hl
	pop	bc
	ld	b, a
	ld	c, iyl
	ld	de, (ix - 38)
	push	de
	pop	hl
	call	__imulu
	ld	bc, -16384
	call	__idivs
	add	hl, de
	ld	e, l
	ld	d, h
	add.sis	iy, de
	ld.sis	de, 4000
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	jp	m, BB35_102
	ld.sis	hl, 4000
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
BB35_102:
	ld.sis	de, -3999
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	jp	p, BB35_104
	ld.sis	hl, -4000
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
BB35_104:
	ld	hl, (ix - 35)
	push	de
	ld	e, iyl
	ld	d, iyh
	ld	(hl), e
	inc	hl
	ld	(hl), d
	pop	de
	ld	iy, (ix - 32)
BB35_105:
	ld	l, 3
	ld	e, l
	ld	bc, (ix - 59)
	ld	a, (ix - 56)
	jp	BB35_66
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_check_time
_check_time:
	ld	d, 0
	ld	iy, (_search_time_fn)
	ld	a, (_search_deadline+3)
	lea	hl, iy
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jr	z, BB36_5
	ld	hl, (_search_deadline)
	ld	e, a
	call	__lcmpzero
	jr	z, BB36_5
	ld	bc, 1023
	ld	hl, (_search_nodes)
	ld	a, (_search_nodes+3)
	ld	e, a
	ld	a, d
	call	__land
	call	__lcmpzero
	jr	nz, BB36_5
	call	__indcall
	ld	bc, (_search_deadline)
	ld	a, (_search_deadline+3)
	call	__lcmpu
	jr	c, BB36_5
	ld	a, 1
	ld	(_search_stopped), a
BB36_5:
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_quiescence
_quiescence:
	ld	hl, -56
	call	__frameset
	ld.sis	hl, 0
	ld	a, (_search_stopped)
	bit	0, a
	jr	nz, BB37_3
	ld	iy, _search_nodes
	ld	bc, 1
	ld	hl, (_search_nodes)
	lea	iy, iy + 3
	ld	e, (iy)
	ld	iyl, b
	ld	a, iyl
	call	__ladd
	ld	a, e
	ld	(_search_nodes), hl
	ld	(_search_nodes+3), a
	call	_check_time
	ld	a, (_search_stopped)
	bit	0, a
	jr	z, BB37_4
BB37_2:
	ld.sis	hl, 0
BB37_3:
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
	jr	BB37_8
BB37_4:
	ld	bc, (ix + 6)
	ld	a, (ix + 15)
	cp	a, 64
	jr	nc, BB37_6
	ld	a, (ix + 18)
	cp	a, 8
	jr	c, BB37_9
BB37_6:
	push	bc
BB37_7:
	call	_evaluate
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
	pop	hl
BB37_8:
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	ld	sp, ix
	pop	ix
	ret
BB37_9:
	lea	hl, ix - 14
	ld	(ix - 26), hl
	ld	de, 164
	push	bc
	pop	hl
	add	hl, de
	ld	a, (hl)
	ld	de, 0
	ld	e, a
	ld	iy, 162
	push	bc
	pop	hl
	add	hl, de
	lea	de, iy
	add	hl, de
	ld	l, (hl)
	xor	a, 1
	ld	e, a
	push	de
	push	hl
	push	bc
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jp	nz, BB37_15
	ld	hl, _raw_moves_buf
	ld	(ix - 23), hl
	ld	hl, (ix + 6)
	push	hl
	call	_evaluate
	ld	c, l
	ld	b, h
	pop	hl
	ld	l, c
	ld	h, b
	ld	de, (ix + 12)
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	ex	de, hl
	jp	p, BB37_17
	ld	a, b
	rlc	a
	sbc	hl, hl
	push	hl
	pop	iy
	ld	iyh, b
	ld	iyl, c
	ld	e, c
	ld	d, b
	ld	bc, (ix + 9)
	push	bc
	pop	hl
	ld	c, e
	ld	b, d
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	jp	m, BB37_13
	ld	hl, (ix + 9)
	ld	c, l
	ld	b, h
BB37_13:
	ld	de, 1100
	add	iy, de
	ld	a, b
	ld	l, a
	rlc	l
	sbc	hl, hl
	push	hl
	pop	de
	ld	d, a
	ld	e, c
	lea	hl, iy
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	p, BB37_31
	ld	iyl, c
	ld	iyh, b
	jp	BB37_8
BB37_15:
	or	a, a
	sbc	hl, hl
	push	hl
	ld	hl, _raw_moves_buf
	ld	(ix - 23), hl
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_generate_moves
	ld	c, a
	pop	hl
	pop	hl
	pop	hl
	ld	hl, _move_sp
	ld	hl, (hl)
	ld	de, 0
	push	de
	pop	iy
	ld	(ix - 41), hl
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
	ld	(ix - 35), bc
	ld	e, c
	lea	hl, iy
	add	hl, de
	ld	bc, 2049
	ld	(ix - 38), hl
	or	a, a
	sbc	hl, bc
	ex	de, hl
	jr	c, BB37_18
	ld	hl, (ix + 6)
	push	hl
	jp	BB37_7
BB37_17:
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
	jp	BB37_8
BB37_18:
	lea	de, ix - 17
	ld	(ix - 44), de
	ld	(ix - 29), hl
	ld	bc, 5
	lea	hl, iy
	call	__imulu
	push	hl
	pop	de
	ld	iy, _move_pool
	add	iy, de
	ld	hl, (ix - 29)
	ld	(ix - 32), iy
	lea	de, iy
BB37_19:
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jr	z, BB37_21
	ld	iy, (ix - 23)
	ld	a, (iy)
	lea	bc, iy
	push	de
	pop	iy
	ld	(iy), a
	push	bc
	pop	iy
	ld	a, (iy + 1)
	push	de
	pop	iy
	ld	(iy + 1), a
	push	bc
	pop	iy
	ld	a, (iy + 2)
	push	de
	pop	iy
	ld	(iy + 2), a
	ld.sis	de, 0
	ld	(iy + 3), e
	ld	(iy + 4), d
	lea	iy, iy + 5
	lea	de, iy
	push	bc
	pop	iy
	lea	iy, iy + 3
	ld	(ix - 23), iy
	dec	hl
	jr	BB37_19
BB37_21:
	ld	hl, _move_sp
	ld	de, (ix - 38)
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	(ix - 17), -1
	ld	(ix - 16), -1
	ld	(ix - 15), 0
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	hl, (ix - 44)
	ld	a, (hl)
	ld	(iy), a
	ld	a, (ix - 16)
	ld	(iy + 1), a
	ld	a, (ix - 15)
	ld	(iy + 2), a
	ld	l, (ix + 15)
	push	hl
	ld	hl, (ix - 35)
	push	hl
	ld	hl, (ix - 32)
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_score_moves
	ld	bc, (ix - 29)
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	call	__sneg
	ld	(ix - 47), hl
	ld	a, (ix + 15)
	inc	a
	ld	l, (ix + 18)
	inc	l
	ld	(ix - 50), hl
	ld	l, a
	ld	(ix - 53), hl
	ld	hl, (ix - 32)
	ld	(ix - 23), hl
	ld	e, 0
	ld	a, e
	ld	iy, (ix + 9)
BB37_22:
	push	bc
	pop	hl
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jp	z, BB37_29
	ld	(ix - 56), a
	ld	(ix - 38), iy
	ld	(ix - 29), bc
	ld	(ix - 44), de
	push	de
	ld	hl, (ix - 35)
	push	hl
	ld	hl, (ix - 32)
	push	hl
	call	_pick_move
	pop	hl
	pop	hl
	pop	hl
	push	hl
	push	hl
	ex	de, hl
	ld	hl, 0
	add	hl, sp
	ex	de, hl
	ld	iy, (ix - 23)
	ld	a, (iy)
	push	de
	pop	hl
	ld	(hl), a
	ld	a, (iy + 1)
	lea	hl, iy
	push	de
	pop	iy
	ld	(iy + 1), a
	push	hl
	pop	iy
	ld	(ix - 23), iy
	ld	a, (iy + 2)
	push	de
	pop	iy
	ld	(iy + 2), a
	ld	hl, (ix - 26)
	ld	(iy + 3), hl
	ld	hl, (ix + 6)
	push	hl
	call	_board_make
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	push	hl
	call	_board_is_legal.23
	pop	hl
	or	a, a
	jr	nz, BB37_25
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	de, (ix - 23)
	push	de
	pop	hl
	ld	a, (hl)
	ld	(iy), a
	lea	hl, iy
	push	de
	pop	iy
	ld	a, (iy + 1)
	push	hl
	pop	iy
	ld	(iy + 1), a
	push	de
	pop	iy
	ld	a, (iy + 2)
	push	hl
	pop	iy
	ld	(iy + 2), a
	ld	hl, (ix - 26)
	ld	(iy + 3), hl
	ld	hl, (ix + 6)
	push	hl
	call	_board_unmake
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix - 38)
	ld	a, (ix - 56)
	jp	BB37_28
BB37_25:
	ld	hl, (ix - 38)
	call	__sneg
	ld	de, (ix - 50)
	push	de
	ld	de, (ix - 53)
	push	de
	push	hl
	ld	hl, (ix - 47)
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_quiescence
	pop	de
	pop	de
	pop	de
	pop	de
	pop	de
	call	__sneg
	ld	(ix - 56), hl
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	de, (ix - 23)
	push	de
	pop	hl
	ld	a, (hl)
	ld	(iy), a
	lea	hl, iy
	push	de
	pop	iy
	ld	a, (iy + 1)
	push	hl
	pop	iy
	ld	(iy + 1), a
	push	de
	pop	iy
	ld	a, (iy + 2)
	push	hl
	pop	iy
	ld	(iy + 2), a
	ld	hl, (ix - 26)
	ld	(iy + 3), hl
	ld	hl, (ix + 6)
	push	hl
	call	_board_unmake
	pop	hl
	pop	hl
	pop	hl
	ld	a, (_search_stopped)
	bit	0, a
	jp	nz, BB37_43
	ld	bc, (ix - 38)
	ld	l, c
	ld	h, b
	ld	de, (ix - 56)
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	ld	a, 1
	ld	de, (ix + 12)
	push	bc
	pop	hl
	jp	p, BB37_28
	ld	bc, (ix - 56)
	ld	l, c
	ld	h, b
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	ld	l, c
	ld	h, b
	ld	a, 1
	jp	p, BB37_48
BB37_28:
	ld	de, (ix - 44)
	inc	e
	ld	iy, (ix - 23)
	lea	iy, iy + 5
	ld	(ix - 23), iy
	push	hl
	pop	iy
	ld	bc, (ix - 29)
	dec	bc
	jp	BB37_22
BB37_29:
	ld	hl, _move_sp
	ld	de, (ix - 41)
	ld	(hl), e
	inc	hl
	ld	(hl), d
	or	a, a
	jp	nz, BB37_8
	ld	iyh, 0
	push	af
	ld	a, (ix + 15)
	ld	iyl, a
	pop	af
	ld.sis	de, -29000
	add.sis	iy, de
	jp	BB37_8
BB37_31:
	ld	(ix - 35), bc
	ld	hl, 1
	push	hl
	ld	hl, _raw_moves_buf
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_generate_moves
	ld	e, a
	pop	hl
	pop	hl
	pop	hl
	ld	hl, _move_sp
	ld	hl, (hl)
	ld	bc, 0
	push	bc
	pop	iy
	ld	(ix - 47), hl
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
	ld	(ix - 38), de
	ld	c, e
	lea	hl, iy
	add	hl, bc
	ld	de, 2049
	ld	(ix - 41), hl
	or	a, a
	sbc	hl, de
	jp	nc, BB37_45
	lea	hl, ix - 20
	ld	(ix - 44), hl
	ld	(ix - 29), bc
	ld	bc, 5
	lea	hl, iy
	call	__imulu
	push	hl
	pop	de
	ld	iy, _move_pool
	add	iy, de
	ld	hl, (ix - 29)
	ld	(ix - 32), iy
	lea	de, iy
BB37_33:
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jr	z, BB37_35
	ld	iy, (ix - 23)
	ld	a, (iy)
	lea	bc, iy
	push	de
	pop	iy
	ld	(iy), a
	push	bc
	pop	iy
	ld	a, (iy + 1)
	push	de
	pop	iy
	ld	(iy + 1), a
	push	bc
	pop	iy
	ld	a, (iy + 2)
	push	de
	pop	iy
	ld	(iy + 2), a
	ld.sis	de, 0
	ld	(iy + 3), e
	ld	(iy + 4), d
	lea	iy, iy + 5
	lea	de, iy
	push	bc
	pop	iy
	lea	iy, iy + 3
	ld	(ix - 23), iy
	dec	hl
	jr	BB37_33
BB37_35:
	ld	hl, _move_sp
	ld	de, (ix - 41)
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	(ix - 20), -1
	ld	(ix - 19), -1
	ld	(ix - 18), 0
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	hl, (ix - 44)
	ld	a, (hl)
	ld	(iy), a
	ld	a, (ix - 19)
	ld	(iy + 1), a
	ld	a, (ix - 18)
	ld	(iy + 2), a
	ld	l, (ix + 15)
	push	hl
	ld	hl, (ix - 38)
	push	hl
	ld	hl, (ix - 32)
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_score_moves
	ld	bc, (ix - 29)
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	call	__sneg
	ld	(ix - 41), hl
	ld	e, (ix + 15)
	inc	e
	ld	a, (ix + 18)
	inc	a
	ld	l, a
	ld	(ix - 50), hl
	ld	l, e
	ld	(ix - 53), hl
	ld	iy, (ix - 32)
	ld	e, 0
BB37_36:
	push	bc
	pop	hl
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jp	z, BB37_44
	ld	(ix - 29), bc
	ld	(ix - 44), de
	push	de
	ld	hl, (ix - 38)
	push	hl
	ld	hl, (ix - 32)
	push	hl
	ld	(ix - 23), iy
	call	_pick_move
	pop	hl
	pop	hl
	pop	hl
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	hl, (ix - 23)
	ld	a, (hl)
	ld	(iy), a
	lea	hl, iy
	ld	iy, (ix - 23)
	ld	a, (iy + 1)
	push	hl
	pop	iy
	ld	(iy + 1), a
	ld	iy, (ix - 23)
	ld	a, (iy + 2)
	push	hl
	pop	iy
	ld	(iy + 2), a
	ld	hl, (ix - 26)
	ld	(iy + 3), hl
	ld	hl, (ix + 6)
	push	hl
	call	_board_make
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	push	hl
	call	_board_is_legal.23
	pop	hl
	or	a, a
	jr	nz, BB37_39
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	ld	hl, (ix - 23)
	ld	a, (hl)
	ld	(iy), a
	lea	hl, iy
	ld	iy, (ix - 23)
	ld	a, (iy + 1)
	push	hl
	pop	iy
	ld	(iy + 1), a
	ld	iy, (ix - 23)
	ld	a, (iy + 2)
	push	hl
	pop	iy
	ld	(iy + 2), a
	ld	hl, (ix - 26)
	ld	(iy + 3), hl
	ld	hl, (ix + 6)
	push	hl
	call	_board_unmake
	pop	hl
	pop	hl
	pop	hl
	ld	iy, (ix - 23)
	jp	BB37_42
BB37_39:
	ld	hl, (ix - 35)
	call	__sneg
	ld	de, (ix - 50)
	push	de
	ld	de, (ix - 53)
	push	de
	push	hl
	ld	hl, (ix - 41)
	push	hl
	ld	hl, (ix + 6)
	push	hl
	call	_quiescence
	pop	de
	pop	de
	pop	de
	pop	de
	pop	de
	call	__sneg
	ld	(ix - 56), hl
	push	hl
	push	hl
	ex	de, hl
	ld	hl, 0
	add	hl, sp
	ex	de, hl
	ld	iy, (ix - 23)
	ld	a, (iy)
	push	de
	pop	hl
	ld	(hl), a
	ld	a, (iy + 1)
	lea	hl, iy
	push	de
	pop	iy
	ld	(iy + 1), a
	push	hl
	pop	iy
	ld	a, (iy + 2)
	push	de
	pop	iy
	ld	(iy + 2), a
	ld	hl, (ix - 26)
	ld	(iy + 3), hl
	ld	hl, (ix + 6)
	push	hl
	call	_board_unmake
	pop	hl
	pop	hl
	pop	hl
	ld	a, (_search_stopped)
	bit	0, a
	jr	nz, BB37_46
	ld	hl, (ix - 35)
	ld	bc, (ix - 56)
	or	a, a
	sbc.sis	hl, bc
	call	pe, __setflag
	ld	de, (ix + 12)
	ld	iy, (ix - 23)
	jp	p, BB37_42
	ld	l, c
	ld	h, b
	or	a, a
	sbc.sis	hl, de
	call	pe, __setflag
	ld	(ix - 35), bc
	jp	p, BB37_50
BB37_42:
	ld	de, (ix - 44)
	inc	e
	lea	iy, iy + 5
	ld	bc, (ix - 29)
	dec	bc
	jp	BB37_36
BB37_43:
	ld	hl, _move_sp
	ld	de, (ix - 41)
	jr	BB37_47
BB37_44:
	ld	hl, _move_sp
	ld	de, (ix - 47)
	ld	(hl), e
	inc	hl
	ld	(hl), d
BB37_45:
	ld	hl, (ix - 35)
	jp	BB37_3
BB37_46:
	ld	hl, _move_sp
	ld	de, (ix - 47)
BB37_47:
	ld	(hl), e
	inc	hl
	ld	(hl), d
	jp	BB37_2
BB37_48:
	ld	hl, _move_sp
	ld	bc, (ix - 41)
BB37_49:
	ld	(hl), c
	inc	hl
	ld	(hl), b
	ld	iyl, e
	ld	iyh, d
	jp	BB37_8
BB37_50:
	ld	hl, _move_sp
	ld	bc, (ix - 47)
	jr	BB37_49
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_score_moves
_score_moves:
	ld	hl, -15
	call	__frameset
	ld	a, (ix + 12)
	ld	iy, _killers
	ld	l, (ix + 19)
	ld	(ix - 10), l
	ld	l, (ix + 20)
	ld	(ix - 11), l
	or	a, a
	sbc	hl, hl
	ld	l, (ix + 15)
	ld	bc, 6
	call	__imulu
	push	hl
	pop	de
	add	iy, de
	ld	(ix - 9), iy
	ld	bc, 0
	ld	c, a
	ld	iy, (ix + 9)
	lea	iy, iy + 3
BB38_1:
	push	bc
	pop	hl
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jp	z, BB38_28
	ld	e, (iy - 3)
	ld	h, (iy - 2)
	ld	d, (iy - 1)
	ld	a, e
	ld	l, (ix + 18)
	cp	a, l
	jr	nz, BB38_6
	ld	a, h
	ld	l, (ix - 10)
	cp	a, l
	jr	nz, BB38_6
	ld	a, d
	xor	a, (ix - 11)
	and	a, 56
	or	a, a
	jr	nz, BB38_6
	ld.sis	hl, 30000
	ld	(iy), l
	ld	(iy + 1), h
	jp	BB38_27
BB38_6:
	ld	a, d
	and	a, 1
	bit	0, a
	ld	(ix - 3), bc
	ld	(ix - 6), iy
	jp	nz, BB38_15
	ld	(ix - 12), h
	ld	a, (ix + 15)
	cp	a, 64
	jp	nc, BB38_14
	ld	hl, (ix - 9)
	ld	l, (hl)
	ld	a, e
	cp	a, l
	jp	nz, BB38_11
	ld	iy, (ix - 9)
	ld	l, (iy + 1)
	ld	a, (ix - 12)
	cp	a, l
	jp	nz, BB38_11
	ld	iy, (ix - 9)
	ld	l, (iy + 2)
	ld	a, d
	cp	a, l
	ld.sis	hl, 9000
	jp	z, BB38_22
BB38_11:
	ld	iy, (ix - 9)
	ld	l, (iy + 3)
	ld	a, e
	cp	a, l
	jp	nz, BB38_14
	ld	iy, (ix - 9)
	ld	l, (iy + 4)
	ld	a, (ix - 12)
	cp	a, l
	jp	nz, BB38_14
	ld	iy, (ix - 9)
	ld	l, (iy + 5)
	ld	a, d
	cp	a, l
	ld.sis	hl, 8000
	jp	z, BB38_22
BB38_14:
	ld	iy, (ix + 6)
	ld	a, d
	ld	de, 164
	add	iy, de
	ld	de, 0
	push	de
	pop	hl
	ld	l, (iy)
	ld	e, (ix - 12)
	ld	c, 8
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _history
	add	iy, bc
	ex	de, hl
	ld	c, 1
	call	__ishl
	push	hl
	pop	de
	add	iy, de
	ld	d, a
	ld	hl, (iy)
	jp	BB38_22
BB38_15:
	ld	(ix - 15), e
	ld	(ix - 12), d
	ld	de, 0
	ld	e, h
	ld	hl, (ix + 6)
	add	hl, de
	ld	d, (ix - 12)
	ld	a, (hl)
	and	a, 7
	ld	c, a
	bit	2, d
	jr	z, BB38_17
	ld	c, 1
BB38_17:
	ld	a, c
	or	a, a
	ld.sis	hl, 10000
	ld	e, (ix - 15)
	jp	z, BB38_22
	ld	a, c
	cp	a, 7
	ld.sis	hl, 10000
	jp	z, BB38_22
	ld	a, e
	ld	de, 0
	ld	e, a
	ld	hl, (ix + 6)
	add	hl, de
	ld	d, (ix - 12)
	ld	a, (hl)
	and	a, 7
	ld	e, a
	or	a, a
	ld.sis	hl, 10000
	jp	z, BB38_22
	ld	a, e
	cp	a, 7
	ld.sis	hl, 10000
	jr	z, BB38_22
	or	a, a
	sbc	hl, hl
	ld	l, c
	ld	bc, 0
	ld	c, e
	ld	(ix - 15), bc
	dec	hl
	ld	bc, 6
	call	__imulu
	push	hl
	pop	de
	ld	iy, _mvv_lva
	add	iy, de
	ld	de, (ix - 15)
	add	iy, de
	ld	h, b
	ld	l, (iy - 1)
	ld.sis	de, 10000
	add.sis	hl, de
	ld	d, (ix - 12)
BB38_22:
	ld	iy, (ix - 6)
	ld	(iy), l
	ld	(iy + 1), h
	bit	3, d
	ld	bc, (ix - 3)
	jr	z, BB38_27
	ld	a, d
	and	a, 48
	or	a, a
	jr	nz, BB38_25
	ld.sis	de, 5000
	jr	BB38_26
BB38_25:
	ld.sis	de, 1000
BB38_26:
	add.sis	hl, de
	ld	(iy), l
	ld	(iy + 1), h
BB38_27:
	lea	iy, iy + 5
	dec	bc
	jp	BB38_1
BB38_28:
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_pick_move
_pick_move:
	ld	hl, -14
	call	__frameset
	lea	hl, ix - 5
	ld	(ix - 8), hl
	or	a, a
	sbc	hl, hl
	ld	l, (ix + 12)
	ld	bc, 5
	ld	(ix - 14), hl
	call	__imulu
	push	hl
	pop	de
	ld	iy, (ix + 6)
	add	iy, de
	ld	de, (iy + 3)
	ld	a, (ix + 12)
	inc	a
	or	a, a
	sbc	hl, hl
	ld	l, a
	call	__imulu
	push	hl
	pop	bc
	ld	l, (ix + 9)
	ld	iy, (ix + 6)
	add	iy, bc
	lea	iy, iy + 3
	ld	h, (ix + 12)
BB39_1:
	cp	a, l
	jr	nc, BB39_7
	ld	(ix - 11), h
	ld	bc, (iy)
	ld	l, e
	ld	h, d
	or	a, a
	sbc.sis	hl, bc
	call	pe, __setflag
	ld	l, a
	jp	m, BB39_4
	ld	l, (ix - 11)
BB39_4:
	ld	(ix - 11), l
	ld	l, e
	ld	h, d
	or	a, a
	sbc.sis	hl, bc
	call	pe, __setflag
	jp	m, BB39_6
	ld	c, e
	ld	b, d
BB39_6:
	lea	iy, iy + 5
	inc	a
	ld	h, (ix - 11)
	ld	e, c
	ld	d, b
	ld	l, (ix + 9)
	jr	BB39_1
BB39_7:
	ld	a, h
	ld	l, (ix + 12)
	cp	a, l
	jr	z, BB39_9
	ld	bc, 5
	ld	a, h
	ld	hl, (ix - 14)
	call	__imulu
	push	hl
	pop	de
	ld	iy, (ix + 6)
	lea	hl, iy
	add	hl, de
	push	hl
	pop	bc
	ld	(ix - 11), bc
	or	a, a
	sbc	hl, hl
	ld	l, a
	ld	(ix - 14), hl
	ld	de, (ix - 8)
	push	bc
	pop	hl
	ld	bc, 5
	ldir
	ld	hl, (ix - 14)
	ld	bc, 5
	call	__imulu
	push	hl
	pop	de
	add	iy, de
	ld	de, (ix - 11)
	lea	hl, iy
	ldir
	lea	de, iy
	ld	hl, (ix - 8)
	ld	bc, 5
	ldir
BB39_9:
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_board_is_legal.23
_board_is_legal.23:
	call	__frameset0
	ld	bc, (ix + 6)
	ld	de, 164
	push	bc
	pop	hl
	add	hl, de
	ld	l, (hl)
	ld	a, l
	xor	a, 1
	ld	de, 0
	ld	e, a
	push	bc
	pop	iy
	add	iy, de
	ld	de, 162
	add	iy, de
	ld	a, (iy)
	push	hl
	ld	l, a
	push	hl
	push	bc
	call	_is_square_attacked
	pop	hl
	pop	hl
	pop	hl
	or	a, a
	jr	z, BB40_2
	ld	a, 0
	jr	BB40_3
BB40_2:
	ld	a, 1
BB40_3:
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_tt_clear
_tt_clear:
	ld	hl, _tt
	xor	a, a
	ld	(_tt), a
	push	hl
	pop	de
	inc	de
	ld	bc, 32767
	ldir
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_tt_probe
_tt_probe:
	ld	hl, -3
	call	__frameset
	ld	hl, (ix + 6)
	ld	bc, 4095
	ld	iy, _tt
	call	__iand
	push	hl
	pop	de
	ld	c, 3
	call	__ishl
	push	hl
	pop	bc
	add	iy, bc
	ld	(ix - 3), iy
	ld	a, (iy + 7)
	or	a, a
	jr	nz, BB42_2
	xor	a, a
	jp	BB42_4
BB42_2:
	ld	c, 3
	push	de
	pop	hl
	call	__ishl
	push	hl
	pop	bc
	ld	hl, _tt
	add	hl, bc
	ld	hl, (hl)
	ld	bc, (ix + 12)
	or	a, a
	sbc.sis	hl, bc
	ld	a, 0
	jr	nz, BB42_4
	ld	a, 1
	ld	c, 3
	ex	de, hl
	call	__ishl
	push	hl
	pop	de
	ld	hl, _tt
	add	hl, de
	push	hl
	pop	bc
	push	bc
	pop	iy
	ld	de, (iy + 2)
	ld	hl, (ix + 15)
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	de, (iy + 4)
	ld	hl, (ix + 18)
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	l, (iy + 6)
	ld	iy, (ix + 21)
	ld	(iy), l
	ld	iy, (ix - 3)
	ld	l, (iy + 7)
	ld	iy, (ix + 24)
	ld	(iy), l
BB42_4:
	pop	hl
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_tt_store
_tt_store:
	call	__frameset0
	ld	hl, (ix + 6)
	ld	a, (ix + 21)
	ld	e, (ix + 24)
	ld	bc, 4095
	ld	iy, _tt
	call	__iand
	ld	c, 3
	call	__ishl
	push	hl
	pop	bc
	add	iy, bc
	ld	hl, (ix + 12)
	ld	(iy), l
	ld	(iy + 1), h
	ld	hl, (ix + 15)
	ld	(iy + 2), l
	ld	(iy + 3), h
	ld	hl, (ix + 18)
	ld	(iy + 4), l
	ld	(iy + 5), h
	ld	(iy + 6), a
	ld	(iy + 7), e
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_tt_pack_move
_tt_pack_move:
	call	__frameset0
	ld	l, (ix + 6)
	ld	a, l
	srl	a
	and	a, 56
	ld	e, a
	ld	a, l
	and	a, 7
	ld	l, a
	ld	a, e
	add	a, l
	ld	e, a
	ld	l, (ix + 7)
	ld	a, l
	srl	a
	and	a, 56
	ld	c, a
	ld	a, l
	and	a, 7
	ld	l, a
	ld	a, c
	add	a, l
	ld	l, a
	ld	d, 0
	ld	h, d
	ld	c, 6
	call	__sshl
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
	add.sis	iy, de
	ld	a, (ix + 8)
	bit	3, a
	jr	z, BB44_2
	ld	b, 4
	ld.sis	de, 4096
	call	__bshru
	and	a, 3
	ld	l, a
	ld	h, e
	ld	c, 13
	call	__sshl
	ld	c, l
	ld	b, h
	add.sis	iy, bc
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	ld	c, e
	ld	b, d
	call	__sor
	ex	de, hl
	ld	iyl, e
	ld	iyh, d
	ex	de, hl
BB44_2:
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_tt_unpack_move
_tt_unpack_move:
	call	__frameset0
	ld	de, (ix + 6)
	ld	iy, (ix + 9)
	ld	c, 6
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	call	__sshru
	ld	a, iyl
	add	a, a
	and	a, 112
	ld	c, a
	ld	a, iyl
	and	a, 7
	ld	b, a
	ld	a, c
	add	a, b
	push	de
	pop	iy
	ld	(iy), a
	ld	a, l
	add	a, a
	and	a, 112
	ld	c, a
	ld	a, l
	and	a, 7
	ld	l, a
	ld	a, c
	add	a, l
	ld	(iy + 1), a
	ld	iy, (ix + 9)
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	ld.sis	bc, 4096
	call	__sand
	ld	e, l
	ld	d, h
	ld	c, 9
	ex	de, hl
	ld	e, iyl
	ld	d, iyh
	ex	de, hl
	call	__sshru
	ld	a, l
	and	a, 48
	add	a, 8
	ld	l, e
	ld	h, d
	ld	e, 0
	add.sis	hl, bc
	or	a, a
	sbc.sis	hl, bc
	jr	z, BB45_2
	ld	e, a
BB45_2:
	ld	hl, (ix + 6)
	push	hl
	pop	iy
	ld	(iy + 2), e
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_zobrist_is_initialized
_zobrist_is_initialized:
	ld	a, (_zobrist_initialized)
	and	a, 1
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_zobrist_init
_zobrist_init:
	ld	hl, -12
	call	__frameset
	ld	hl, (ix + 6)
	ld	a, (ix + 9)
	ld	bc, 0
	ld	e, a
	call	__lcmpzero
	jr	z, BB47_2
	ld	d, 0
	jr	BB47_3
BB47_2:
	ld	d, 1
BB47_3:
	bit	0, d
	jr	z, BB47_5
	ld	hl, 3430008
BB47_5:
	ld	iyl, 1
	bit	0, d
	jr	z, BB47_7
	ld	a, 18
BB47_7:
	ld	de, _zobrist_piece
	ld	(ix - 3), de
	ld	de, _lock_piece
	ld	(ix - 6), de
	ld	(_prng_state), hl
	ld	(_prng_state+3), a
	ld	a, iyl
	ld	(_zobrist_initialized), a
	ld	de, 12
	push	bc
	pop	iy
BB47_8:
	lea	hl, iy
	or	a, a
	sbc	hl, de
	push	bc
	pop	hl
	jr	z, BB47_12
BB47_9:
	ld	(ix - 9), hl
	ld	de, 256
	or	a, a
	sbc	hl, de
	jr	z, BB47_11
	ld	(ix - 12), iy
	call	_prng_next
	ld	a, e
	ld	bc, (ix - 9)
	push	bc
	pop	de
	ld	iy, (ix - 3)
	add	iy, de
	ld	(iy), hl
	push	bc
	pop	hl
	ld	(iy + 3), a
	ld	iy, (ix - 12)
	ld	bc, 0
	ld	de, 4
	add	hl, de
	jr	BB47_9
BB47_11:
	inc	iy
	ld	hl, (ix - 3)
	ld	de, 256
	add	hl, de
	ld	(ix - 3), hl
	ld	de, 12
	jr	BB47_8
BB47_12:
	ld	de, 64
	push	bc
	pop	iy
BB47_13:
	lea	hl, iy
	or	a, a
	sbc	hl, de
	jr	z, BB47_15
	ld	(ix - 3), iy
	call	_prng_next
	ld	bc, (ix - 3)
	ld	iy, _zobrist_castle
	add	iy, bc
	ld	(iy), hl
	ld	(iy + 3), e
	ld	iy, (ix - 3)
	ld	bc, 0
	ld	de, 4
	add	iy, de
	ld	de, 64
	jr	BB47_13
BB47_15:
	ld	(ix - 3), bc
BB47_16:
	call	_prng_next
	push	hl
	pop	iy
	ld	hl, (ix - 3)
	ld	bc, 32
	or	a, a
	sbc	hl, bc
	jr	z, BB47_18
	ld	hl, (ix - 3)
	ld	(ix - 9), hl
	ld	(ix - 12), iy
	ld	iy, _zobrist_ep_file
	ld	bc, (ix - 9)
	add	iy, bc
	ld	bc, (ix - 12)
	ld	(iy), bc
	ld	(iy + 3), e
	ld	de, 4
	add	hl, de
	ld	(ix - 3), hl
	jr	BB47_16
BB47_18:
	ld	(_zobrist_side), iy
	ld	a, e
	ld	(_zobrist_side+3), a
	ld	de, 0
	ld	(ix - 3), de
	ld	bc, 12
BB47_19:
	ld	hl, (ix - 3)
	or	a, a
	sbc	hl, bc
	push	de
	pop	hl
	jr	z, BB47_23
BB47_20:
	push	bc
	pop	iy
	ld	(ix - 9), hl
	ld	bc, 128
	or	a, a
	sbc	hl, bc
	jr	z, BB47_22
	call	_prng_next16
	ld	bc, (ix - 9)
	push	bc
	pop	de
	ld	iy, (ix - 6)
	add	iy, de
	ld	(iy), l
	ld	(iy + 1), h
	push	bc
	pop	hl
	ld	de, 0
	ld	bc, 2
	add	hl, bc
	ld	bc, 12
	jr	BB47_20
BB47_22:
	ld	hl, (ix - 3)
	inc	hl
	ld	(ix - 3), hl
	ld	hl, (ix - 6)
	ld	bc, 128
	add	hl, bc
	ld	(ix - 6), hl
	lea	bc, iy
	jr	BB47_19
BB47_23:
	push	de
	pop	iy
BB47_24:
	lea	hl, iy
	ld	bc, 32
	or	a, a
	sbc	hl, bc
	jr	z, BB47_26
	ld	(ix - 3), iy
	call	_prng_next16
	ld	de, (ix - 3)
	ld	iy, _lock_castle
	add	iy, de
	ld	(iy), l
	ld	(iy + 1), h
	ld	iy, (ix - 3)
	ld	de, 0
	ld	bc, 2
	add	iy, bc
	jr	BB47_24
BB47_26:
	ld	(ix - 3), de
BB47_27:
	call	_prng_next16
	ld	e, l
	ld	d, h
	ld	iy, (ix - 3)
	lea	hl, iy
	ld	bc, 16
	or	a, a
	sbc	hl, bc
	jr	z, BB47_29
	lea	bc, iy
	ld	hl, _lock_ep_file
	add	hl, bc
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	de, 2
	add	iy, de
	ld	(ix - 3), iy
	jr	BB47_27
BB47_29:
	ld	hl, _lock_side
	ld	(hl), e
	inc	hl
	ld	(hl), d
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_prng_next
_prng_next:
	ld	iy, _prng_state
	ld	bc, (_prng_state)
	lea	hl, iy + 3
	ld	d, (hl)
	ld	l, 13
	push	bc
	pop	iy
	ld	a, d
	call	__lshl
	push	bc
	pop	hl
	ld	e, a
	lea	bc, iy
	ld	a, d
	call	__lxor
	push	hl
	pop	iy
	ld	d, e
	ld	l, 17
	lea	bc, iy
	ld	a, d
	call	__lshru
	push	bc
	pop	hl
	ld	e, a
	lea	bc, iy
	ld	a, d
	call	__lxor
	push	hl
	pop	iy
	ld	d, e
	ld	l, 5
	lea	bc, iy
	ld	a, d
	call	__lshl
	push	bc
	pop	hl
	ld	e, a
	lea	bc, iy
	ld	a, d
	call	__lxor
	ld	(_prng_state), hl
	ld	a, e
	ld	(_prng_state+3), a
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_prng_next16
_prng_next16:
	call	_prng_next
	push	hl
	pop	bc
	ld	a, e
	ld	l, 16
	call	__lshru
	ld	l, c
	ld	h, b
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	public	_main
_main:
	ld	hl, -39
	call	__frameset
	lea	hl, ix - 5
	ld	(ix - 18), hl
	call	_gfx_Begin
	ld	hl, 1
	push	hl
	call	_gfx_SetDraw
	pop	hl
	ld.sis	hl, 4228
	ld	iy, -1900032
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 31606
	ld	iy, -1900030
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 23084
	ld	iy, -1900028
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 31696
	ld	iy, -1900026
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 24360
	ld	iy, -1900024
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 26445
	ld	iy, -1900022
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 22151
	ld	iy, -1900020
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 32767
	ld	iy, -1900018
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 3171
	ld	iy, -1900016
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 10570
	ld	iy, -1900014
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 6655
	ld	iy, -1900012
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 28539
	ld	iy, -1900010
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 8732
	ld	iy, -1900008
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 2115
	ld	iy, -1900006
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 6343
	ld	iy, -1900004
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 5285
	ld	iy, -1900002
	ld	(iy), l
	ld	(iy + 1), h
	ld.sis	hl, 13004
	ld	iy, -1900000
	ld	(iy), l
	ld	(iy + 1), h
	call	_clock
	push	hl
	call	_srand
	pop	hl
	or	a, a
	sbc	hl, hl
	ld	(_state), hl
	xor	a, a
	ld	(_menu_cursor), a
	inc	a
	ld	(_running), a
BB50_1:
	call	_clock
	ld	(ix - 8), hl
	ld	(ix - 9), e
	call	_kb_Scan
	ld	hl, -720878
	push	de
	ld	e, (hl)
	inc	hl
	ld	d, (hl)
	ld	l, e
	ld	h, d
	pop	de
	ld	(ix - 15), hl
	ld	a, l
	ld	(_cur_g1), a
	ld	hl, -720868
	push	de
	ld	e, (hl)
	inc	hl
	ld	d, (hl)
	ld	l, e
	ld	h, d
	pop	de
	ld	(ix - 12), hl
	ld	a, l
	ld	(_cur_g6), a
	ld	hl, -720866
	push	de
	ld	e, (hl)
	inc	hl
	ld	d, (hl)
	ld	iyl, e
	ld	iyh, d
	pop	de
	ld	a, iyl
	ld	(_cur_g7), a
	ld	de, (_state)
	push	de
	pop	hl
	ld	bc, 5
	or	a, a
	sbc	hl, bc
	jr	c, BB50_5
BB50_2:
	ld	a, (_cur_g1)
	ld	(_prev_g1), a
	ld	a, (_cur_g6)
	ld	(_prev_g6), a
	ld	a, (_cur_g7)
	ld	(_prev_g7), a
BB50_3:
	call	_clock
	ld	bc, (ix - 8)
	ld	a, (ix - 9)
	call	__lsub
	ld	bc, 546
	xor	a, a
	call	__lcmpu
	jr	c, BB50_3
	ld	a, (_running)
	bit	0, a
	jp	nz, BB50_1
	jp	BB50_183
BB50_5:
	ld	c, iyl
	ld	b, iyh
	ld	iy, (ix - 12)
	ld	hl, JTI50_0
	add	hl, de
	add	hl, de
	add	hl, de
	ld	hl, (hl)
	jp	(hl)
BB50_6:
	ld	a, (_prev_g7)
	cpl
	and	a, c
	ld	e, a
	ld	a, (_prev_g6)
	cpl
	and	a, iyl
	ld	l, a
	ld	a, (_prev_g1)
	cpl
	ld	iyl, a
	ld	a, e
	and	a, 1
	ld	h, a
	ld	a, (_menu_cursor)
	ld	d, a
	xor	a, 1
	ld	b, a
	ld	a, h
	and	a, b
	ld	h, a
	or	a, d
	ld	d, a
	bit	3, e
	ld	a, -1
	jr	nz, BB50_8
	ld	a, 0
BB50_8:
	and	a, d
	ld	b, a
	xor	a, 1
	and	a, d
	ld	c, a
	bit	0, h
	ld	de, (ix - 15)
	jr	nz, BB50_10
	bit	0, b
	jr	z, BB50_11
BB50_10:
	ld	a, c
	and	a, 1
	ld	(_menu_cursor), a
BB50_11:
	ld	a, l
	and	a, 1
	ld	h, a
	ld	a, e
	and	a, 32
	and	a, iyl
	bit	0, h
	jp	nz, BB50_81
	or	a, a
	jp	nz, BB50_81
	bit	6, l
	jp	nz, BB50_97
	ld	hl, 13
	push	hl
	call	_gfx_FillScreen
	pop	hl
	ld	hl, 3
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	ld	hl, 7
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	hl, _.str.2
	push	hl
	call	_gfx_GetStringWidth
	push	hl
	pop	de
	pop	hl
	ld	hl, 320
	or	a, a
	sbc	hl, de
	ld	de, 2
	push	de
	pop	bc
	call	__idivs
	ld	de, 40
	push	de
	push	hl
	ld	hl, _.str.2
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 9
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, 160
	push	hl
	ld	hl, 72
	push	hl
	ld	hl, 80
	push	hl
	call	_gfx_HorizLine_NoClip
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 2
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	or	a, a
	sbc	hl, hl
	push	hl
	pop	de
	push	hl
	pop	iy
BB50_15:
	ex	de, hl
	ld	(ix - 15), hl
	ld	de, 6
	or	a, a
	sbc	hl, de
	jp	z, BB50_98
	ld	de, (ix - 15)
	ld	hl, ___const.draw_menu.items
	add	hl, de
	ld	hl, (hl)
	push	hl
	ld	(ix - 12), iy
	call	_gfx_GetStringWidth
	ld	bc, (ix - 12)
	push	hl
	pop	de
	pop	hl
	push	bc
	pop	hl
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	m, BB50_18
	push	bc
	pop	de
BB50_18:
	ld	bc, 3
	ld	hl, (ix - 15)
	add	hl, bc
	push	de
	pop	iy
	ex	de, hl
	jr	BB50_15
BB50_19:
	ld	a, (_prev_g6)
	cpl
	and	a, iyl
	ld	l, a
	and	a, 1
	bit	0, a
	jp	nz, BB50_80
	ld	a, (_prev_g1)
	cpl
	and	a, 32
	ld	de, (ix - 15)
	and	a, e
	or	a, a
	jp	nz, BB50_80
	bit	6, l
	jp	nz, BB50_80
	or	a, a
	sbc	hl, hl
	push	hl
	call	_gfx_FillScreen
	pop	hl
	ld	hl, 3
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	ld	hl, 12
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	de, (_winner)
	push	de
	pop	hl
	ld	bc, -1
	or	a, a
	sbc	hl, bc
	ld	bc, _.str.30
	jr	z, BB50_24
	ld	bc, _.str.31
BB50_24:
	ex	de, hl
	ld	de, 1
	or	a, a
	sbc	hl, de
	ld	hl, _.str.29
	jr	z, BB50_26
	push	bc
	pop	hl
BB50_26:
	ld	(ix - 12), hl
	push	hl
	call	_strlen
	pop	de
	ld	bc, -24
	call	__imulu
	ld	de, 320
	add	hl, de
	ld	bc, 2
	call	__idivs
	ld	de, 60
	push	de
	push	hl
	ld	hl, (ix - 12)
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 1
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	ld	hl, 11
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	a, (_game_over_reason)
	add	a, -2
	cp	a, 5
	ld	hl, _.str.37
	jr	nc, BB50_28
	or	a, a
	sbc	hl, hl
	ld	l, a
	ld	bc, 3
	call	__imulu
	push	hl
	pop	de
	ld	hl, _switch.table.main
	add	hl, de
	ld	hl, (hl)
BB50_28:
	ld	(ix - 12), hl
	push	hl
	call	_strlen
	pop	de
	ld	bc, -8
	call	__imulu
	ld	de, 320
	add	hl, de
	ld	bc, 2
	call	__idivs
	ld	de, 100
	push	de
	push	hl
	ld	hl, (ix - 12)
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 160
	push	hl
	ld	hl, 72
	push	hl
	ld	hl, _.str.38
	jp	BB50_123
BB50_29:
	ld	a, (_prev_g7)
	cpl
	and	a, c
	ld	l, a
	ld	a, (_prev_g6)
	cpl
	and	a, iyl
	ld	(ix - 12), a
	ld	a, (_prev_g1)
	cpl
	ld	(ix - 21), a
	ld	(ix - 24), l
	bit	2, l
	ld	e, -1
	ld	a, e
	jr	nz, BB50_31
	ld	a, 0
BB50_31:
	ld	iy, (_diff_cursor)
	lea	hl, iy
	ld	bc, 9
	or	a, a
	sbc	hl, bc
	call	pe, __setflag
	ld	l, e
	jp	m, BB50_33
	ld	l, 0
BB50_33:
	and	a, l
	ld	d, a
	ld	l, d
	ld	bc, 1
	call	__iand
	push	hl
	pop	bc
	add	iy, bc
	bit	1, (ix - 24)
	ld	a, e
	jr	nz, BB50_35
	ld	a, 0
BB50_35:
	lea	hl, iy
	ld	bc, 1
	or	a, a
	sbc	hl, bc
	call	pe, __setflag
	ld	l, e
	ld	(ix - 24), iy
	jp	p, BB50_37
	ld	l, 0
BB50_37:
	and	a, l
	ld	l, a
	ld	c, 23
	call	__ishl
	push	hl
	pop	iy
	add	iy, iy
	sbc	hl, hl
	push	hl
	pop	bc
	ld	hl, (ix - 24)
	add	hl, bc
	bit	0, d
	push	hl
	pop	bc
	jr	nz, BB50_39
	bit	0, a
	jr	z, BB50_40
BB50_39:
	ld	(_diff_cursor), bc
BB50_40:
	ld	h, (ix - 12)
	ld	a, h
	and	a, 1
	ld	l, a
	ld	de, (ix - 15)
	ld	a, e
	and	a, 32
	and	a, (ix - 21)
	bit	0, l
	jp	nz, BB50_83
	or	a, a
	jp	nz, BB50_83
	bit	6, h
	jp	nz, BB50_103
	ld	hl, 13
	push	hl
	call	_gfx_FillScreen
	pop	hl
	ld	hl, 2
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	ld	hl, 7
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	hl, 40
	push	hl
	ld	hl, 72
	push	hl
	ld	hl, _.str.4
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	bc, 0
	ld	(ix - 12), bc
BB50_44:
	push	bc
	pop	hl
	ld	de, 10
	or	a, a
	sbc	hl, de
	jp	z, BB50_104
	ld	hl, (ix - 12)
	ld	de, 8
	add	hl, de
	ld	(ix - 21), hl
	ld	de, (_diff_cursor)
	push	bc
	pop	hl
	or	a, a
	sbc	hl, de
	ld	a, -1
	jr	z, BB50_47
	ld	a, 0
BB50_47:
	bit	0, a
	ld	l, 12
	jp	nz, BB50_49
	ld	l, 9
BB50_49:
	ld	(ix - 15), bc
	bit	0, a
	ld	a, 13
	ld	e, a
	jr	nz, BB50_51
	ld	a, 11
	ld	e, a
BB50_51:
	ld	(ix - 24), de
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, 24
	push	hl
	push	hl
	ld	hl, 90
	push	hl
	ld	hl, (ix - 21)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix - 24)
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	hl, 2
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	ld	hl, (ix - 15)
	ld	de, 9
	or	a, a
	sbc	hl, de
	sbc	a, a
	bit	0, a
	ld	hl, 12
	jr	nz, BB50_53
	ld	hl, 9
BB50_53:
	bit	0, a
	ld	a, 1
	ld	e, a
	jr	nz, BB50_55
	ld	a, 2
	ld	e, a
BB50_55:
	ld	(ix - 21), de
	ld	de, (ix - 12)
	add	hl, de
	ld	de, 94
	push	de
	push	hl
	call	_gfx_SetTextXY
	pop	hl
	pop	hl
	ld	hl, (ix - 15)
	push	hl
	pop	de
	inc	de
	ld	(ix - 24), de
	inc	hl
	ld	de, (ix - 21)
	push	de
	push	hl
	call	_gfx_PrintInt
	pop	hl
	pop	hl
	ld	de, 28
	ld	hl, (ix - 12)
	add	hl, de
	ld	(ix - 12), hl
	ld	bc, (ix - 24)
	jp	BB50_44
BB50_56:
	ld	a, (_prev_g7)
	cpl
	and	a, c
	ld	d, a
	ld	a, (_prev_g6)
	cpl
	and	a, iyl
	ld	e, a
	ld	a, (_prev_g1)
	cpl
	ld	hl, (ix - 15)
	and	a, l
	ld	b, a
	ld	a, (_anim_active)
	bit	0, a
	jp	z, BB50_87
	call	_clock
	ld	bc, (_anim_start)
	ld	a, (_anim_start+3)
	call	__lsub
	ld	bc, (_anim_duration)
	ld	a, (_anim_duration+3)
	ld	(ix - 12), hl
	ld	(ix - 15), bc
	call	__lcmpu
	jp	nc, BB50_93
	ld	hl, (_anim_from_c)
	ld	bc, 26
	call	__imulu
	push	hl
	pop	iy
	ld	(ix - 27), a
	ld	a, e
	ld	(ix - 36), a
	ld	de, 16
	add	hl, de
	ld	(ix - 21), hl
	ld	hl, (_anim_from_r)
	call	__imulu
	ld	(ix - 30), hl
	add	hl, de
	ld	(ix - 24), hl
	ld	hl, (_anim_to_c)
	call	__imulu
	push	hl
	pop	de
	ld	hl, (_anim_to_r)
	call	__imulu
	ld	(ix - 33), hl
	ex	de, hl
	lea	de, iy
	or	a, a
	sbc	hl, de
	push	hl
	pop	bc
	push	bc
	pop	iy
	add	iy, iy
	sbc	hl, hl
	push	hl
	pop	iy
	ld	hl, (ix - 12)
	ld	e, a
	ld	a, iyl
	call	__lmulu
	ld	bc, (ix - 15)
	ld	a, (ix - 27)
	call	__ldivu
	push	hl
	pop	de
	ld	hl, (ix - 21)
	add	hl, de
	ld	(ix - 21), hl
	ld	hl, (ix - 33)
	ld	de, (ix - 30)
	or	a, a
	sbc	hl, de
	push	hl
	pop	bc
	push	bc
	pop	iy
	add	iy, iy
	sbc	hl, hl
	push	hl
	pop	iy
	ld	hl, (ix - 12)
	ld	e, (ix - 36)
	ld	a, iyl
	call	__lmulu
	ld	bc, (ix - 15)
	ld	a, (ix - 27)
	call	__ldivu
	push	hl
	pop	de
	ld	hl, (ix - 24)
	add	hl, de
	ld	(ix - 24), hl
	call	_render_playing
	ld	a, (_anim_piece)
	ld	l, a
	ld	de, (ix - 24)
	push	de
	ld	de, (ix - 21)
	push	de
	push	hl
	call	_draw_piece
	jp	BB50_124
BB50_59:
	ld	a, (_prev_g7)
	cpl
	and	a, c
	ld	l, a
	ld	a, (_prev_g6)
	cpl
	and	a, iyl
	ld	(ix - 12), a
	ld	a, (_prev_g1)
	cpl
	ld	(ix - 21), a
	ld	(ix - 24), l
	bit	2, l
	ld	e, -1
	ld	a, e
	jr	nz, BB50_61
	ld	a, 0
BB50_61:
	ld	iy, (_promo_cursor)
	lea	hl, iy
	ld	bc, 3
	or	a, a
	sbc	hl, bc
	call	pe, __setflag
	ld	l, e
	jp	m, BB50_63
	ld	l, 0
BB50_63:
	and	a, l
	ld	d, a
	ld	l, d
	ld	bc, 1
	call	__iand
	push	hl
	pop	bc
	add	iy, bc
	bit	1, (ix - 24)
	ld	a, e
	jr	nz, BB50_65
	ld	a, 0
BB50_65:
	lea	hl, iy
	ld	bc, 1
	or	a, a
	sbc	hl, bc
	call	pe, __setflag
	ld	l, e
	ld	(ix - 24), iy
	jp	p, BB50_67
	ld	l, 0
BB50_67:
	and	a, l
	ld	l, a
	ld	c, 23
	call	__ishl
	push	hl
	pop	iy
	add	iy, iy
	sbc	hl, hl
	push	hl
	pop	bc
	ld	iy, (ix - 24)
	add	iy, bc
	bit	0, d
	jr	nz, BB50_69
	bit	0, a
	jr	z, BB50_70
BB50_69:
	lea	hl, iy
	ld	(_promo_cursor), hl
BB50_70:
	ld	c, (ix - 12)
	ld	a, c
	and	a, 1
	ld	l, a
	ld	de, (ix - 15)
	ld	a, e
	and	a, 32
	and	a, (ix - 21)
	bit	0, l
	jp	nz, BB50_84
	or	a, a
	jp	nz, BB50_84
	bit	6, c
	jp	nz, BB50_105
	call	_render_playing
	ld	hl, 14
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, 60
	push	hl
	ld	hl, 140
	push	hl
	ld	hl, 90
	push	hl
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 11
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, 60
	push	hl
	ld	hl, 140
	push	hl
	ld	hl, 90
	push	hl
	push	hl
	call	_gfx_Rectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 1
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	ld	hl, 11
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	hl, 94
	push	hl
	ld	hl, 120
	push	hl
	ld	hl, _.str.23
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (_current_turn)
	ld	de, 1
	or	a, a
	sbc	hl, de
	ld	hl, _promo_pieces_white
	ld	(ix - 21), hl
	jr	z, BB50_75
	ld	hl, _promo_pieces_black
	ld	(ix - 21), hl
BB50_75:
	ld	hl, 100
	push	hl
	pop	bc
	or	a, a
	sbc	hl, hl
BB50_76:
	ld	(ix - 12), hl
	ld	de, 4
	or	a, a
	sbc	hl, de
	jp	z, BB50_125
	push	bc
	pop	hl
	ld	de, -4
	add	hl, de
	ld	(ix - 24), hl
	ld	de, (_promo_cursor)
	ld	hl, (ix - 12)
	or	a, a
	sbc	hl, de
	ld	a, 10
	ld	l, a
	ld	(ix - 15), bc
	jr	z, BB50_79
	ld	a, 2
	ld	l, a
BB50_79:
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, 36
	push	hl
	ld	hl, 30
	push	hl
	ld	hl, 108
	push	hl
	ld	hl, (ix - 24)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix - 21)
	ld	de, (ix - 12)
	add	hl, de
	ld	a, (hl)
	ld	hl, 110
	push	hl
	ld	hl, (ix - 15)
	push	hl
	ld	l, a
	push	hl
	call	_draw_piece
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix - 12)
	inc	hl
	ld	de, 34
	ld	iy, (ix - 15)
	add	iy, de
	lea	bc, iy
	jr	BB50_76
BB50_80:
	or	a, a
	sbc	hl, hl
	ld	(_state), hl
	xor	a, a
	ld	(_menu_cursor), a
	jp	BB50_2
BB50_81:
	bit	0, c
	jp	z, BB50_91
	ld	a, 1
	ld	(_game_mode), a
	ld	hl, 4
	ld	(_diff_cursor), hl
	ld	hl, 1
	jp	BB50_182
BB50_83:
	inc	bc
	ld	(_ai_difficulty), bc
	jp	BB50_92
BB50_84:
	ld	hl, (_current_turn)
	ld	de, 1
	or	a, a
	sbc	hl, de
	ld	hl, _promo_pieces_white
	jr	z, BB50_86
	ld	hl, _promo_pieces_black
BB50_86:
	lea	de, iy
	add	hl, de
	ld	a, (hl)
	ld	hl, (_promo_r)
	ld	de, (_promo_c)
	ld	c, 3
	call	__ishl
	push	hl
	pop	bc
	ld	hl, _board
	add	hl, bc
	add	hl, de
	ld	(hl), a
	ld	a, (_pending_move+4)
	and	a, 1
	ld	e, a
	ld	hl, _update_promotion.promo_flags
	lea	bc, iy
	add	hl, bc
	ld	a, (hl)
	or	a, e
	or	a, 8
	ld	(_pending_move+4), a
	push	hl
	push	hl
	ex	de, hl
	ld	hl, 0
	add	hl, sp
	ex	de, hl
	ld	hl, _pending_move
	ld	bc, 5
	ldir
	call	_apply_engine_move
	pop	hl
	pop	hl
	or	a, a
	jp	nz, BB50_2
	jp	BB50_108
BB50_87:
	ld	hl, (_ai_thinking)
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jp	nz, BB50_95
	bit	3, d
	ld	(ix - 12), e
	jp	z, BB50_129
	ld	a, d
	ld	iy, (_cur_r)
	lea	hl, iy
	ld	de, 1
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	p, BB50_127
	ld	iy, 0
	jp	BB50_128
BB50_91:
	xor	a, a
	ld	(_game_mode), a
BB50_92:
	call	_start_game
	jp	BB50_2
BB50_93:
	ld	a, (_anim_piece)
	ld	(ix - 15), a
	ld	bc, (_anim_to_r)
	ld	(ix - 12), bc
	ld	de, (_anim_to_c)
	ld	hl, (_has_last_move)
	ld	(ix - 21), hl
	ld	hl, (_last_from_r)
	ld	(ix - 24), hl
	ld	hl, (_last_from_c)
	ld	(ix - 27), hl
	ld	hl, (_last_to_r)
	ld	(ix - 30), hl
	ld	hl, (_last_to_c)
	ld	(ix - 33), hl
	xor	a, a
	ld	(_anim_active), a
	push	bc
	pop	hl
	ld	c, 3
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _board
	add	iy, bc
	add	iy, de
	ld	a, (ix - 15)
	ld	(iy), a
	ld	hl, (_anim_from_r)
	ld	(ix - 15), hl
	ld	(_last_from_r), hl
	ld	bc, (_anim_from_c)
	ld	(_last_from_c), bc
	ld	hl, (ix - 12)
	ld	(_last_to_r), hl
	ld	(_last_to_c), de
	ld	hl, 1
	ld	(_has_last_move), hl
	ld	a, (_pending_move+4)
	ld	l, a
	bit	3, l
	jp	nz, BB50_109
BB50_94:
	push	hl
	push	hl
	ex	de, hl
	ld	hl, 0
	add	hl, sp
	ex	de, hl
	ld	hl, _pending_move
	ld	bc, 5
	ldir
	call	_apply_engine_move
	pop	hl
	pop	hl
	jp	BB50_2
BB50_95:
	ld	de, 1
	or	a, a
	sbc	hl, de
	jp	nz, BB50_116
	ld	hl, 2
	ld	(_ai_thinking), hl
	call	_draw_playing
	jp	BB50_2
BB50_97:
	xor	a, a
	ld	(_running), a
	jp	BB50_2
BB50_98:
	ld	hl, 320
	lea	de, iy
	or	a, a
	sbc	hl, de
	ld	bc, 2
	call	__idivs
	ld	(ix - 30), hl
	ld	de, -6
	add	hl, de
	ld	(ix - 36), hl
	ld	de, 12
	add	iy, de
	ld	hl, ___const.draw_menu.items
	ld	(ix - 24), hl
	ld	hl, 95
	ld	(ix - 21), hl
	ld	a, 93
	ld	l, a
	ld	(ix - 27), hl
	or	a, a
	sbc	hl, hl
BB50_99:
	ld	(ix - 15), hl
	ld	de, 2
	or	a, a
	sbc	hl, de
	jp	z, BB50_122
	ld	(ix - 12), iy
	ld	hl, (ix - 24)
	ld	hl, (hl)
	ld	(ix - 33), hl
	push	hl
	call	_gfx_GetStringWidth
	pop	hl
	ld	a, (_menu_cursor)
	ld	l, a
	ld	bc, 1
	call	__iand
	push	hl
	pop	de
	ld	hl, (ix - 15)
	or	a, a
	sbc	hl, de
	ld	hl, 11
	jr	nz, BB50_102
	ld	hl, 12
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, 22
	push	hl
	ld	hl, (ix - 12)
	push	hl
	ld	hl, (ix - 27)
	push	hl
	ld	hl, (ix - 36)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 13
BB50_102:
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	hl, (ix - 21)
	push	hl
	ld	hl, (ix - 30)
	push	hl
	ld	hl, (ix - 33)
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	bc, (ix - 15)
	inc	bc
	ld	hl, (ix - 27)
	ld	a, l
	add	a, 40
	ld	l, a
	ld	(ix - 27), hl
	ld	de, 40
	ld	hl, (ix - 21)
	add	hl, de
	ld	(ix - 21), hl
	ld	iy, (ix - 24)
	lea	iy, iy + 3
	ld	(ix - 24), iy
	ld	iy, (ix - 12)
	push	bc
	pop	hl
	jp	BB50_99
BB50_103:
	or	a, a
	sbc	hl, hl
	jp	BB50_182
BB50_104:
	ld	hl, 1
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	ld	hl, 9
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	hl, 222
	push	hl
	ld	hl, 4
	push	hl
	ld	hl, _.str.5
	jp	BB50_123
BB50_105:
	ld	hl, (_current_turn)
	ld	de, 1
	or	a, a
	sbc	hl, de
	ld	a, e
	jr	z, BB50_107
	ld	a, -1
BB50_107:
	ld	hl, (_promo_from_r)
	ld	de, (_promo_from_c)
	ld	iyl, 3
	ld	c, iyl
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _board
	lea	hl, iy
	add	hl, bc
	add	hl, de
	ld	(hl), a
	ld	a, (_promo_captured)
	ld	hl, (_promo_r)
	ld	de, (_promo_c)
	ld	c, 3
	call	__ishl
	push	hl
	pop	bc
	add	iy, bc
	add	iy, de
	ld	(iy), a
	ld	hl, (_promo_saved_has_last)
	ld	(_has_last_move), hl
	ld	hl, (_promo_saved_from_r)
	ld	(_last_from_r), hl
	ld	hl, (_promo_saved_from_c)
	ld	(_last_from_c), hl
	ld	hl, (_promo_saved_to_r)
	ld	(_last_to_r), hl
	ld	hl, (_promo_saved_to_c)
	ld	(_last_to_c), hl
	scf
	sbc	hl, hl
	ld	(_sel_r), hl
	ld	(_sel_c), hl
	xor	a, a
	ld	(_legal_target_count), a
BB50_108:
	ld	hl, 2
	jp	BB50_182
BB50_109:
	ld	(ix - 39), bc
	ld	(ix - 36), de
	ld	a, (_game_mode)
	bit	0, a
	jp	z, BB50_126
	ld	a, l
	ld	hl, (_current_turn)
	ld	de, -1
	or	a, a
	sbc	hl, de
	jp	nz, BB50_126
	and	a, 48
	ld	l, a
	or	a, a
	ld	a, -5
	jr	z, BB50_115
	ld	a, l
	cp	a, 16
	ld	a, -4
	jr	z, BB50_115
	ld	a, l
	cp	a, 32
	ld	a, -3
	jr	z, BB50_115
	ld	a, -2
BB50_115:
	ld	(iy), a
	jp	BB50_94
BB50_116:
	ld	de, (_ai_difficulty)
	ld	iy, _update_playing.depth_table
	add	iy, de
	dec	de
	ld	a, (iy - 1)
	ex	de, hl
	ld	c, 2
	call	__ishl
	push	hl
	pop	de
	ld	iy, _update_playing.time_table
	add	iy, de
	ld	hl, (iy)
	ld	e, (iy + 3)
	push	de
	push	hl
	ld	l, a
	push	hl
	ld	hl, (ix - 18)
	push	hl
	call	_engine_think
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix - 5)
	cp	a, -1
	jp	nz, BB50_132
	call	_compute_status
	ld	l, a
	cp	a, 2
	ld	de, 1
	jr	z, BB50_119
	ld	de, 0
BB50_119:
	ld	(_winner), de
	ld	a, l
	or	a, a
	ld	a, 3
	jr	z, BB50_121
	ld	a, l
BB50_121:
	ld	(_game_over_reason), a
	ld	hl, 4
	ld	(_state), hl
	jp	BB50_133
BB50_122:
	ld	hl, 1
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	ld	hl, 9
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	hl, 222
	push	hl
	ld	hl, 12
	push	hl
	ld	hl, _.str.3
BB50_123:
	push	hl
	call	_gfx_PrintStringXY
BB50_124:
	pop	hl
	pop	hl
	pop	hl
BB50_125:
	call	_gfx_SwapDraw
	jp	BB50_2
BB50_126:
	ld	hl, (ix - 21)
	ld	(_promo_saved_has_last), hl
	ld	hl, (ix - 24)
	ld	(_promo_saved_from_r), hl
	ld	hl, (ix - 27)
	ld	(_promo_saved_from_c), hl
	ld	hl, (ix - 30)
	ld	(_promo_saved_to_r), hl
	ld	hl, (ix - 33)
	ld	(_promo_saved_to_c), hl
	ld	hl, (ix - 12)
	ld	(_promo_r), hl
	ld	hl, (ix - 36)
	ld	(_promo_c), hl
	ld	hl, (ix - 15)
	ld	(_promo_from_r), hl
	ld	hl, (ix - 39)
	ld	(_promo_from_c), hl
	ld	a, (_anim_captured)
	ld	(_promo_captured), a
	or	a, a
	sbc	hl, hl
	ld	(_promo_cursor), hl
	ld	hl, 3
	jp	BB50_182
BB50_127:
	dec	iy
BB50_128:
	ld	e, (ix - 12)
	ld	d, a
	ld	(_cur_r), iy
BB50_129:
	ld	a, d
	and	a, 1
	bit	0, a
	jp	z, BB50_136
	ld	a, d
	ld	iy, (_cur_r)
	lea	hl, iy
	ld	de, 7
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	m, BB50_134
	ld	iy, 7
	jr	BB50_135
BB50_132:
	ld	de, _pending_move
	ld	(ix - 12), a
	ld	hl, (ix - 18)
	ld	bc, 5
	ldir
	push	hl
	push	hl
	push	hl
	ld	iy, 0
	add	iy, sp
	lea	de, iy
	ld	hl, (ix - 18)
	ld	bc, 5
	ldir
	ld	hl, _pending_effects
	ld	(iy + 6), hl
	call	_engine_get_move_effects
	pop	hl
	pop	hl
	pop	hl
	ld	de, 0
	push	de
	pop	iy
	push	af
	ld	a, (ix - 12)
	ld	iyl, a
	pop	af
	push	de
	pop	bc
	ld	c, (ix - 4)
	ld	e, (ix - 3)
	or	a, a
	sbc	hl, hl
	ld	l, (ix - 2)
	push	hl
	push	de
	push	bc
	push	iy
	call	_start_move_anim
	pop	hl
	pop	hl
	pop	hl
	pop	hl
BB50_133:
	or	a, a
	sbc	hl, hl
	ld	(_ai_thinking), hl
	jp	BB50_2
BB50_134:
	inc	iy
BB50_135:
	ld	e, (ix - 12)
	ld	d, a
	ld	(_cur_r), iy
BB50_136:
	bit	1, d
	jr	z, BB50_141
	ld	a, d
	ld	iy, (_cur_c)
	lea	hl, iy
	ld	de, 1
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	p, BB50_139
	ld	iy, 0
	jr	BB50_140
BB50_139:
	dec	iy
BB50_140:
	ld	e, (ix - 12)
	ld	d, a
	ld	(_cur_c), iy
BB50_141:
	bit	2, d
	ld	(ix - 15), b
	jr	z, BB50_146
	ld	de, (_cur_c)
	push	de
	pop	hl
	ld	bc, 7
	or	a, a
	sbc	hl, bc
	call	pe, __setflag
	jp	m, BB50_144
	ld	de, 7
	jr	BB50_145
BB50_144:
	inc	de
BB50_145:
	ld	b, (ix - 15)
	ld	(_cur_c), de
	ld	e, (ix - 12)
BB50_146:
	ld	a, e
	and	a, 1
	bit	0, a
	jr	nz, BB50_148
	bit	5, b
	jp	z, BB50_176
BB50_148:
	ld	bc, (_sel_r)
	ld	iy, (_cur_r)
	push	bc
	pop	hl
	ld	de, 0
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	p, BB50_157
	ld	de, (_cur_c)
	ld	(ix - 24), iy
	lea	hl, iy
	ld	c, 3
	call	__ishl
	push	hl
	pop	bc
	ld	hl, _board
	add	hl, bc
	ld	b, (ix - 15)
	add	hl, de
	ld	l, (hl)
	ld	a, l
	or	a, a
	jp	z, BB50_176
	ld	iy, (_current_turn)
	ld	a, l
	cp	a, 1
	call	pe, __setflag
	ld	a, -1
	jp	p, BB50_152
	ld	a, 0
BB50_152:
	lea	hl, iy
	ld	bc, 1
	or	a, a
	sbc	hl, bc
	jr	nz, BB50_154
	bit	0, a
	jr	nz, BB50_156
BB50_154:
	lea	hl, iy
	ld	bc, -1
	or	a, a
	sbc	hl, bc
	ld	b, (ix - 15)
	jp	nz, BB50_176
	bit	0, a
	jp	nz, BB50_176
BB50_156:
	ld	bc, (ix - 24)
	ld	(_sel_r), bc
	ld	(_sel_c), de
	ld	hl, 64
	push	hl
	ld	hl, _legal_targets
	push	hl
	push	de
	push	bc
	jp	BB50_173
BB50_157:
	ld	hl, (_cur_c)
	ld	(ix - 21), hl
	ld	de, (_sel_c)
	lea	hl, iy
	or	a, a
	sbc	hl, bc
	jr	nz, BB50_160
	ld	hl, (ix - 21)
	or	a, a
	sbc	hl, de
	jr	nz, BB50_160
	scf
	sbc	hl, hl
	ld	(_sel_r), hl
	ld	(_sel_c), hl
	xor	a, a
	ld	(_legal_target_count), a
	jp	BB50_175
BB50_160:
	ld	(ix - 30), de
	ld	(ix - 27), bc
	lea	hl, iy
	ld	c, 3
	call	__ishl
	push	hl
	pop	de
	ld	hl, _board
	add	hl, de
	ld	de, (ix - 21)
	add	hl, de
	ld	l, (hl)
	ld	a, l
	or	a, a
	ld	b, (ix - 15)
	jr	z, BB50_167
	ld	de, (_current_turn)
	ld	a, l
	cp	a, 1
	call	pe, __setflag
	ld	a, -1
	jp	p, BB50_163
	ld	a, 0
BB50_163:
	push	de
	pop	hl
	ld	bc, 1
	or	a, a
	sbc	hl, bc
	ld	b, (ix - 15)
	jr	nz, BB50_165
	bit	0, a
	jr	nz, BB50_172
BB50_165:
	ex	de, hl
	ld	de, -1
	or	a, a
	sbc	hl, de
	jr	nz, BB50_167
	bit	0, a
	jr	z, BB50_172
BB50_167:
	ld	(ix - 24), iy
	ld	a, (_legal_target_count)
	ld	de, 0
	ld	e, a
	ld	iy, _legal_targets
BB50_168:
	push	de
	pop	hl
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jp	z, BB50_176
	ld	bc, 0
	ld	c, (iy + 2)
	ld	hl, (ix - 24)
	or	a, a
	sbc	hl, bc
	jr	nz, BB50_171
	ld	bc, 0
	ld	c, (iy + 3)
	ld	hl, (ix - 21)
	or	a, a
	sbc	hl, bc
	jr	z, BB50_174
BB50_171:
	lea	iy, iy + 5
	dec	de
	ld	b, (ix - 15)
	jr	BB50_168
BB50_172:
	ld	(_sel_r), iy
	ld	de, (ix - 21)
	ld	(_sel_c), de
	ld	hl, 64
	push	hl
	ld	hl, _legal_targets
	push	hl
	push	de
	push	iy
BB50_173:
	call	_engine_get_moves_from
	ld	b, (ix - 15)
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	(_legal_target_count), a
	jr	BB50_176
BB50_174:
	ld	de, _pending_move
	lea	hl, iy
	ld	bc, 5
	ldir
	push	hl
	push	hl
	push	hl
	ld	hl, 0
	add	hl, sp
	ld	(ix - 33), hl
	ld	de, (ix - 33)
	lea	hl, iy
	ld	bc, 5
	ldir
	ld	hl, _pending_effects
	ld	iy, (ix - 33)
	ld	(iy + 6), hl
	call	_engine_get_move_effects
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix - 21)
	push	hl
	ld	hl, (ix - 24)
	push	hl
	ld	hl, (ix - 30)
	push	hl
	ld	hl, (ix - 27)
	push	hl
	call	_start_move_anim
	pop	hl
	pop	hl
	pop	hl
	pop	hl
BB50_175:
	ld	b, (ix - 15)
BB50_176:
	bit	6, (ix - 12)
	ld	a, 0
	jr	z, BB50_179
	ld	hl, (_sel_r)
	ld	de, 0
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	m, BB50_181
	scf
	sbc	hl, hl
	ld	(_sel_r), hl
	ld	(_sel_c), hl
	ld	(_legal_target_count), a
BB50_179:
	bit	6, b
	jr	nz, BB50_181
	ld	hl, (_state)
	ld	de, 2
	or	a, a
	sbc	hl, de
	call	z, _draw_playing
	jp	BB50_2
BB50_181:
	ld	hl, (_current_turn)
	call	__ineg
	ld	(_winner), hl
	ld	(_game_over_reason), a
	ld	hl, 4
BB50_182:
	ld	(_state), hl
	jp	BB50_2
BB50_183:
	call	_gfx_End
	or	a, a
	sbc	hl, hl
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits
	section	.rodata,"a",@progbits
	private	JTI50_0
JTI50_0:
	dl	BB50_6
	dl	BB50_29
	dl	BB50_56
	dl	BB50_59
	dl	BB50_19

	section	.text,"ax",@progbits
	private	_start_game
_start_game:
	ld	hl, -9
	call	__frameset
	ld	hl, _ce_time_ms
	ld	de, _board
	ld	(ix - 6), de
	ld	(ix - 3), hl
	pea	ix - 3
	call	_engine_init
	pop	hl
	call	_engine_new_game
	ld	iy, 0
	ld	bc, 8
	lea	de, iy
BB51_1:
	push	de
	pop	hl
	or	a, a
	sbc	hl, bc
	jr	z, BB51_6
	ld	(ix - 9), de
	lea	bc, iy
BB51_3:
	push	bc
	pop	hl
	ld	de, 8
	or	a, a
	sbc	hl, de
	jr	z, BB51_5
	ld	iy, (ix - 6)
	add	iy, bc
	ld	(iy), 0
	inc	bc
	jr	BB51_3
BB51_5:
	ld	de, (ix - 9)
	inc	de
	ld	iy, (ix - 6)
	lea	iy, iy + 8
	ld	(ix - 6), iy
	ld	bc, 0
	push	bc
	pop	iy
	ld	bc, 8
	jr	BB51_1
BB51_6:
	ld	l, -4
	ld	a, l
	ld	(_board), a
	ld	e, -2
	ld	a, e
	ld	(_board+1), a
	ld	c, -3
	ld	a, c
	ld	(_board+2), a
	ld	a, -5
	ld	(_board+3), a
	dec	a
	ld	(_board+4), a
	ld	a, c
	ld	(_board+5), a
	ld	a, e
	ld	(_board+6), a
	ld	a, l
	ld	(_board+7), a
	lea	de, iy
	ld	bc, 8
BB51_7:
	push	de
	pop	hl
	or	a, a
	sbc	hl, bc
	jr	z, BB51_9
	ld	hl, _board+8
	add	hl, de
	ld	(hl), -1
	inc	de
	jr	BB51_7
BB51_9:
	ld	l, 4
	ld	a, l
	ld	(_board+56), a
	ld	e, 2
	ld	a, e
	ld	(_board+57), a
	ld	c, 3
	ld	a, c
	ld	(_board+58), a
	ld	a, 5
	ld	(_board+59), a
	inc	a
	ld	(_board+60), a
	ld	a, c
	ld	(_board+61), a
	ld	a, e
	ld	(_board+62), a
	ld	a, l
	ld	(_board+63), a
	lea	de, iy
	ld	bc, 8
BB51_10:
	push	de
	pop	hl
	or	a, a
	sbc	hl, bc
	jr	z, BB51_12
	ld	hl, _board+48
	add	hl, de
	ld	(hl), 1
	inc	de
	jr	BB51_10
BB51_12:
	ld	hl, 7
	ld	(_cur_r), hl
	ld	hl, 4
	ld	(_cur_c), hl
	scf
	sbc	hl, hl
	ld	(_sel_r), hl
	ld	(_sel_c), hl
	ld	hl, 1
	ld	(_current_turn), hl
	ld	(_has_last_move), iy
	dec	l
	ld	a, l
	ld	(_legal_target_count), a
	ld	(_ai_thinking), iy
	xor	a, a
	ld	(_anim_active), a
	ld	a, l
	ld	(_game_over_reason), a
	ld	hl, 2
	ld	(_state), hl
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_apply_engine_move
_apply_engine_move:
	call	__frameset0
	lea	hl, ix + 6
	push	de
	push	de
	ex	de, hl
	ld	hl, 0
	add	hl, sp
	ex	de, hl
	ld	bc, 5
	ldir
	call	_engine_make_move
	pop	hl
	pop	hl
	cp	a, 2
	jr	nz, BB52_2
	ld	a, 2
	ld	hl, (_current_turn)
	ld	(_winner), hl
	ld	(_game_over_reason), a
	call	__ineg
	ld	(_current_turn), hl
	scf
	sbc	hl, hl
	ld	(_sel_r), hl
	ld	(_sel_c), hl
	xor	a, a
	ld	(_legal_target_count), a
	ld	hl, 4
	ld	(_state), hl
	inc	a
	jr	BB52_8
BB52_2:
	or	a, a
	sbc	hl, hl
	ld	de, 4
	ld	bc, -1
	ld	iyl, d
	cp	a, 3
	jr	c, BB52_4
	ld	(_winner), hl
	ld	(_game_over_reason), a
	ld	hl, (_current_turn)
	call	__ineg
	ld	(_current_turn), hl
	ld	(_sel_r), bc
	ld	(_sel_c), bc
	ld	a, iyl
	ld	(_legal_target_count), a
	ld	(_state), de
	ld	a, 1
	jr	BB52_8
BB52_4:
	ld	de, (_current_turn)
	push	de
	pop	hl
	call	__ineg
	ld	(_current_turn), hl
	ld	(_sel_r), bc
	ld	(_sel_c), bc
	ld	c, iyl
	ld	a, c
	ld	(_legal_target_count), a
	ld	a, (_game_mode)
	bit	0, a
	jr	z, BB52_7
	ld	iy, 1
	ex	de, hl
	lea	de, iy
	or	a, a
	sbc	hl, de
	jr	nz, BB52_7
	ld	hl, 1
	ld	(_ai_thinking), hl
BB52_7:
	ld	a, c
BB52_8:
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_render_playing
_render_playing:
	ld	hl, -36
	call	__frameset
	ld	l, 97
	ld	(ix - 6), hl
	ld	hl, _.str.11
	ld	(ix - 21), hl
	ld	hl, _.str.13
	ld	(ix - 18), hl
	or	a, a
	sbc	hl, hl
	push	hl
	call	_gfx_FillScreen
	pop	hl
	ld	de, 8
	ld	bc, 0
BB53_1:
	push	bc
	pop	hl
	or	a, a
	sbc	hl, de
	jp	z, BB53_32
	ld	(ix - 3), bc
	push	bc
	pop	hl
	ld	bc, 26
	call	__imulu
	push	hl
	pop	iy
	ld	de, 16
	add	iy, de
	ld	(ix - 12), iy
	ld	de, 8
	ld	a, l
	add	a, 38
	ld	c, a
	ld	(ix - 33), bc
	ld	a, l
	add	a, 29
	ld	l, a
	ld	(ix - 36), hl
	ld	bc, 0
BB53_3:
	push	bc
	pop	hl
	or	a, a
	sbc	hl, de
	jp	z, BB53_31
	push	bc
	pop	hl
	push	bc
	pop	iy
	ld	bc, 26
	call	__imulu
	ld	(ix - 30), hl
	ld	de, 16
	add	hl, de
	ld	(ix - 15), hl
	ld	(ix - 9), iy
	lea	hl, iy
	ld	de, (ix - 3)
	add	hl, de
	ld	bc, 1
	call	__iand
	ld	(ix - 24), hl
	ld	iy, (_sel_r)
	ld	hl, (_sel_c)
	ld	(ix - 27), hl
	lea	hl, iy
	dec	bc
	or	a, a
	sbc	hl, bc
	push	de
	pop	bc
	call	pe, __setflag
	jp	m, BB53_9
	lea	hl, iy
	or	a, a
	sbc	hl, bc
	jr	nz, BB53_9
	ld	hl, (ix - 27)
	ld	de, (ix - 9)
	or	a, a
	sbc	hl, de
	jr	nz, BB53_9
	ld	hl, (ix - 24)
	bit	0, l
	ld	a, 3
	ld	l, a
	jr	z, BB53_19
	ld	a, 4
	jr	BB53_18
BB53_9:
	ld	hl, (_has_last_move)
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jr	z, BB53_16
	ld	hl, (_last_from_r)
	or	a, a
	sbc	hl, bc
	jr	nz, BB53_12
	ld	hl, (_last_from_c)
	ld	de, (ix - 9)
	or	a, a
	sbc	hl, de
	jr	z, BB53_14
BB53_12:
	ld	hl, (_last_to_r)
	or	a, a
	sbc	hl, bc
	jr	nz, BB53_16
	ld	hl, (_last_to_c)
	ld	de, (ix - 9)
	or	a, a
	sbc	hl, de
	jr	nz, BB53_16
BB53_14:
	ld	hl, (ix - 24)
	bit	0, l
	ld	a, 5
	ld	l, a
	jr	z, BB53_19
	ld	a, 6
	jr	BB53_18
BB53_16:
	ld	hl, (ix - 24)
	bit	0, l
	ld	a, 1
	ld	l, a
	jr	z, BB53_19
	ld	a, 2
BB53_18:
	ld	l, a
BB53_19:
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, 26
	push	hl
	push	hl
	ld	hl, (ix - 12)
	push	hl
	ld	hl, (ix - 15)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (_sel_r)
	ld	de, 0
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	ld	bc, (ix - 3)
	jp	m, BB53_30
	ld	a, (_legal_target_count)
	ld	de, 0
	ld	e, a
	ld	iy, _legal_targets+4
BB53_21:
	push	de
	pop	hl
	add	hl, bc
	or	a, a
	sbc	hl, bc
	jp	z, BB53_30
	push	bc
	pop	hl
	ld	bc, 0
	ld	c, (iy - 2)
	or	a, a
	sbc	hl, bc
	jr	nz, BB53_24
	ld	bc, 0
	ld	c, (iy - 1)
	ld	hl, (ix - 9)
	or	a, a
	sbc	hl, bc
	jr	z, BB53_25
BB53_24:
	lea	iy, iy + 5
	dec	de
	ld	bc, (ix - 3)
	jr	BB53_21
BB53_25:
	ld	a, (iy)
	and	a, 5
	ld	(ix - 24), a
	ld	hl, 16
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	a, (ix - 24)
	or	a, a
	jr	nz, BB53_28
	ld	hl, (ix - 3)
	ld	c, 3
	call	__ishl
	push	hl
	pop	de
	ld	hl, _board
	add	hl, de
	ld	de, (ix - 9)
	add	hl, de
	ld	a, (hl)
	or	a, a
	jr	nz, BB53_28
	ld	de, 29
	ld	iy, (ix - 30)
	add	iy, de
	ld	hl, 4
	push	hl
	ld	hl, (ix - 36)
	push	hl
	push	iy
	call	_gfx_FillCircle_NoClip
	jr	BB53_29
BB53_28:
	ld	hl, 4
	push	hl
	push	hl
	ld	hl, (ix - 12)
	push	hl
	ld	hl, (ix - 15)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	de, 38
	ld	hl, (ix - 30)
	add	hl, de
	ld	(ix - 30), hl
	ld	de, 4
	push	de
	push	de
	ld	de, (ix - 12)
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 4
	push	hl
	push	hl
	ld	hl, (ix - 33)
	push	hl
	ld	hl, (ix - 15)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 4
	push	hl
	push	hl
	ld	hl, (ix - 33)
	push	hl
	ld	hl, (ix - 30)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
BB53_29:
	pop	hl
	pop	hl
	pop	hl
	ld	bc, (ix - 3)
BB53_30:
	push	bc
	pop	hl
	ld	c, 3
	call	__ishl
	push	hl
	pop	de
	ld	hl, _board
	add	hl, de
	ld	de, (ix - 9)
	add	hl, de
	ld	l, (hl)
	ld	a, l
	or	a, a
	ld	de, (ix - 12)
	push	de
	ld	de, (ix - 15)
	push	de
	push	hl
	call	nz, _draw_piece
	pop	hl
	pop	hl
	pop	hl
	ld	bc, (ix - 9)
	inc	bc
	ld	de, 8
	jp	BB53_3
BB53_31:
	ld	bc, (ix - 3)
	inc	bc
	jp	BB53_1
BB53_32:
	ld	hl, (_cur_c)
	ld	de, 26
	push	de
	pop	bc
	call	__imulu
	ld	(ix - 15), hl
	ld	de, 16
	add	hl, de
	ld	(ix - 3), hl
	ld	a, (_cur_r)
	ld	l, 26
	ld	h, a
	ld	(ix - 9), hl
	ld	hl, 10
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, (ix - 9)
	mlt	hl
	ld	(ix - 9), hl
	ld	a, l
	add	a, 16
	ld	e, a
	ld	(ix - 12), de
	ld	hl, 2
	push	hl
	ld	hl, 26
	push	hl
	push	de
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix - 9)
	ld	a, l
	add	a, 40
	ld	l, a
	ld	de, 2
	push	de
	ld	de, 26
	push	de
	push	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 26
	push	hl
	ld	hl, 2
	push	hl
	ld	hl, (ix - 12)
	push	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	de, 40
	ld	iy, (ix - 15)
	add	iy, de
	ld	hl, 26
	push	hl
	ld	hl, 2
	push	hl
	ld	hl, (ix - 12)
	push	hl
	push	iy
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 1
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	ld	hl, 11
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	de, 234
	ld	hl, 26
	ld	iy, 25
BB53_33:
	push	hl
	pop	bc
	or	a, a
	sbc	hl, de
	jr	z, BB53_35
	ld	hl, 226
	push	hl
	ld	(ix - 3), bc
	push	bc
	call	_gfx_SetTextXY
	pop	hl
	pop	hl
	ld	hl, (ix - 6)
	push	hl
	call	_gfx_PrintChar
	ld	iy, 25
	pop	hl
	ld	hl, (ix - 3)
	ld	de, 26
	add	hl, de
	ld	de, 234
	ld	bc, (ix - 6)
	inc	c
	ld	(ix - 6), bc
	jr	BB53_33
BB53_35:
	ld	de, 233
	ld	a, 56
	ld	l, a
BB53_36:
	ld	(ix - 3), hl
	lea	hl, iy
	or	a, a
	sbc	hl, de
	jr	z, BB53_38
	push	iy
	ld	hl, 6
	push	hl
	ld	(ix - 6), iy
	call	_gfx_SetTextXY
	pop	hl
	pop	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_PrintChar
	ld	iy, (ix - 6)
	pop	hl
	ld	de, 26
	add	iy, de
	ld	de, 233
	ld	hl, (ix - 3)
	dec	l
	jr	BB53_36
BB53_38:
	ld	hl, 15
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, -16
	push	hl
	ld	hl, 88
	push	hl
	or	a, a
	sbc	hl, hl
	push	hl
	ld	hl, 230
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 1
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	ld	hl, 11
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	a, (_game_mode)
	bit	0, a
	ld	de, _.str.7
	jr	nz, BB53_40
	ld	de, _.str.6
BB53_40:
	ld	hl, 6
	push	hl
	ld	hl, 234
	push	hl
	push	de
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	a, (_game_mode)
	bit	0, a
	jr	z, BB53_42
	ld	hl, 18
	push	hl
	ld	hl, 234
	push	hl
	call	_gfx_SetTextXY
	pop	hl
	pop	hl
	ld	hl, _.str.8
	push	hl
	call	_gfx_PrintString
	pop	hl
	ld	hl, (_ai_difficulty)
	ld	de, 1
	push	de
	push	hl
	call	_gfx_PrintInt
	pop	hl
	pop	hl
BB53_42:
	ld	hl, 9
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, 84
	push	hl
	ld	hl, 32
	push	hl
	ld	hl, 232
	push	hl
	call	_gfx_HorizLine_NoClip
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 1
	push	hl
	push	hl
	call	_gfx_SetTextScale
	pop	hl
	pop	hl
	ld	hl, (_current_turn)
	ld	de, 1
	or	a, a
	sbc	hl, de
	ld	l, 7
	jr	z, BB53_44
	ld	a, 11
	ld	l, a
BB53_44:
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	hl, (_current_turn)
	ld	de, 1
	or	a, a
	sbc	hl, de
	ld	de, _.str.9
	jr	z, BB53_46
	ld	de, _.str.10
BB53_46:
	ld	hl, 38
	push	hl
	ld	hl, 234
	push	hl
	push	de
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (_ai_thinking)
	add	hl, bc
	or	a, a
	sbc	hl, bc
	ld	de, 12
	jr	nz, BB53_48
	call	_engine_in_check
	or	a, a
	ld	hl, 10
	ex	de, hl
	ld	hl, _.str.12
	ld	(ix - 21), hl
	jr	z, BB53_49
BB53_48:
	push	de
	call	_gfx_SetTextFGColor
	pop	hl
	ld	hl, (ix - 21)
	ld	(ix - 18), hl
BB53_49:
	ld	hl, 50
	push	hl
	ld	hl, 234
	push	hl
	ld	hl, (ix - 18)
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (_sel_r)
	ld	de, 0
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	m, BB53_51
	ld	hl, 9
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, 84
	push	hl
	ld	hl, 65
	push	hl
	ld	hl, 232
	push	hl
	call	_gfx_HorizLine_NoClip
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 10
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	hl, 72
	push	hl
	ld	hl, 234
	push	hl
	call	_gfx_SetTextXY
	pop	hl
	pop	hl
	ld	hl, _.str.14
	push	hl
	call	_gfx_PrintString
	pop	hl
	ld	a, (_sel_c)
	add	a, 97
	ld	l, a
	push	hl
	call	_gfx_PrintChar
	pop	hl
	ld	a, (_sel_r)
	ld	l, a
	ld	a, 56
	sub	a, l
	ld	l, a
	push	hl
	call	_gfx_PrintChar
	pop	hl
BB53_51:
	ld	hl, 9
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, 84
	push	hl
	ld	hl, 90
	push	hl
	ld	hl, 232
	push	hl
	call	_gfx_HorizLine_NoClip
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 11
	push	hl
	call	_gfx_SetTextFGColor
	pop	hl
	ld	hl, 96
	push	hl
	ld	hl, 232
	push	hl
	ld	hl, _.str.15
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 108
	push	hl
	ld	hl, 232
	push	hl
	ld	hl, _.str.16
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 124
	push	hl
	ld	hl, 232
	push	hl
	ld	hl, _.str.17
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 136
	push	hl
	ld	hl, 232
	push	hl
	ld	hl, _.str.18
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 152
	push	hl
	ld	hl, 232
	push	hl
	ld	hl, _.str.19
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 164
	push	hl
	ld	hl, 232
	push	hl
	ld	hl, _.str.20
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 180
	push	hl
	ld	hl, 232
	push	hl
	ld	hl, _.str.21
	push	hl
	call	_gfx_PrintStringXY
	pop	hl
	pop	hl
	pop	hl
	ld	hl, 192
	push	hl
	ld	hl, 232
	push	hl
	ld	hl, _.str.22
	push	hl
	call	_gfx_PrintStringXY
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_draw_piece
_draw_piece:
	ld	hl, -4
	call	__frameset
	ld	l, (ix + 6)
	ld	a, l
	or	a, a
	jp	z, BB54_15
	ld	a, l
	cp	a, 1
	call	pe, __setflag
	jp	p, BB54_3
	ld	e, 8
	jr	BB54_4
BB54_3:
	ld	e, 7
BB54_4:
	ld	(ix - 3), de
	ld	a, l
	rlc	a
	sbc	a, a
	ld	e, a
	ld	a, l
	add	a, e
	xor	a, e
	ld	(ix - 4), a
	ld	hl, 9
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	a, (ix - 4)
	dec	a
	ld	de, 0
	cp	a, 6
	jr	c, BB54_6
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_SetColor
	jp	BB54_14
BB54_6:
	ld	bc, (ix + 9)
	ld	iy, (ix + 12)
	ld	e, a
	ld	hl, JTI54_0
	add	hl, de
	add	hl, de
	add	hl, de
	ld	hl, (hl)
	jp	(hl)
BB54_7:
	push	bc
	pop	hl
	dec	hl
	push	iy
	push	hl
	call	_draw_pawn
	pop	hl
	pop	hl
	ld	hl, (ix + 9)
	inc	hl
	ld	de, (ix + 12)
	push	de
	push	hl
	call	_draw_pawn
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	dec	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_pawn
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	inc	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_pawn
	pop	hl
	pop	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, (ix + 12)
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_pawn
	jp	BB54_13
BB54_8:
	push	bc
	pop	hl
	dec	hl
	push	iy
	push	hl
	call	_draw_knight
	pop	hl
	pop	hl
	ld	hl, (ix + 9)
	inc	hl
	ld	de, (ix + 12)
	push	de
	push	hl
	call	_draw_knight
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	dec	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_knight
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	inc	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_knight
	pop	hl
	pop	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, (ix + 12)
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_knight
	jp	BB54_13
BB54_9:
	push	bc
	pop	hl
	dec	hl
	push	iy
	push	hl
	call	_draw_bishop
	pop	hl
	pop	hl
	ld	hl, (ix + 9)
	inc	hl
	ld	de, (ix + 12)
	push	de
	push	hl
	call	_draw_bishop
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	dec	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_bishop
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	inc	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_bishop
	pop	hl
	pop	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, (ix + 12)
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_bishop
	jp	BB54_13
BB54_10:
	push	bc
	pop	hl
	dec	hl
	push	iy
	push	hl
	call	_draw_rook
	pop	hl
	pop	hl
	ld	hl, (ix + 9)
	inc	hl
	ld	de, (ix + 12)
	push	de
	push	hl
	call	_draw_rook
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	dec	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_rook
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	inc	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_rook
	pop	hl
	pop	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, (ix + 12)
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_rook
	jp	BB54_13
BB54_11:
	push	bc
	pop	hl
	dec	hl
	push	iy
	push	hl
	call	_draw_queen
	pop	hl
	pop	hl
	ld	hl, (ix + 9)
	inc	hl
	ld	de, (ix + 12)
	push	de
	push	hl
	call	_draw_queen
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	dec	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_queen
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	inc	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_queen
	pop	hl
	pop	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, (ix + 12)
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_queen
	jr	BB54_13
BB54_12:
	push	bc
	pop	hl
	dec	hl
	push	iy
	push	hl
	call	_draw_king
	pop	hl
	pop	hl
	ld	hl, (ix + 9)
	inc	hl
	ld	de, (ix + 12)
	push	de
	push	hl
	call	_draw_king
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	dec	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_king
	pop	hl
	pop	hl
	ld	hl, (ix + 12)
	inc	hl
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_king
	pop	hl
	pop	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_SetColor
	pop	hl
	ld	hl, (ix + 12)
	push	hl
	ld	hl, (ix + 9)
	push	hl
	call	_draw_king
BB54_13:
	pop	hl
BB54_14:
	pop	hl
BB54_15:
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits
	section	.rodata,"a",@progbits
	private	JTI54_0
JTI54_0:
	dl	BB54_7
	dl	BB54_8
	dl	BB54_9
	dl	BB54_10
	dl	BB54_11
	dl	BB54_12

	section	.text,"ax",@progbits
	private	_draw_playing
_draw_playing:
	call	_render_playing
	jp	_gfx_SwapDraw
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_start_move_anim
_start_move_anim:
	ld	hl, -9
	call	__frameset
	ld	hl, (ix + 6)
	ld	iy, (ix + 9)
	ld	bc, (ix + 12)
	or	a, a
	sbc	hl, bc
	push	hl
	pop	de
	lea	hl, iy
	ld	bc, (ix + 15)
	or	a, a
	sbc	hl, bc
	ld	(ix - 3), hl
	push	de
	pop	hl
	push	de
	pop	iy
	add	iy, iy
	sbc	hl, hl
	push	hl
	pop	bc
	ex	de, hl
	add	hl, bc
	call	__ixor
	ld	(ix - 6), hl
	ld	hl, (ix - 3)
	push	hl
	pop	iy
	push	hl
	pop	de
	add	iy, iy
	sbc	hl, hl
	push	hl
	pop	bc
	ex	de, hl
	ld	de, (ix - 6)
	add	hl, bc
	call	__ixor
	push	hl
	pop	bc
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	m, BB56_2
	push	bc
	pop	de
BB56_2:
	ex	de, hl
	ld	bc, 50
	call	__imulu
	push	hl
	pop	bc
	ld	de, 200
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	m, BB56_4
	ld	bc, 200
BB56_4:
	ld	de, 2
	push	bc
	pop	hl
	or	a, a
	sbc	hl, de
	call	pe, __setflag
	jp	p, BB56_6
	ld	bc, 1
BB56_6:
	ld	(ix - 9), bc
	ld	c, 3
	ld	hl, (ix + 6)
	call	__ishl
	push	hl
	pop	de
	ld	iy, _board
	add	iy, de
	ld	hl, (ix + 9)
	ex	de, hl
	add	iy, de
	ld	(ix - 3), iy
	ld	a, (iy)
	ld	(_anim_piece), a
	ld	iy, (ix + 12)
	lea	hl, iy
	call	__ishl
	push	hl
	pop	de
	ld	hl, _board
	add	hl, de
	ld	de, (ix + 15)
	add	hl, de
	ld	(ix - 6), hl
	ld	a, (hl)
	ld	(_anim_captured), a
	ld	hl, (ix + 6)
	ld	(_anim_from_r), hl
	ld	hl, (ix + 9)
	ld	(_anim_from_c), hl
	ld	(_anim_to_r), iy
	ld	(_anim_to_c), de
	ld	c, 15
	ld	hl, (ix - 9)
	call	__ishl
	ld	bc, 1000
	call	__idivu
	ld	(_anim_duration), hl
	xor	a, a
	ld	(_anim_duration+3), a
	call	_clock
	ld	a, e
	ld	(_anim_start), hl
	ld	(_anim_start+3), a
	ld	a, 1
	ld	(_anim_active), a
	ld	hl, (ix - 3)
	ld	(hl), 0
	ld	hl, (ix - 6)
	ld	(hl), 0
	ld	a, (_pending_effects+5)
	or	a, a
	jr	z, BB56_8
	ld	a, (_pending_effects+6)
	ld	de, 0
	push	de
	pop	hl
	ld	l, a
	ld	a, (_pending_effects+7)
	ld	e, a
	ld	c, 3
	call	__ishl
	push	hl
	pop	bc
	ld	hl, _board
	add	hl, bc
	add	hl, de
	ld	(hl), d
BB56_8:
	ld	a, (_pending_effects)
	or	a, a
	jr	z, BB56_10
	ld	a, (_pending_effects+1)
	ld	de, 0
	push	de
	pop	hl
	ld	l, a
	ld	a, (_pending_effects+2)
	push	de
	pop	bc
	ld	c, a
	ld	(ix - 3), bc
	ld	c, 3
	call	__ishl
	push	hl
	pop	bc
	ld	iy, _board
	lea	hl, iy
	add	hl, bc
	ld	bc, (ix - 3)
	add	hl, bc
	ld	a, (hl)
	ld	(ix - 3), a
	ld	(hl), d
	ld	a, (_pending_effects+3)
	push	de
	pop	hl
	ld	l, a
	ld	a, (_pending_effects+4)
	ld	e, a
	ld	c, 3
	call	__ishl
	push	hl
	pop	bc
	add	iy, bc
	add	iy, de
	ld	a, (ix - 3)
	ld	(iy), a
BB56_10:
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_draw_pawn
_draw_pawn:
	call	__frameset0
	ld	hl, (ix + 6)
	ld	a, (ix + 9)
	ld	de, 13
	ld	bc, 4
	add	hl, de
	add	a, 8
	ld	e, a
	push	bc
	push	de
	push	hl
	call	_gfx_FillCircle_NoClip
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 10
	add	hl, de
	ld	a, (ix + 9)
	add	a, 12
	ld	e, a
	ld	bc, 4
	push	bc
	ld	bc, 6
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 8
	add	hl, de
	ld	a, (ix + 9)
	add	a, 16
	ld	e, a
	ld	bc, 3
	push	bc
	ld	bc, 10
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 6
	add	hl, de
	ld	a, (ix + 9)
	add	a, 19
	ld	e, a
	ld	bc, 4
	push	bc
	ld	bc, 14
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_draw_knight
_draw_knight:
	ld	hl, -6
	call	__frameset
	ld	hl, (ix + 6)
	ld	a, (ix + 9)
	ld	de, 12
	ld	iy, 4
	add	hl, de
	add	a, 2
	ld	e, a
	ld	bc, 3
	push	bc
	push	iy
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 8
	add	hl, de
	ld	(ix - 3), hl
	ld	a, (ix + 9)
	add	a, 4
	ld	c, a
	ld	de, 5
	push	de
	ld	de, 10
	push	de
	push	bc
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 6
	add	hl, de
	ld	(ix - 6), hl
	ld	a, (ix + 9)
	add	a, e
	ld	c, a
	ld	de, 3
	push	de
	inc	de
	push	de
	push	bc
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 10
	add	hl, de
	ld	a, (ix + 9)
	add	a, 9
	ld	e, a
	ld	bc, 4
	push	bc
	ld	bc, 7
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix + 9)
	add	a, 13
	ld	l, a
	ld	de, 4
	push	de
	ld	de, 11
	push	de
	push	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix + 9)
	add	a, 17
	ld	l, a
	ld	de, 2
	push	de
	ld	de, 15
	push	de
	push	hl
	ld	hl, (ix - 6)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 5
	add	hl, de
	ld	a, (ix + 9)
	add	a, 19
	ld	e, a
	ld	bc, 4
	push	bc
	ld	bc, 17
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_draw_bishop
_draw_bishop:
	ld	hl, -3
	call	__frameset
	ld	hl, (ix + 6)
	ld	a, (ix + 9)
	ld	de, 13
	ld	bc, 2
	add	hl, de
	add	a, 4
	ld	e, a
	push	bc
	push	de
	push	hl
	call	_gfx_FillCircle_NoClip
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 11
	add	hl, de
	ld	a, (ix + 9)
	add	a, 6
	ld	e, a
	ld	bc, 2
	push	bc
	ld	bc, 5
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 10
	add	hl, de
	ld	a, (ix + 9)
	add	a, 8
	ld	e, a
	ld	bc, 2
	push	bc
	ld	bc, 7
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 9
	add	hl, de
	ld	(ix - 3), hl
	ld	a, (ix + 9)
	add	a, 10
	ld	iyl, a
	ld	bc, 2
	push	bc
	push	de
	push	iy
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 8
	add	hl, de
	ld	a, (ix + 9)
	add	a, 12
	ld	e, a
	ld	bc, 2
	push	bc
	ld	bc, 11
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 7
	add	hl, de
	ld	a, (ix + 9)
	add	a, 14
	ld	e, a
	ld	bc, 2
	push	bc
	ld	bc, 13
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix + 9)
	add	a, 16
	ld	l, a
	ld	de, 3
	push	de
	ld	de, 9
	push	de
	push	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 6
	add	hl, de
	ld	a, (ix + 9)
	add	a, 19
	ld	c, a
	ld	de, 4
	push	de
	ld	de, 15
	push	de
	push	bc
	push	hl
	call	_gfx_FillRectangle_NoClip
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_draw_rook
_draw_rook:
	ld	hl, -6
	call	__frameset
	ld	hl, (ix + 6)
	ld	a, (ix + 9)
	ld	de, 6
	ld	iy, 3
	add	hl, de
	ld	(ix - 3), hl
	add	a, iyl
	ld	c, a
	ld	(ix - 6), bc
	ld	de, 4
	push	de
	push	iy
	push	bc
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 12
	add	hl, de
	ld	de, 4
	push	de
	dec	de
	push	de
	ld	de, (ix - 6)
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 18
	add	hl, de
	ld	de, 4
	push	de
	dec	de
	push	de
	ld	de, (ix - 6)
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix + 9)
	add	a, 7
	ld	l, a
	ld	de, 2
	push	de
	ld	de, 15
	push	de
	push	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	bc, 8
	add	hl, bc
	ld	a, (ix + 9)
	add	a, 9
	ld	e, a
	push	bc
	ld	bc, 11
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix + 9)
	add	a, 17
	ld	l, a
	ld	de, 2
	push	de
	ld	de, 15
	push	de
	push	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 5
	add	hl, de
	ld	a, (ix + 9)
	add	a, 19
	ld	e, a
	ld	bc, 4
	push	bc
	ld	bc, 17
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_draw_queen
_draw_queen:
	ld	hl, -9
	call	__frameset
	ld	de, (ix + 6)
	ld	a, (ix + 9)
	ld	bc, 13
	ld	iy, 2
	push	de
	pop	hl
	add	hl, bc
	ld	(ix - 6), hl
	ex	de, hl
	ld	de, 8
	add	hl, de
	ld	(ix - 3), hl
	add	a, 4
	ld	e, a
	ld	(ix - 9), de
	push	iy
	push	de
	push	hl
	call	_gfx_FillCircle_NoClip
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix + 9)
	add	a, 3
	ld	l, a
	ld	de, 2
	push	de
	push	hl
	ld	hl, (ix - 6)
	push	hl
	call	_gfx_FillCircle_NoClip
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 18
	add	hl, de
	ld	de, 2
	push	de
	ld	de, (ix - 9)
	push	de
	push	hl
	call	_gfx_FillCircle_NoClip
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 10
	add	hl, de
	ld	a, (ix + 9)
	add	a, 6
	ld	e, a
	ld	bc, 2
	push	bc
	ld	bc, 7
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	iy, 9
	lea	de, iy
	add	hl, de
	ld	a, (ix + 9)
	add	a, 8
	ld	e, a
	ld	bc, 2
	push	bc
	push	iy
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix + 9)
	add	a, 10
	ld	l, a
	ld	de, 2
	push	de
	ld	de, 11
	push	de
	push	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix + 9)
	add	a, 12
	ld	l, a
	ld	de, 5
	push	de
	ld	de, 11
	push	de
	push	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 7
	add	hl, de
	ld	a, (ix + 9)
	add	a, 17
	ld	e, a
	ld	bc, 2
	push	bc
	ld	bc, 13
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 6
	add	hl, de
	ld	a, (ix + 9)
	add	a, 19
	ld	c, a
	ld	de, 4
	push	de
	ld	de, 15
	push	de
	push	bc
	push	hl
	call	_gfx_FillRectangle_NoClip
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_draw_king
_draw_king:
	ld	hl, -3
	call	__frameset
	ld	hl, (ix + 6)
	ld	a, (ix + 9)
	ld	de, 12
	ld	iy, 3
	ld	bc, 7
	add	hl, de
	add	a, 2
	ld	e, a
	push	bc
	push	iy
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	iy, 9
	lea	de, iy
	add	hl, de
	ld	(ix - 3), hl
	ld	a, (ix + 9)
	add	a, 4
	ld	c, a
	ld	de, 3
	push	de
	push	iy
	push	bc
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 8
	add	hl, de
	ld	a, (ix + 9)
	add	a, 9
	ld	e, a
	ld	bc, 3
	push	bc
	ld	bc, 11
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	a, (ix + 9)
	add	a, 12
	ld	l, a
	ld	de, 5
	push	de
	ld	de, 9
	push	de
	push	hl
	ld	hl, (ix - 3)
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 7
	add	hl, de
	ld	a, (ix + 9)
	add	a, 17
	ld	e, a
	ld	bc, 2
	push	bc
	ld	bc, 13
	push	bc
	push	de
	push	hl
	call	_gfx_FillRectangle_NoClip
	pop	hl
	pop	hl
	pop	hl
	pop	hl
	ld	hl, (ix + 6)
	ld	de, 6
	add	hl, de
	ld	a, (ix + 9)
	add	a, 19
	ld	c, a
	ld	de, 4
	push	de
	ld	de, 15
	push	de
	push	bc
	push	hl
	call	_gfx_FillRectangle_NoClip
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.text,"ax",@progbits
	private	_ce_time_ms
_ce_time_ms:
	ld	hl, -4
	call	__frameset
	call	_clock
	push	hl
	pop	iy
	ld	d, e
	ld	l, 15
	lea	bc, iy
	ld	a, d
	call	__lshru
	push	bc
	pop	hl
	ld	e, a
	ld	bc, 1000
	xor	a, a
	call	__lmulu
	ld	(ix - 3), hl
	ld	(ix - 4), e
	lea	hl, iy
	ld	e, d
	ld	bc, 32767
	call	__land
	ld	bc, 1000
	call	__lmulu
	push	hl
	pop	bc
	ld	a, e
	ld	l, 15
	call	__lshru
	push	bc
	pop	hl
	ld	e, a
	ld	bc, (ix - 3)
	ld	a, (ix - 4)
	call	__ladd
	ld	sp, ix
	pop	ix
	ret
	section	.text,"ax",@progbits

	section	.rodata,"a",@progbits
	private	_board_startpos.start
_board_startpos.start:
	db	""
	db	8 dup 255
	db	8 dup 0
	db	8 dup 0
	db	8 dup 0
	db	8 dup 0
	db	8 dup 1
	db	""

	section	.rodata,"a",@progbits
	private	_castling_mask
_castling_mask:
	db	""

	section	.bss,"aw",@nobits
	private	_engine_hooks
_engine_hooks:
	rb	3

	section	.bss,"aw",@nobits
	public	_engine_board
_engine_board:
	rb	186

	section	.rodata,"a",@progbits
	public	_phase_weight
_phase_weight:
	dw	0
	dw	1
	dw	1
	dw	2
	dw	4
	dw	0

	section	.rodata,"a",@progbits
	public	_mg_table
_mg_table:
	dw	82
	dw	82
	dw	82
	dw	82
	dw	82
	dw	82
	dw	82
	dw	82
	dw	180
	dw	216
	dw	143
	dw	177
	dw	150
	dw	208
	dw	116
	dw	71
	dw	76
	dw	89
	dw	108
	dw	113
	dw	147
	dw	138
	dw	107
	dw	62
	dw	68
	dw	95
	dw	88
	dw	103
	dw	105
	dw	94
	dw	99
	dw	59
	dw	55
	dw	80
	dw	77
	dw	94
	dw	99
	dw	88
	dw	92
	dw	57
	dw	56
	dw	78
	dw	78
	dw	72
	dw	85
	dw	85
	dw	115
	dw	70
	dw	47
	dw	81
	dw	62
	dw	59
	dw	67
	dw	106
	dw	120
	dw	60
	dw	82
	dw	82
	dw	82
	dw	82
	dw	82
	dw	82
	dw	82
	dw	82
	dw	170
	dw	248
	dw	303
	dw	288
	dw	398
	dw	240
	dw	322
	dw	230
	dw	264
	dw	296
	dw	409
	dw	373
	dw	360
	dw	399
	dw	344
	dw	320
	dw	290
	dw	397
	dw	374
	dw	402
	dw	421
	dw	466
	dw	410
	dw	381
	dw	328
	dw	354
	dw	356
	dw	390
	dw	374
	dw	406
	dw	355
	dw	359
	dw	324
	dw	341
	dw	353
	dw	350
	dw	365
	dw	356
	dw	358
	dw	329
	dw	314
	dw	328
	dw	349
	dw	347
	dw	356
	dw	354
	dw	362
	dw	321
	dw	308
	dw	284
	dw	325
	dw	334
	dw	336
	dw	355
	dw	323
	dw	318
	dw	232
	dw	316
	dw	279
	dw	304
	dw	320
	dw	309
	dw	318
	dw	314
	dw	336
	dw	369
	dw	283
	dw	328
	dw	340
	dw	323
	dw	372
	dw	357
	dw	339
	dw	381
	dw	347
	dw	352
	dw	395
	dw	424
	dw	383
	dw	318
	dw	349
	dw	402
	dw	408
	dw	405
	dw	400
	dw	415
	dw	402
	dw	363
	dw	361
	dw	370
	dw	384
	dw	415
	dw	402
	dw	402
	dw	372
	dw	363
	dw	359
	dw	378
	dw	378
	dw	391
	dw	399
	dw	377
	dw	375
	dw	369
	dw	365
	dw	380
	dw	380
	dw	380
	dw	379
	dw	392
	dw	383
	dw	375
	dw	369
	dw	380
	dw	381
	dw	365
	dw	372
	dw	386
	dw	398
	dw	366
	dw	332
	dw	362
	dw	351
	dw	344
	dw	352
	dw	353
	dw	326
	dw	344
	dw	509
	dw	519
	dw	509
	dw	528
	dw	540
	dw	486
	dw	508
	dw	520
	dw	504
	dw	509
	dw	535
	dw	539
	dw	557
	dw	544
	dw	503
	dw	521
	dw	472
	dw	496
	dw	503
	dw	513
	dw	494
	dw	522
	dw	538
	dw	493
	dw	453
	dw	466
	dw	484
	dw	503
	dw	501
	dw	512
	dw	469
	dw	457
	dw	441
	dw	451
	dw	465
	dw	476
	dw	486
	dw	470
	dw	483
	dw	454
	dw	432
	dw	452
	dw	461
	dw	460
	dw	480
	dw	477
	dw	472
	dw	444
	dw	433
	dw	461
	dw	457
	dw	468
	dw	476
	dw	488
	dw	471
	dw	406
	dw	458
	dw	464
	dw	478
	dw	494
	dw	493
	dw	484
	dw	440
	dw	451
	dw	997
	dw	1025
	dw	1054
	dw	1037
	dw	1084
	dw	1069
	dw	1068
	dw	1070
	dw	1001
	dw	986
	dw	1020
	dw	1026
	dw	1009
	dw	1082
	dw	1053
	dw	1079
	dw	1012
	dw	1008
	dw	1032
	dw	1033
	dw	1054
	dw	1081
	dw	1072
	dw	1082
	dw	998
	dw	998
	dw	1009
	dw	1009
	dw	1024
	dw	1042
	dw	1023
	dw	1026
	dw	1016
	dw	999
	dw	1016
	dw	1015
	dw	1023
	dw	1021
	dw	1028
	dw	1022
	dw	1011
	dw	1027
	dw	1014
	dw	1023
	dw	1020
	dw	1027
	dw	1039
	dw	1030
	dw	990
	dw	1017
	dw	1036
	dw	1027
	dw	1033
	dw	1040
	dw	1022
	dw	1026
	dw	1024
	dw	1007
	dw	1016
	dw	1035
	dw	1010
	dw	1000
	dw	994
	dw	975
	dw	65471
	dw	23
	dw	16
	dw	65521
	dw	65480
	dw	65502
	dw	2
	dw	13
	dw	29
	dw	65535
	dw	65516
	dw	65529
	dw	65528
	dw	65532
	dw	65498
	dw	65507
	dw	65527
	dw	24
	dw	2
	dw	65520
	dw	65516
	dw	6
	dw	22
	dw	65514
	dw	65519
	dw	65516
	dw	65524
	dw	65509
	dw	65506
	dw	65511
	dw	65513
	dw	65500
	dw	65487
	dw	65535
	dw	65509
	dw	65497
	dw	65490
	dw	65492
	dw	65503
	dw	65485
	dw	65522
	dw	65522
	dw	65514
	dw	65490
	dw	65492
	dw	65506
	dw	65521
	dw	65509
	dw	1
	dw	7
	dw	65528
	dw	65472
	dw	65493
	dw	65520
	dw	9
	dw	8
	dw	65521
	dw	36
	dw	12
	dw	65482
	dw	8
	dw	65508
	dw	24
	dw	14

	section	.rodata,"a",@progbits
	public	_eg_table
_eg_table:
	dw	94
	dw	94
	dw	94
	dw	94
	dw	94
	dw	94
	dw	94
	dw	94
	dw	272
	dw	267
	dw	252
	dw	228
	dw	241
	dw	226
	dw	259
	dw	281
	dw	188
	dw	194
	dw	179
	dw	161
	dw	150
	dw	147
	dw	176
	dw	178
	dw	126
	dw	118
	dw	107
	dw	99
	dw	92
	dw	98
	dw	111
	dw	111
	dw	107
	dw	103
	dw	91
	dw	87
	dw	87
	dw	86
	dw	97
	dw	93
	dw	98
	dw	101
	dw	88
	dw	95
	dw	94
	dw	89
	dw	93
	dw	86
	dw	107
	dw	102
	dw	102
	dw	84
	dw	107
	dw	94
	dw	96
	dw	87
	dw	94
	dw	94
	dw	94
	dw	94
	dw	94
	dw	94
	dw	94
	dw	94
	dw	223
	dw	243
	dw	268
	dw	253
	dw	250
	dw	254
	dw	218
	dw	182
	dw	256
	dw	273
	dw	256
	dw	279
	dw	272
	dw	256
	dw	257
	dw	229
	dw	257
	dw	261
	dw	291
	dw	290
	dw	280
	dw	272
	dw	262
	dw	240
	dw	264
	dw	284
	dw	303
	dw	303
	dw	303
	dw	292
	dw	289
	dw	263
	dw	263
	dw	275
	dw	297
	dw	306
	dw	297
	dw	298
	dw	285
	dw	263
	dw	258
	dw	278
	dw	280
	dw	296
	dw	291
	dw	278
	dw	261
	dw	259
	dw	239
	dw	261
	dw	271
	dw	276
	dw	279
	dw	261
	dw	258
	dw	237
	dw	252
	dw	230
	dw	258
	dw	266
	dw	259
	dw	263
	dw	231
	dw	217
	dw	283
	dw	276
	dw	286
	dw	289
	dw	290
	dw	288
	dw	280
	dw	273
	dw	289
	dw	293
	dw	304
	dw	285
	dw	294
	dw	284
	dw	293
	dw	283
	dw	299
	dw	289
	dw	297
	dw	296
	dw	295
	dw	303
	dw	297
	dw	301
	dw	294
	dw	306
	dw	309
	dw	306
	dw	311
	dw	307
	dw	300
	dw	299
	dw	291
	dw	300
	dw	310
	dw	316
	dw	304
	dw	307
	dw	294
	dw	288
	dw	285
	dw	294
	dw	305
	dw	307
	dw	310
	dw	300
	dw	290
	dw	282
	dw	283
	dw	279
	dw	290
	dw	296
	dw	301
	dw	288
	dw	282
	dw	270
	dw	274
	dw	288
	dw	274
	dw	292
	dw	288
	dw	281
	dw	292
	dw	280
	dw	525
	dw	522
	dw	530
	dw	527
	dw	524
	dw	524
	dw	520
	dw	517
	dw	523
	dw	525
	dw	525
	dw	523
	dw	509
	dw	515
	dw	520
	dw	515
	dw	519
	dw	519
	dw	519
	dw	517
	dw	516
	dw	509
	dw	507
	dw	509
	dw	516
	dw	515
	dw	525
	dw	513
	dw	514
	dw	513
	dw	511
	dw	514
	dw	515
	dw	517
	dw	520
	dw	516
	dw	507
	dw	506
	dw	504
	dw	501
	dw	508
	dw	512
	dw	507
	dw	511
	dw	505
	dw	500
	dw	504
	dw	496
	dw	506
	dw	506
	dw	512
	dw	514
	dw	503
	dw	503
	dw	501
	dw	509
	dw	503
	dw	514
	dw	515
	dw	511
	dw	507
	dw	499
	dw	516
	dw	492
	dw	927
	dw	958
	dw	958
	dw	963
	dw	963
	dw	955
	dw	946
	dw	956
	dw	919
	dw	956
	dw	968
	dw	977
	dw	994
	dw	961
	dw	966
	dw	936
	dw	916
	dw	942
	dw	945
	dw	985
	dw	983
	dw	971
	dw	955
	dw	945
	dw	939
	dw	958
	dw	960
	dw	981
	dw	993
	dw	976
	dw	993
	dw	972
	dw	918
	dw	964
	dw	955
	dw	983
	dw	967
	dw	970
	dw	975
	dw	959
	dw	920
	dw	909
	dw	951
	dw	942
	dw	945
	dw	953
	dw	946
	dw	941
	dw	914
	dw	913
	dw	906
	dw	920
	dw	920
	dw	913
	dw	900
	dw	904
	dw	903
	dw	908
	dw	914
	dw	893
	dw	931
	dw	904
	dw	916
	dw	895
	dw	65462
	dw	65501
	dw	65518
	dw	65518
	dw	65525
	dw	15
	dw	4
	dw	65519
	dw	65524
	dw	17
	dw	14
	dw	17
	dw	17
	dw	38
	dw	23
	dw	11
	dw	10
	dw	17
	dw	23
	dw	15
	dw	20
	dw	45
	dw	44
	dw	13
	dw	65528
	dw	22
	dw	24
	dw	27
	dw	26
	dw	33
	dw	26
	dw	3
	dw	65518
	dw	65532
	dw	21
	dw	24
	dw	27
	dw	23
	dw	9
	dw	65525
	dw	65517
	dw	65533
	dw	11
	dw	21
	dw	23
	dw	16
	dw	7
	dw	65527
	dw	65509
	dw	65525
	dw	4
	dw	13
	dw	14
	dw	4
	dw	65531
	dw	65519
	dw	65483
	dw	65502
	dw	65515
	dw	65525
	dw	65508
	dw	65522
	dw	65512
	dw	65493

	section	.rodata,"a",@progbits
	private	_knight_offsets
_knight_offsets:
	db	"!"

	section	.rodata,"a",@progbits
	private	_king_offsets
_king_offsets:
	db	""

	section	.rodata,"a",@progbits
	private	_bishop_offsets
_bishop_offsets:
	db	""

	section	.rodata,"a",@progbits
	private	_rook_offsets
_rook_offsets:
	db	""

	section	.bss,"aw",@nobits
	private	_pos_history_count
_pos_history_count:
	rb	2

	section	.bss,"aw",@nobits
	private	_pos_history
_pos_history:
	rb	2048

	section	.bss,"aw",@nobits
	private	_pos_history_irreversible
_pos_history_irreversible:
	rb	2

	section	.bss,"aw",@nobits
	private	_move_sp
_move_sp:
	rb	2

	section	.bss,"aw",@nobits
	private	_killers
_killers:
	rb	384

	section	.bss,"aw",@nobits
	private	_history
_history:
	rb	512

	section	.bss,"aw",@nobits
	private	_search_nodes
_search_nodes:
	rb	4

	section	.bss,"aw",@nobits
	private	_search_stopped
_search_stopped:
	rb	1

	section	.bss,"aw",@nobits
	private	_search_best_root_move
_search_best_root_move:
	rb	3

	section	.bss,"aw",@nobits
	private	_search_time_fn
_search_time_fn:
	rb	3

	section	.bss,"aw",@nobits
	private	_search_deadline
_search_deadline:
	rb	4

	section	.bss,"aw",@nobits
	private	_raw_moves_buf
_raw_moves_buf:
	rb	768

	section	.bss,"aw",@nobits
	private	_move_pool
_move_pool:
	rb	10240

	section	.rodata,"a",@progbits
	private	_mvv_lva
_mvv_lva:
	db	"", 13, "", 10
	db	""
	db	""
	db	"#""! "
	db	"-,+*)("
	db	6 dup 0

	section	.bss,"aw",@nobits
	private	_tt
_tt:
	rb	32768

	section	.bss,"aw",@nobits
	private	_zobrist_initialized
_zobrist_initialized:
	rb	1

	section	.bss,"aw",@nobits
	private	_prng_state
_prng_state:
	rb	4

	section	.bss,"aw",@nobits
	public	_zobrist_piece
_zobrist_piece:
	rb	3072

	section	.bss,"aw",@nobits
	public	_zobrist_castle
_zobrist_castle:
	rb	64

	section	.bss,"aw",@nobits
	public	_zobrist_ep_file
_zobrist_ep_file:
	rb	32

	section	.bss,"aw",@nobits
	public	_zobrist_side
_zobrist_side:
	rb	4

	section	.bss,"aw",@nobits
	public	_lock_piece
_lock_piece:
	rb	1536

	section	.bss,"aw",@nobits
	public	_lock_castle
_lock_castle:
	rb	32

	section	.bss,"aw",@nobits
	public	_lock_ep_file
_lock_ep_file:
	rb	16

	section	.bss,"aw",@nobits
	public	_lock_side
_lock_side:
	rb	2

	section	.bss,"aw",@nobits
	private	_state
_state:
	rb	3

	section	.bss,"aw",@nobits
	private	_menu_cursor
_menu_cursor:
	rb	1

	section	.bss,"aw",@nobits
	private	_running
_running:
	rb	1

	section	.bss,"aw",@nobits
	private	_cur_g1
_cur_g1:
	rb	1

	section	.bss,"aw",@nobits
	private	_cur_g6
_cur_g6:
	rb	1

	section	.bss,"aw",@nobits
	private	_cur_g7
_cur_g7:
	rb	1

	section	.bss,"aw",@nobits
	private	_prev_g1
_prev_g1:
	rb	1

	section	.bss,"aw",@nobits
	private	_prev_g6
_prev_g6:
	rb	1

	section	.bss,"aw",@nobits
	private	_prev_g7
_prev_g7:
	rb	1

	section	.bss,"aw",@nobits
	private	_game_mode
_game_mode:
	rb	1

	section	.bss,"aw",@nobits
	private	_diff_cursor
_diff_cursor:
	rb	3

	section	.bss,"aw",@nobits
	private	_cur_r
_cur_r:
	rb	3

	section	.bss,"aw",@nobits
	private	_cur_c
_cur_c:
	rb	3

	section	.bss,"aw",@nobits
	private	_sel_r
_sel_r:
	rb	3

	section	.bss,"aw",@nobits
	private	_sel_c
_sel_c:
	rb	3

	section	.bss,"aw",@nobits
	private	_current_turn
_current_turn:
	rb	3

	section	.bss,"aw",@nobits
	private	_has_last_move
_has_last_move:
	rb	3

	section	.bss,"aw",@nobits
	private	_legal_target_count
_legal_target_count:
	rb	1

	section	.bss,"aw",@nobits
	private	_ai_thinking
_ai_thinking:
	rb	3

	section	.bss,"aw",@nobits
	private	_anim_active
_anim_active:
	rb	1

	section	.bss,"aw",@nobits
	private	_game_over_reason
_game_over_reason:
	rb	1

	section	.bss,"aw",@nobits
	private	_board
_board:
	rb	64

	section	.rodata,"a",@progbits
	private	_.str
_.str:
	db	"Play vs. Human", 0

	section	.rodata,"a",@progbits
	private	_.str.1
_.str.1:
	db	"Play vs. Computer", 0

	section	.rodata,"a",@progbits
	private	___const.draw_menu.items
___const.draw_menu.items:
	dl	_.str
	dl	_.str.1

	section	.rodata,"a",@progbits
	private	_.str.2
_.str.2:
	db	"CHESS", 0

	section	.rodata,"a",@progbits
	private	_.str.3
_.str.3:
	db	"arrows: move  enter: select  clear: quit", 0

	section	.bss,"aw",@nobits
	private	_ai_difficulty
_ai_difficulty:
	rb	3

	section	.rodata,"a",@progbits
	private	_.str.4
_.str.4:
	db	"Difficulty", 0

	section	.rodata,"a",@progbits
	private	_.str.5
_.str.5:
	db	"left/right: choose  enter: start  clear: back", 0

	section	.rodata,"a",@progbits
	private	_update_playing.depth_table
_update_playing.depth_table:
	db	""

	section	.rodata,"a",@progbits
	private	_update_playing.time_table
_update_playing.time_table:
	dd	1000
	dd	2000
	dd	3000
	dd	5000
	dd	8000
	dd	10000
	dd	15000
	dd	20000
	dd	25000
	dd	30000

	section	.bss,"aw",@nobits
	private	_winner
_winner:
	rb	3

	section	.bss,"aw",@nobits
	private	_pending_move
_pending_move:
	rb	5

	section	.bss,"aw",@nobits
	private	_pending_effects
_pending_effects:
	rb	8

	section	.bss,"aw",@nobits
	private	_legal_targets
_legal_targets:
	rb	320

	section	.bss,"aw",@nobits
	private	_anim_start
_anim_start:
	rb	4

	section	.bss,"aw",@nobits
	private	_anim_duration
_anim_duration:
	rb	4

	section	.bss,"aw",@nobits
	private	_anim_from_c
_anim_from_c:
	rb	3

	section	.bss,"aw",@nobits
	private	_anim_from_r
_anim_from_r:
	rb	3

	section	.bss,"aw",@nobits
	private	_anim_to_c
_anim_to_c:
	rb	3

	section	.bss,"aw",@nobits
	private	_anim_to_r
_anim_to_r:
	rb	3

	section	.bss,"aw",@nobits
	private	_anim_piece
_anim_piece:
	rb	1

	section	.bss,"aw",@nobits
	private	_last_from_r
_last_from_r:
	rb	3

	section	.bss,"aw",@nobits
	private	_last_from_c
_last_from_c:
	rb	3

	section	.bss,"aw",@nobits
	private	_last_to_r
_last_to_r:
	rb	3

	section	.bss,"aw",@nobits
	private	_last_to_c
_last_to_c:
	rb	3

	section	.bss,"aw",@nobits
	private	_promo_saved_has_last
_promo_saved_has_last:
	rb	3

	section	.bss,"aw",@nobits
	private	_promo_saved_from_r
_promo_saved_from_r:
	rb	3

	section	.bss,"aw",@nobits
	private	_promo_saved_from_c
_promo_saved_from_c:
	rb	3

	section	.bss,"aw",@nobits
	private	_promo_saved_to_r
_promo_saved_to_r:
	rb	3

	section	.bss,"aw",@nobits
	private	_promo_saved_to_c
_promo_saved_to_c:
	rb	3

	section	.bss,"aw",@nobits
	private	_promo_r
_promo_r:
	rb	3

	section	.bss,"aw",@nobits
	private	_promo_c
_promo_c:
	rb	3

	section	.bss,"aw",@nobits
	private	_promo_from_r
_promo_from_r:
	rb	3

	section	.bss,"aw",@nobits
	private	_promo_from_c
_promo_from_c:
	rb	3

	section	.bss,"aw",@nobits
	private	_anim_captured
_anim_captured:
	rb	1

	section	.bss,"aw",@nobits
	private	_promo_captured
_promo_captured:
	rb	1

	section	.bss,"aw",@nobits
	private	_promo_cursor
_promo_cursor:
	rb	3

	section	.rodata,"a",@progbits
	private	_.str.6
_.str.6:
	db	"vs Human", 0

	section	.rodata,"a",@progbits
	private	_.str.7
_.str.7:
	db	"vs CPU", 0

	section	.rodata,"a",@progbits
	private	_.str.8
_.str.8:
	db	"Lv ", 0

	section	.rodata,"a",@progbits
	private	_.str.9
_.str.9:
	db	"White", 0

	section	.rodata,"a",@progbits
	private	_.str.10
_.str.10:
	db	"Black", 0

	section	.rodata,"a",@progbits
	private	_.str.11
_.str.11:
	db	"Thinking", 0

	section	.rodata,"a",@progbits
	private	_.str.12
_.str.12:
	db	"CHECK!", 0

	section	.rodata,"a",@progbits
	private	_.str.13
_.str.13:
	db	"to move", 0

	section	.rodata,"a",@progbits
	private	_.str.14
_.str.14:
	db	"Sel: ", 0

	section	.rodata,"a",@progbits
	private	_.str.15
_.str.15:
	db	"D-pad", 0

	section	.rodata,"a",@progbits
	private	_.str.16
_.str.16:
	db	" Move", 0

	section	.rodata,"a",@progbits
	private	_.str.17
_.str.17:
	db	"Enter", 0

	section	.rodata,"a",@progbits
	private	_.str.18
_.str.18:
	db	" Select", 0

	section	.rodata,"a",@progbits
	private	_.str.19
_.str.19:
	db	"Clear", 0

	section	.rodata,"a",@progbits
	private	_.str.20
_.str.20:
	db	" Deselect", 0

	section	.rodata,"a",@progbits
	private	_.str.21
_.str.21:
	db	"Mode", 0

	section	.rodata,"a",@progbits
	private	_.str.22
_.str.22:
	db	" Resign", 0

	section	.rodata,"a",@progbits
	private	_update_promotion.promo_flags
_update_promotion.promo_flags:
	db	0, " 0"

	section	.rodata,"a",@progbits
	private	_promo_pieces_white
_promo_pieces_white:
	db	""

	section	.rodata,"a",@progbits
	private	_promo_pieces_black
_promo_pieces_black:
	db	""

	section	.rodata,"a",@progbits
	private	_.str.23
_.str.23:
	db	"Promote to:", 0

	section	.rodata,"a",@progbits
	private	_.str.29
_.str.29:
	db	"White wins!", 0

	section	.rodata,"a",@progbits
	private	_.str.30
_.str.30:
	db	"Black wins!", 0

	section	.rodata,"a",@progbits
	private	_.str.31
_.str.31:
	db	"Draw", 0

	section	.rodata,"a",@progbits
	private	_.str.32
_.str.32:
	db	"Checkmate", 0

	section	.rodata,"a",@progbits
	private	_.str.33
_.str.33:
	db	"Stalemate", 0

	section	.rodata,"a",@progbits
	private	_.str.34
_.str.34:
	db	"50-move rule", 0

	section	.rodata,"a",@progbits
	private	_.str.35
_.str.35:
	db	"Repetition", 0

	section	.rodata,"a",@progbits
	private	_.str.36
_.str.36:
	db	"Insufficient material", 0

	section	.rodata,"a",@progbits
	private	_.str.37
_.str.37:
	db	"Resignation", 0

	section	.rodata,"a",@progbits
	private	_.str.38
_.str.38:
	db	"Enter: Return to menu", 0

	section	.rodata,"a",@progbits
	private	_switch.table.main
_switch.table.main:
	dl	_.str.32
	dl	_.str.33
	dl	_.str.34
	dl	_.str.35
	dl	_.str.36

	ident	"clang version 15.0.0 (https://github.com/CE-Programming/llvm-project 23b78267b5d376b232475d0805a937e54b61e0d0)"
	ident	"clang version 15.0.0 (https://github.com/CE-Programming/llvm-project 23b78267b5d376b232475d0805a937e54b61e0d0)"
	ident	"clang version 15.0.0 (https://github.com/CE-Programming/llvm-project 23b78267b5d376b232475d0805a937e54b61e0d0)"
	ident	"clang version 15.0.0 (https://github.com/CE-Programming/llvm-project 23b78267b5d376b232475d0805a937e54b61e0d0)"
	ident	"clang version 15.0.0 (https://github.com/CE-Programming/llvm-project 23b78267b5d376b232475d0805a937e54b61e0d0)"
	ident	"clang version 15.0.0 (https://github.com/CE-Programming/llvm-project 23b78267b5d376b232475d0805a937e54b61e0d0)"
	ident	"clang version 15.0.0 (https://github.com/CE-Programming/llvm-project 23b78267b5d376b232475d0805a937e54b61e0d0)"
	ident	"clang version 15.0.0 (https://github.com/CE-Programming/llvm-project 23b78267b5d376b232475d0805a937e54b61e0d0)"
	extern	_gfx_PrintChar
	extern	__lcmpzero
	extern	__sxor
	extern	__idivs
	extern	__idivu
	extern	__ineg
	extern	_gfx_FillScreen
	extern	__imulu
	extern	__lxor
	extern	_gfx_End
	extern	__bshru
	extern	__frameset0
	extern	_gfx_SetTextXY
	extern	__ldivs
	extern	__ldivu
	extern	_gfx_SetTextFGColor
	extern	_gfx_Begin
	extern	__sshl
	extern	__sshru
	extern	_strlen
	extern	__setflag
	extern	__iand
	extern	__lmulu
	extern	_gfx_SwapDraw
	extern	__lshl
	extern	_clock
	extern	__Unwind_SjLj_Register
	extern	_srand
	extern	__sneg
	extern	__ixor
	extern	_gfx_HorizLine_NoClip
	extern	_gfx_FillRectangle_NoClip
	extern	__lsub
	extern	__ishru
	extern	__lcmpu
	extern	__indcall
	extern	_gfx_Rectangle_NoClip
	extern	__sand
	extern	_gfx_PrintString
	extern	__ishl
	extern	__ladd
	extern	_gfx_PrintInt
	extern	_gfx_FillCircle_NoClip
	extern	__lshru
	extern	__frameset
	extern	_kb_Scan
	extern	_gfx_GetStringWidth
	extern	_gfx_SetDraw
	extern	__Unwind_SjLj_Unregister
	extern	_gfx_SetColor
	extern	__land
	extern	__bshl
	extern	__sor
	extern	_gfx_PrintStringXY
	extern	_gfx_SetTextScale
